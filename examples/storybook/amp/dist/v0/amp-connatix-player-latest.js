(self.AMP=self.AMP||[]).push({n:"amp-connatix-player",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var h;function k(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var l="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function m(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],e=0;e<b.length;++e){var c=b[e];if(c&&c.Math==Math)return}(function(){throw Error("Cannot find global object")})()}m(this);"function"===typeof Symbol&&Symbol("x");var n;if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var t;a:{var u={a:!0},v={};try{v.__proto__=u;t=v.a;break a}catch(a){}t=!1}n=t?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var w=n,x={SUFFICIENT:1,INSUFFICIENT:2,UNKNOWN_NOT_REQUIRED:3,UNKNOWN:4},y={TCF_V1:1,TCF_V2:2,US_PRIVACY_STRING:3};function z(){var a=this;this.promise=new Promise((function(b,e){a.resolve=b;a.reject=e}))}var aa=Array.isArray;function ba(a,b){for(var e=[],c=0,d=0;d<a.length;d++){var f=a[d];b(f,d,a)?e.push(f):(c<d&&(a[c]=f),c++)}c<a.length&&(a.length=c)}function A(a){return a||{}}function ca(a){var b=null,e="";var c=arguments;var d="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];c=d?d.call(c):{next:k(c)};for(d=c.next();!d.done;d=c.next())if(d=d.value,d instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(d,"message"))?0:f.writable)b=d;else{f=d.stack;var g=Error(d.message);for(b in d)g[b]=d[b];g.stack=f;b=g}}else e&&(e+=" "),e+=d;b?e&&(b.message=e+": "+b.message):b=Error(e);return b}function da(a){var b=ca.apply(null,arguments);setTimeout((function(){var e,c;null==(c=(e=self).__AMP_REPORT_ERROR)||c.call(e,b);throw b}))}function B(a,b){for(var e=[],c=1;c<arguments.length;++c)e[c-1]=arguments[c];try{a.apply(null,e)}catch(d){da(d)}}var C=self.AMP_CONFIG||{},ea=("string"==typeof C.cdnProxyRegex?new RegExp(C.cdnProxyRegex):C.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function D(a){if(self.document&&self.document.head&&(!self.location||!ea.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}C.cdnUrl||D("runtime-host");C.geoApiUrl||D("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var E=self.__AMP_LOG;var fa={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};var ha=/vertical/,F=new WeakMap,G=new WeakMap,H=new WeakMap;function I(a,b,e){var c=a.ownerDocument.defaultView;if(c){var d=G.get(a);d||(d=[],G.set(a,d),J(c).observe(a));if(!d.some((function(g){return g.callback===e&&g.type===b}))){d.push({type:b,callback:e});var f=H.get(a);f&&setTimeout((function(){return K(b,e,f)}))}}}function L(a,b,e){var c=G.get(a);c&&(ba(c,(function(d){return d.callback===e&&d.type===b})),0==c.length&&(G.delete(a),H.delete(a),(c=a.ownerDocument.defaultView)&&J(c).unobserve(a)))}function J(a){var b=F.get(a);b||(b=new a.ResizeObserver(ia),F.set(a,b));return b}function ia(a){for(var b=new Set,e=a.length-1;0<=e;e--){var c=a[e],d=c.target;if(!b.has(d)){b.add(d);var f=G.get(d);if(f)for(H.set(d,c),d=0;d<f.length;d++){var g=f[d];K(g.type,g.callback,c)}}}}function K(a,b,e){if(0==a)a=e.contentRect,B(b,{width:a.width,height:a.height});else if(1==a){var c=e.borderBoxSize;if(c)var d=0<c.length?c[0]:{inlineSize:0,blockSize:0};else{a=e.target;var f=ha.test((a.ownerDocument.defaultView.getComputedStyle(a)||fa)["writing-mode"]),g=a.offsetHeight,p=a.offsetWidth;if(f){var q=p;var r=g}else r=p,q=g;d={inlineSize:r,blockSize:q}}B(b,d)}}function M(a){this.B=a;this.C=this.G=!1;this.A=this.A.bind(this)}M.prototype.updatePlaying=function(a){a!==this.G&&((this.G=a)?(this.C=!1,I(this.B,1,this.A)):L(this.B,1,this.A))};M.prototype.A=function(a){var b=a.blockSize,e=0<a.inlineSize&&0<b;e!==this.C&&((this.C=e)||this.B.pause())};function N(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return O(a,b)}function ja(a){var b=P(a);b=Q(b);return O(b,"documentInfo")}function P(a){return a.nodeType?N((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function Q(a){a=P(a);return a.isSingleDoc()?a.win:a}function O(a,b){a=R(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function S(a){var b=R(a).consentPolicyManager;if(b){if(b.promise)return b.promise;O(a,"consentPolicyManager");return b.promise=Promise.resolve(b.obj)}return null}function R(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function ka(){var a=new z,b=a.promise,e=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:e,context:null,ctor:null}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function U(a){var b=S(Q(a));if(b)return b;var e=P(a);return e.whenExtensionsKnown().then((function(){var c=e.getExtensionVersion("amp-consent");return c?N(e.win,"extensions").waitForExtension("amp-consent",c):null})).then((function(c){if(c){var d=Q(a);var f=S(d);f?d=f:(d=R(d),d.consentPolicyManager=ka(),d=d.consentPolicyManager.promise)}else d=null;return d}))}A({c:!0,v:!0,a:!0,ad:!0});function la(a,b){if(!b)return a;var e=a.split("#",2),c=e[0].split("?",2),d=c[0]+(c[1]?"?"+c[1]+"&"+b:"?"+b);return d+=e[1]?"#"+e[1]:""}function ma(a){var e,b=[];for(e in a){var c=a[e];if(null!=c)if(aa(c))for(var d=0;d<c.length;d++){var f=c[d];b.push(encodeURIComponent(e)+"="+encodeURIComponent(f))}else b.push(encodeURIComponent(e)+"="+encodeURIComponent(c))}return b.join("&")}function na(a,b){var e=b=void 0===b?"default":b;return U(a).then((function(c){return c?c.whenPolicyResolved(e):null}))}function oa(a,b){return U(a).then((function(e){return e?e.getMergedSharedData(b):null}))}function pa(a,b){var e=void 0===b?"default":b;return U(a).then((function(c){return c?c.getConsentStringInfo(e):null}))}function qa(a,b){var e=void 0===b?"default":b;return U(a).then((function(c){return c?c.getConsentMetadataInfo(e):null}))}function ra(a){function b(c){return{status:"fulfilled",value:c}}function e(c){return{status:"rejected",reason:c}}return Promise.all(a.map((function(c){return c.then(b,e)})))}function V(a){a=AMP.BaseElement.call(this,a)||this;a.J="";a.H="";a.D="https://cdm.connatix.com";a.h=null;a.j=null;a.F=null;a.o=a.o.bind(a);a.I=new M(a.element);return a}var W=AMP.BaseElement;V.prototype=l(W.prototype);V.prototype.constructor=V;if(w)w(V,W);else for(var X in W)if("prototype"!=X)if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(W,X);Y&&Object.defineProperty(V,X,Y)}else V[X]=W[X];V.K=W.prototype;function Z(a,b,e){a.j&&a.j.then((function(c){c&&c.contentWindow&&c.contentWindow.postMessage(JSON.stringify(A({event:"command",func:b,args:e||""})),a.D)}))}function sa(a){a.win.addEventListener("message",(function(b){if(a.h&&b.source===a.h.contentWindow){var e=b.data;try{var c=JSON.parse(e)}catch(f){c=null}var d=c;if(d&&"command"===d.event)switch(d.func){case"cnxClose":a.h&&(b=a.h,b.parentElement&&b.parentElement.removeChild(b),a.h=null);a.attemptCollapse();break;case"cnxPlayerRendered":a.F(a.h)}}}))}function ta(a){var b=AMP.BaseElement.prototype.getConsentPolicy.call(a)||"default",e=na(a.element,b),c=pa(a.element,b),d=oa(a.element,b),f=qa(a.element,b);ra([e,c,d,f]).then((function(g){if(g&&4===g.length){var p=g[0],q=g[1],r=g[2],T=g[3];Z(a,"ampConsentInfo",{consentPolicyStateEnum:x,consentStringTypeEnum:y,consentPolicyState:{error:p.reason,value:p.value},rawConsentString:{error:q.reason,value:q.value},consentSharedData:{error:r.reason,value:r.value},consentMetadata:{error:T.reason,value:T.value}})}}))}h=V.prototype;h.buildCallback=function(){var a=this.element;a.classList.add("i-amphtml-media-component");var b=a.getAttribute("data-player-id");if(!E.user)throw Error("failed to call initLogConstructor");this.J=E.user.assert(b,"The data-player-id attribute is required for <amp-connatix-player> %s",a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);this.H=a.getAttribute("data-media-id")||"";a=new z;this.j=a.promise;this.F=a.resolve};h.preconnectCallback=function(a){N(this.win,"preconnect").url(this.getAmpDoc(),this.D,a)};h.layoutCallback=function(){var a=this,b=this.element,e=A({playerId:this.J||void 0,mediaId:this.H||void 0,url:ja(b).get().sourceUrl}),c=la(this.D+"/amp-embed/index.html",ma(e)),d=b.ownerDocument.createElement("iframe");d.setAttribute("frameborder","0");d.setAttribute("allowfullscreen","true");d.src=c;this.applyFillContent(d,!0);b.appendChild(d);this.h=d;sa(this);ta(this);I(this.element,0,this.o);this.I.updatePlaying(!0);return this.loadPromise(d).then((function(){return a.j}))};h.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};h.o=function(a){this.h&&Z(this,"ampResize",{width:a.width,height:a.height})};h.pauseCallback=function(){this.h&&(Z(this,"ampPause"),this.h.src=this.h.src)};h.unlayoutCallback=function(){if(this.h){var a=this.h;a.parentElement&&a.parentElement.removeChild(a);this.h=null}a=new z;this.j=a.promise;this.F=a.resolve;L(this.element,0,this.o);this.I.updatePlaying(!1);return!0};(function(a){a.registerElement("amp-connatix-player",V)})(self.AMP)}});//# sourceMappingURL=amp-connatix-player-0.1.js.map