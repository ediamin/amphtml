(self.AMP=self.AMP||[]).push({n:"amp-consent",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var l;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function n(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ca(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}ca(this);"function"===typeof Symbol&&Symbol("x");var da;if("function"==typeof Object.setPrototypeOf)da=Object.setPrototypeOf;else{var ea;a:{var fa={a:!0},ha={};try{ha.__proto__=fa;ea=ha.a;break a}catch(a){}ea=!1}da=ea?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ja,ia=da;function q(){return ja?ja:ja=Promise.resolve(void 0)}function r(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}var t=Array.isArray;function ka(a,b){if(!isFinite(5))throw Error("Invalid depth: 5");if(a===b)return!0;for(var c=[{a:a,b:b,depth:5}];0<c.length;){var d=c.shift();a=d.a;b=d.b;d=d.depth;if(0<d){if(typeof a!==typeof b)return!1;if(t(a)&&t(b)){if(a.length!==b.length)return!1;for(var e=0;e<a.length;e++)c.push({a:a[e],b:b[e],depth:d-1});continue}else if(a&&b&&"object"===typeof a&&"object"===typeof b){var f=Object.keys(a),h=Object.keys(b);if(f.length!==h.length)return!1;e=n(f);for(var g=e.next();!g.done;g=e.next()){var k=g.value;c.push({a:a[k],b:b[k],depth:d-1})}continue}}if(a!==b)return!1}return!0}function la(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}var ma=Object.prototype,u=ma.hasOwnProperty,na=ma.toString;function v(a){return"[object Object]"===na.call(a)}function w(a){var b=Object.create(null);a&&Object.assign(b,a);return b}function x(a){return a||{}}function oa(a,b){var c=[],d=[];for(d.push({t:a,s:b,d:0});0<d.length;){var e=d.shift(),f=e.d;b=e.s;var h=e.t;if(c.includes(b))throw Error("Source object has a circular reference.");c.push(b);if(h!==b)if(1<f)Object.assign(h,b);else{e=n(Object.keys(b));for(var g=e.next();!g.done;g=e.next()){g=g.value;var k=b[g];if(u.call(h,g)){var m=h[g];if(v(k)&&v(m)){d.push({t:m,s:k,d:f+1});continue}}h[g]=k}}}return a}function pa(a){return"number"===typeof a&&isFinite(a)}var qa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function y(a,b){var c=b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return c}}function A(a){var b=w();if(!a)return b;for(var c;c=qa.exec(a);){var d=y(c[1],c[1]);c=c[2]?y(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b}var ra="";var B=self.AMP_CONFIG||{},sa=("string"==typeof B.cdnProxyRegex?new RegExp(B.cdnProxyRegex):B.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ta(a){if(!self.document||!self.document.head||self.location&&sa.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}var ua={thirdParty:B.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:B.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof B.thirdPartyFrameRegex?new RegExp(B.thirdPartyFrameRegex):B.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:B.cdnUrl||ta("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:sa,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:B.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:B.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:B.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:B.geoApiUrl||ta("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var C=self.__AMP_LOG;function D(a){C.user||(C.user=va());var b=C.user.win;return a&&a.ownerDocument.defaultView!=b?C.userForEmbed?C.userForEmbed:C.userForEmbed=va():C.user}function va(){throw Error("failed to call initLogConstructor")}function E(){if(C.dev)return C.dev;throw Error("failed to call initLogConstructor")}function F(a,b,c,d,e){return D().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)}function G(a){return a?u.call(a,"isDirty")&&1==a.isDirty?!0:!1:!1}function xa(a){return 1==a?!0:2==a?!1:null}function ya(a,b,c){if(!a&&!b)return!0;if(a&&b){var d=xa(a.consentState)===xa(b.consentState),e=(a.consentString||"")===(b.consentString||"");var f=c?!!a.isDirty===!!c:!!a.isDirty===!!b.isDirty;var h=ka(a.consentMetadata,b.consentMetadata),g=ka(a.purposeConsents,b.purposeConsents);return d&&e&&h&&g&&f}return!1}function H(a,b,c,d,e){return{consentState:a,consentString:b,consentMetadata:c,purposeConsents:d,isDirty:e}}function za(a,b,c,d){return{consentStringType:a,additionalConsent:b,gdprApplies:c,purposeOne:d}}function Aa(a){return!0===a||1===a?1:!1===a||0===a?2:5}function Ba(a){return a.consentString?!0:1===a.consentState||2===a.consentState}function I(a){return 1===a?"accepted":2===a?"rejected":"unknown"}var Ca={appconsent:{consentInstanceId:"appconsent",checkConsentHref:"https://collector.appconsent.io/amp/check-consent",promptUISrc:"https://cdn.appconsent.io/loader.html"},ConsentManager:{consentInstanceId:"ConsentManager",checkConsentHref:"https://consentmanager.mgr.consensu.org/delivery/ampcheck.php",promptUISrc:"https://consentmanager.mgr.consensu.org/delivery/ampui.php"},didomi:{consentInstanceId:"didomi",checkConsentHref:"https://api.privacy-center.org/amp/check-consent",promptUISrc:"https://sdk-amp.privacy-center.org/loader.html"},iubenda:{consentInstanceId:"iubenda",checkConsentHref:"https://amp.iubenda.com/checkConsent",promptUISrc:"https://www.iubenda.com/en/help/22135-cookie-solution-amp"},sirdata:{consentInstanceId:"sirdata",checkConsentHref:"https://sddan.mgr.consensu.org/api/v1/public/amp/check",promptUISrc:"https://ui.sddan.mgr.consensu.org/amp.html"},Marfeel:{consentInstanceId:"Marfeel",checkConsentHref:"https://live.mrf.io/cmp/marfeel/amp/check-consent",promptUISrc:"https://live.mrf.io/cmp/marfeel/amp/index.html"},Ogury:{consentInstanceId:"Ogury",checkConsentHref:"https://api.ogury.mgr.consensu.org/v1/check-for-consent",promptUISrc:"https://www.ogury.mgr.consensu.org/amp.html"},onetrust:{consentInstanceId:"onetrust",checkConsentHref:"https://cdn.cookielaw.org/amp/consent/check",promptUISrc:" https://amp.onetrust.mgr.consensu.org/"},opencmp:{consentInstanceId:"opencmp",checkConsentHref:"https://amp.opencmp.net/consent/check",promptUISrc:"https://cdn.opencmp.net/tcf-v2/amp/cmp.html"},pubtech:{consentInstanceId:"pubtech",checkConsentHref:"https://amp.pubtech.it/cmp-amp-check-consent",promptUISrc:"https://cdn.pubtech.ai/amp/index.html"},quantcast:{consentInstanceId:"quantcast",checkConsentHref:"https://apis.quantcast.mgr.consensu.org/amp/check-consent",promptUISrc:"https://quantcast.mgr.consensu.org/tcfv2/amp.html"},SourcePoint:{consentInstanceId:"SourcePoint",checkConsentHref:"https://sourcepoint.mgr.consensu.org/consent/v2/amp",promptUISrc:"https://amp.pm.sourcepoint.mgr.consensu.org/"},UniConsent:{consentInstanceId:"UniConsent",checkConsentHref:"https://edge.uniconsent.com/amp/check-consent",promptUISrc:"https://cmp.uniconsent.com/amp/index.html"},Usercentrics:{consentInstanceId:"Usercentrics",checkConsentHref:"https://consents.usercentrics.eu/amp/checkConsent",promptUISrc:"https://amp.usercentrics.eu/amp.html"},LiveRamp:{consentInstanceId:"LiveRamp",checkConsentHref:"https://api.privacymanager.io/amp/check-consent",promptUISrc:"https://amp-consent-tool.privacymanager.io/1/index.html"}};function J(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return K(a,b)}function L(a,b){var c=M(a);c=N(c);return K(c,b)}function Da(a,b){a=M(a);a=N(a);return Ea(a,b)?K(a,b):null}function O(a,b){a=N(a);var c=Fa(a,b);c?b=c:(a=Ga(a),a[b]=Ha(),b=a[b].promise);return b}function M(a){return a.nodeType?J((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function N(a){a=M(a);return a.isSingleDoc()?a.win:a}function K(a,b){Ea(a,b);a=Ga(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Fa(a,b){var c=Ga(a)[b];if(c){if(c.promise)return c.promise;K(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Ga(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function Ea(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function Ha(){var a=new r,b=a.promise,c=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:c,context:null,ctor:null}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var Q;function Ia(a){try{var b=a.ownerDocument,c=b.createElement("div"),d=b.createElement("div");c.appendChild(d);return c.querySelector(":scope div")===d}catch(e){return!1}}function Ja(a,b){a.classList.add("i-amphtml-scoped");var c=b.replace(/^|,/g,"$&.i-amphtml-scoped "),d=a.querySelectorAll(c);a.classList.remove("i-amphtml-scoped");return d}function Ka(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function La(a){return a.closest?a.closest(".i-amphtml-fie"):Ka(a,(function(b){var c=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector;return c?c.call(b,".i-amphtml-fie"):!1}))}function Ma(a){/^[\w-]+$/.test("placeholder");return a.querySelector("placeholder")}function Na(a,b){a.insertBefore(b,a.firstChild)}function Oa(a){try{a.focus()}catch(b){}}function Pa(a){a=a.tagName;return a.startsWith("AMP-")&&!("AMP-STICKY-AD-TOP-PADDING"==a||"AMP-BODY"==a)}function Qa(a){Pa(a);if(a.createdCallback)return Promise.resolve(a);if(!a.__AMP_UPG_PRM){var b=new r;a.__AMP_UPG_PRM=b.promise;a.__AMP_UPG_RES=b.resolve}return a.__AMP_UPG_PRM}function Ra(a){var b=Fa(N(a),"geo");if(b)return b;var c=M(a);return c.whenExtensionsKnown().then((function(){var d=c.getExtensionVersion("amp-geo");return d?J(c.win,"extensions").waitForExtension("amp-geo",d):null})).then((function(d){return d?Fa(N(a),"geo"):null}))}var Sa={promptUI:!0,checkConsentHref:!0,promptIfUnknownForGeoGroup:!0,onUpdateHref:!0},Ta={CLIENT_ID:!0,PAGE_VIEW_ID:!0,PAGE_VIEW_ID_64:!0};function Ua(a){this.N=a;this.Ea=this.ea=null}Ua.prototype.getConsentConfigPromise=function(){this.Ea||(this.Ea=Va(this));return this.Ea};Ua.prototype.getMatchedGeoGroup=function(){return this.ea};function Wa(a){if(!a.consents)return a;var b=Object.keys(a.consents);F(1>=b.length,"%s: only single consent instance is supported","amp-consent/consent-config");if(0<b.length){a.consentInstanceId=b[0];for(var c=a.consents[b[0]],d=Object.keys(c),e=0;e<d.length;e++){var f=d[e];!a[f]&&Sa[f]&&(a[d[e]]=c[d[e]])}}delete a.consents;return a}function Va(a){var b=Wa(F(Xa(a),"%s: Inline config not found")),c=Ya(a),d=oa(c||{},b||{});F(d.consentInstanceId,"%s: consentInstanceId to store consent info is required","amp-consent/consent-config");if(d.policy)for(var e=Object.keys(d.policy),f=0;f<e.length;f++)"default"!=e[f]&&(D().warn("amp-consent/consent-config","policy %s is currently not supported and will be ignored",e[f]),delete d.policy[e[f]]);var h=d.promptIfUnknownForGeoGroup;"string"===typeof h?(d.consentRequired=!1,e={},d.geoOverride=(e[h]={consentRequired:!0},e)):void 0===d.consentRequired&&d.checkConsentHref&&(d.consentRequired="remote");return Za(a,d).then((function(g){var k=g.consentRequired;F("boolean"===typeof k||"remote"===k,"`consentRequired` is required","amp-consent/consent-config");"remote"===k&&F(g.checkConsentHref,"%s: `checkConsentHref` must be specified if `consentRequired` is remote","amp-consent/consent-config");return g})).then((function(g){var k=a.N;/^[\w-]+$/.test("amp-story-consent");(void 0!==Q?Q:Q=Ia(k))?k=k.querySelector("> amp-story-consent".replace(/^|,/g,"$&:scope ")):(k=Ja(k,"> amp-story-consent"),k=void 0===k[0]?null:k[0]);k&&F(!g.promptUISrc,"%s: `promptUiSrc` cannot be specified while using %s.","amp-consent/consent-config","amp-story-consent");return g}))}function Za(a,b){return b.geoOverride?Ra(a.N).then((function(c){F(c,"%s: requires <amp-geo> to use `geoOverride`","amp-consent/consent-config");for(var d=w(b),e=Object.keys(b.geoOverride),f=0;f<e.length;f++)if(2===c.isInCountryGroup(e[f])){var h=b.geoOverride[e[f]];u.call(h,"consentInstanceId")&&(D().error("amp-consent/consent-config","consentInstanceId cannot be overriden in geoGroup:",e[f]),delete h.consentInstanceId);oa(d,h);a.ea=e[f];break}delete d.geoOverride;return d})):Promise.resolve(b)}function Xa(a){try{var b=a.N;/^[\w-]+$/.test("script");var c=(void 0!==Q?Q:Q=Ia(b))?b.querySelectorAll("> script".replace(/^|,/g,"$&:scope ")):Ja(b,"> script");if(1!==c.length)throw Error("Found "+c.length+" <script> children. Expected 1.");var d=c[0];if("SCRIPT"!=d.tagName||!d.hasAttribute("type")||"APPLICATION/JSON"!=d.getAttribute("type").toUpperCase())throw Error('<script> child must have type="application/json"');try{var e=JSON.parse(d.textContent)}catch(f){throw Error("Failed to parse <script> contents. Is it valid JSON?")}return e}catch(f){throw D(a.N).createError("amp-consent/consent-config",f)}}function Ya(a){a=a.N.getAttribute("type");if(!a)return null;F(Ca[a],"%s: invalid CMP type %s","amp-consent/consent-config",a);var b=Ca[a];a=["consentInstanceId","checkConsentHref","promptUISrc"];for(var c=0;c<a.length;c++);return b}function $a(a,b){return Da(a,"url-replace").expandUrlAsync(b,{CLIENT_ID:ab(a)},Ta)}function ab(a){return O(a,"cid").then((function(b){return b.get({scope:"AMP-CONSENT",createCookieIfNotPresent:!0},q())}))}function bb(a,b){var c={};c[b]=void 0;var d={waitFor:c},e=[4,1,2,3],f={waitFor:c,timeout:{seconds:0,fallbackAction:"reject"},unblockOn:e};a._till_responded={waitFor:c,unblockOn:e};a._till_accepted=d;a._auto_reject=f;if(a&&a["default"])return a;a["default"]=d;return a}function cb(){this.I=null}l=cb.prototype;l.add=function(a){var b=this;this.I||(this.I=[]);this.I.push(a);return function(){b.remove(a)}};l.remove=function(a){if(this.I){var b=this.I;a=b.indexOf(a);-1!=a&&b.splice(a,1)}};l.removeAll=function(){this.I&&(this.I.length=0)};l.fire=function(a){if(this.I)for(var b=n(this.I),c=b.next();!c.done;c=b.next())c=c.value,c(a)};l.getHandlerCount=function(){var a,b;return null!=(b=null==(a=this.I)?void 0:a.length)?b:0};var db={"default":!0,_till_responded:!0,_till_accepted:!0,_auto_reject:!0};function eb(a){this.B=a;this.V=w();this.R=w();this.Ba=O(this.B,"consentStateManager");this.$a=new r;var b=new r;this.qb=b.promise;this.Ia=b.resolve;this.ab=new cb;this.Aa=this.G=this.na=this.pa=this.K=this.Za=null}l=eb.prototype;l.setLegacyConsentInstanceId=function(a){this.Za=a;this.P()};l.registerConsentPolicyInstance=function(a,b){var c=this;if(!this.R[a]){var d=Object.keys(b.waitFor||{});if(1!==d.length||d[0]!==this.Za)D().error("consent-policy-manager","invalid waitFor value, consent policy will never resolve");else{var e=new fb(b);this.R[a]=e;this.V[a]&&(this.V[a].resolve(),this.V[a]=null);this.qb.then((function(){c.K&&e.evaluate(c.K);c.ab.add((function(f){e.evaluate(f)}));c.$a.promise.then((function(){e.startTimeout(c.B.win)}))}))}}};l.P=function(){var a=this;this.Ba.then((function(b){b.whenConsentReady().then((function(){b.onConsentStateChange((function(c){var d=c.consentState,e=c.consentMetadata,f=c.purposeConsents,h=a.na,g=a.pa,k=a.G;a.pa=c.consentString;a.na=e;a.G=f;5!==d&&(4==d?1!=a.K&&2!=a.K&&(a.K=4):3==d?(null===a.K&&(a.K=5),a.pa=g,a.na=h,a.G=k):a.K=d,a.ab.fire(a.K),a.Aa&&a.Aa());a.Ia&&(a.Ia(),a.Ia=null)}))}))}))};l.enableTimeout=function(){this.$a.resolve()};l.setOnPolicyChange=function(a){this.Aa||(this.Aa=a)};l.whenPolicyResolved=function(a){var b=this;return db[a]?gb(this,a).then((function(){return b.R[a].getReadyPromise().then((function(){return b.R[a].getCurrentPolicyStatus()}))})):(D().error("consent-policy-manager","can not find policy %s, only predefined policies are supported",a),Promise.resolve(4))};l.whenPolicyUnblock=function(a){var b=this;return db[a]?gb(this,a).then((function(){return b.R[a].getReadyPromise().then((function(){return b.R[a].shouldUnblock()}))})):(D().error("consent-policy-manager","can not find policy %s, only predefined policies are supported",a),Promise.resolve(!1))};l.getMergedSharedData=function(a){var b=this;return this.whenPolicyResolved(a).then((function(){return b.Ba})).then((function(c){return c.getConsentInstanceSharedData()}))};l.getConsentStringInfo=function(a){var b=this;return this.whenPolicyResolved(a).then((function(){return b.pa}))};l.getConsentMetadataInfo=function(a){var b=this;return this.whenPolicyResolved(a).then((function(){return b.na}))};l.whenPurposesUnblock=function(a){var b=this;return this.Ba.then((function(c){return c.whenHasAllPurposeConsents()})).then((function(){return b.G?a.every((function(c){return u.call(b.G,c)&&1===b.G[c]})):!1}))};function gb(a,b){if(a.R[b])return q();a.V[b]||(a.V[b]=new r);return a.V[b].promise}function fb(a){this.Y=a;var b=new r;this.vb=b.promise;this.wa=b.resolve;this.Va=4;this.xb=a.unblockOn||[1,3]}l=fb.prototype;l.startTimeout=function(a){var e,b=this,c=this.Y.timeout,d=null;void 0!=c&&(v(c)?(c.fallbackAction&&"reject"==c.fallbackAction?e=2:c.fallbackAction&&"dismiss"!=c.fallbackAction&&D().error("consent-policy-manager","unsupported fallbackAction %s",c.fallbackAction),d=c.seconds):d=c,F(pa(d),"invalid timeout value %s",d));null!=d&&a.setTimeout((function(){e=e||5;b.evaluate(e,!0)}),1e3*d)};l.evaluate=function(a,b){b=void 0===b?!1:b;!a||b&&!this.wa||(this.Va=1===a?1:2===a?2:4===a?3:4,this.wa&&(this.wa(),this.wa=null))};l.getReadyPromise=function(){return this.vb};l.getCurrentPolicyStatus=function(){return this.Va};l.shouldUnblock=function(){return-1<this.xb.indexOf(this.Va)};function R(){this.ob=100;this.Ca=this.Ua=0;this.ma=w()}R.prototype.has=function(a){return!!this.ma[a]};R.prototype.get=function(a){var b=this.ma[a];if(b)return b.access=++this.Ca,b.payload};R.prototype.put=function(a,b){this.has(a)||this.Ua++;this.ma[a]={payload:b,access:this.Ca};if(!(this.Ua<=this.ob)){a=this.ma;var d,c=this.Ca+1;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.Ua--)}};var ib,jb,hb=x({c:!0,v:!0,a:!0,ad:!0}),kb=/[?&]amp_js[^&]*/,lb=/[?&]amp_gsa[^&]*/,mb=/[?&]amp_r[^&]*/,nb=/[?&]amp_kit[^&]*/,ob=/[?&]usqp[^&]*/;function S(a){ib||(ib=self.document.createElement("a"),jb=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new R));var b=jb,c=ib;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function pb(a,b){var c=void 0===c?"source":c;F(null!=a,"%s %s must be available",b,c);var d=a;"string"==typeof d&&(d=S(d));d="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname||la(d.hostname,".localhost");F(d||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a)}function T(a){"string"==typeof a&&(a=S(a));return ua.cdnProxyRegex.test(a.origin)}function qb(a){"string"==typeof a&&(a=S(a));if(!T(a))return a.href;var b=a.pathname.split("/");F(hb[b[1]],"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);F(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(kb,"").replace(lb,"").replace(mb,"").replace(nb,"").replace(ob,"").replace(/^[?&]/,""))?"?"+d:"":"";return b+d+(a.hash||"")}function rb(a,b){"string"==typeof b&&(b=S(b));if("function"==typeof URL)var c=new URL(a,b.href).toString();else{c=a;var d=b;"string"==typeof d&&(d=S(d));c=c.replace(/\\/g,"/");var e=S(c);c=c.toLowerCase().startsWith(e.protocol)?e.href:c.startsWith("//")?d.protocol+c:c.startsWith("/")?d.origin+c:d.origin+d.pathname.replace(/\/[^/]*$/,"/")+c}return c}function sb(a){this.B=a;this.oa=this.Ga=this.Fa=this.H=this.eb=null;this.G=void 0;var b=new r;this.sb=b.resolve;this.rb=b.promise}l=sb.prototype;l.registerConsentInstance=function(a,b){this.H?E().error("CONSENT-STATE-MANAGER","Cannot register consent instance %s, instance %s has already been registered.",a,this.eb):(this.eb=a,this.H=new U(this.B,a,b),this.oa&&(this.oa(),this.oa=null))};l.updateConsentInstanceState=function(a,b,c){this.H?(this.H.update(a,b,this.G,c,!1),this.Fa&&(this.Fa(H(a,b,c,this.G)),this.hasAllPurposeConsents())):E().error("CONSENT-STATE-MANAGER","instance not registered")};l.updateConsentInstancePurposes=function(a,b){var c=this,d=b=void 0===b?!1:b;this.G||(this.G={});Object.keys(a).forEach((function(e){d&&u.call(c.G,e)||(c.G[e]=a[e]?1:2)}))};l.getLastConsentInstanceInfo=function(){return this.H.get()};l.getConsentInstanceInfo=function(){return this.H.get().then((function(a){return G(a)?H(5):a}))};l.onConsentStateChange=function(a){this.Fa=a;this.getConsentInstanceInfo().then((function(b){a(b)}))};l.setConsentInstanceSharedData=function(a){this.H.sharedDataPromise=a};l.hasAllPurposeConsents=function(){this.sb()};l.whenHasAllPurposeConsents=function(){return this.rb};l.setDirtyBit=function(){this.H.setDirtyBit()};l.getConsentInstanceSharedData=function(){return this.H.sharedDataPromise};l.whenConsentReady=function(){if(this.H)return q();if(!this.Ga){var a=new r;this.Ga=a.promise;this.oa=a.resolve}return this.Ga};l.Db=function(){return this.H.ja};function U(a,b,c){this.B=a;this.tb=b;this.sharedDataPromise=null;a=M(a);var d=J(a.win,"ampdoc");d=d.isSingleDoc()?d.getSingleDoc():null;this.kb=O(d&&d.win==a.win?d:a,"storage");this.ja=this.C=null;this.za="amp-consent:"+b;(this.sa=c.onUpdateHref||null)&&pb(this.sa,"AMP-CONSENT");this.Ka=void 0}U.prototype.setDirtyBit=function(){var a=this;this.Ka=!0;return this.get().then((function(b){G(b)||a.update(b.consentState,b.consentString,b.purposeConsents,b.consentMetadata,!0)}))};U.prototype.update=function(a,b,c,d,e){var f=a;var h=this.C&&this.C.consentState;1!==f&&2!==f&&3!==f&&4!==f&&5!==f&&(f=5);f=3==f?h||5:4==f&&h&&5!=h?h:f;if(3===a){var g,k,m;this.C=H(f,null==(g=this.C)?void 0:g.consentString,null==(k=this.C)?void 0:k.consentMetadata,null==(m=this.C)?void 0:m.purposeConsents)}else{a=this.C;e&&G(a)?this.C=H(f,b,d,c,!0):this.C=H(f,b,d,c);var p=H(f,b,d,c,this.Ka);ya(p,this.ja)||tb(this,p)}};function tb(a,b){a.kb.then((function(c){if(ya(b,a.C,a.Ka))if(5===b.consentState)c.remove(a.za);else{a:{var d=w();var e=b.consentState;if(1==e)d.s=1;else if(2==e)d.s=0;else{d=null;break a}b.consentString&&(d.r=b.consentString);!0===b.isDirty&&(d.d=1);if(b.consentMetadata){e=b.consentMetadata;var f=w();e.consentStringType&&(f.cst=e.consentStringType);e.additionalConsent&&(f.ac=e.additionalConsent);void 0!=e.gdprApplies&&(f.ga=e.gdprApplies);void 0!=e.purposeOne&&(f.po=e.purposeOne);d.m=f}b.purposeConsents&&(d.pc=b.purposeConsents);d=0==Object.keys(d)?null:d}null!=d&&(a.ja=b,c.setNonBoolean(a.za,d),ub(a,b))}}))}U.prototype.get=function(){var a=this;if(this.C)return Promise.resolve(this.C);var b;return this.kb.then((function(c){b=c;return b.get(a.za)})).then((function(c){if(a.C)return a.C;if(void 0===c)var d=H(5);else if("boolean"===typeof c)d=Aa(c),d=H(d);else{if(!v(c))throw E().createError("Invalid stored consent value");d=Aa(c.s);var e=c.r;var f=(f=c.m)?za(f.cst,f.ac,f.ga,f.po):za();d=H(d,e,f,c.pc,c.d&&1===c.d)}a.ja=d;G(d)&&(ub(a,H(5)),b.remove(a.za),a.ja=null);a.C=d;return a.C})).catch((function(c){E().error("CONSENT-STATE-MANAGER","Failed to read storage",c);return H(5)}))};function ub(a,b){if(a.sa&&!G(b)){var c=xa(b.consentState);ab(a.B).then((function(d){var e={consentInstanceId:a.tb,ampUserId:d};null!=c&&(e.consentState=c);e.consentStateValue=I(b.consentState);b.consentString&&(e.consentString=b.consentString);b.consentMetadata&&(e.consentMetadata=b.consentMetadata);b.purposeConsents&&(e.purposeConsents=b.purposeConsents);var f={credentials:"include",method:"POST",body:e,ampCors:!1};a.B.whenFirstVisible().then((function(){$a(a.B.getHeadNode(),a.sa).then((function(h){J(a.B.win,"xhr").fetchJson(h,f)}))}))}))}}var V;function vb(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=w();var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}var e,f=null==(e=a.AMP_CONFIG)?void 0:e["allow-doc-opt-in"];if(t(f)&&f.length){var h=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(h){var g=h.getAttribute("content").split(",");e=n(g);for(c=e.next();!c.done;c=e.next()){var k=c.value;f.includes(k)&&(b[k]=!0)}}}c=Object;e=c.assign;var m="";try{"localStorage"in a&&(m=a.localStorage.getItem("amp-experiment-toggles"))}catch(Cc){E().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var p;m=(null==(p=m)?void 0:p.split(/\s*,\s*/g))||[];p=w();m=n(m);for(var z=m.next();!z.done;z=m.next())(z=z.value)&&("-"==z[0]?p[z.substr(1)]=!1:p[z]=!0);e.call(c,b,p);var P,wa=null==(P=a.AMP_CONFIG)?void 0:P["allow-url-opt-in"];if(t(wa)&&wa.length)for(a=A(a.location.originalHash||a.location.hash),P=n(wa),c=P.next();!c.done;c=P.next())c=c.value,e=a["e-"+c],"1"==e&&(b[c]=!0),"0"==e&&(b[c]=!1);return b}var wb,xb="Webkit webkit Moz moz ms O o".split(" ");function yb(a,b,c){if(b.startsWith("--"))return b;wb||(wb=w());var d=wb[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<xb.length;f++){var h=xb[f]+e;if(void 0!==a[h]){e=h;break a}}e=""}var g=e;void 0!==a[g]&&(d=g)}c||(wb[b]=d)}return d}function zb(a,b,c){(b=yb(a.style,b,void 0))&&(b.startsWith("--")?a.style.setProperty(b,c):a.style[b]=c)}function W(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}var Ab=['<svg viewBox="0 0 40 40"><defs><linearGradient id=grad><stop stop-color="rgb(105, 105, 105)"></stop><stop offset=100% stop-color="rgb(105, 105, 105)" stop-opacity=0></stop></linearGradient></defs><path d="M11,4.4 A18,18, 0,1,0, 38,20" stroke=url(#grad)></path></svg>'];function Bb(a,b,c){this.D=a;this.ra=this.Oa=this.Pa=this.ba=this.Na=!1;this.h=null;this.ta=b.uiConfig&&!0===b.uiConfig.overlay;this.pb=b.captions&&b.captions.consentPromptCaption||"User Consent Prompt";this.nb=b.captions&&b.captions.buttonActionCaption||"Focus Prompt";this.jb=!1;this.X=!0;this.aa=this.ya=this.da=null;this.B=a.getAmpDoc();this.ka=L(this.B,"viewport");this.mb=L(this.B,"viewer");this.j=a.element;this.F=a.win;this.T=this.F.document;this.La=null;this.Ta=!1;this.ha=this.Ya=null;this.U="30vh";this.Da=!0;this.Ma=this.J=!1;this.la=this.Ja.bind(this);this.Sa=null;this.O=!!vb(this.F)["amp-consent-granular-consent"];this.P(b,c)}l=Bb.prototype;l.P=function(a,b){if(b){var c=this.B.getElementById(b);c||D().error("amp-consent-ui","postPromptUI element with id=%s not found",b);this.h=c;this.ba=!0}else{var d=a.promptUI,e=a.promptUISrc;if(d){var f=this.B.getElementById(d);f&&this.j.contains(f)||D().error("amp-consent-ui","child element of <amp-consent> with promptUI id %s not found",d);this.h=f}else if(e){this.Na=!0;pb(e,this.j);this.Sa=$a(this.j,e);b=this.j.ownerDocument.createElement("iframe");var h=["allow-scripts","allow-popups"],g=Da(this.j,"url"),k=g.parse(e);g=g.parse(this.B.getUrl());k.origin!=g.origin&&h.push("allow-same-origin");b.setAttribute("sandbox",h.join(" "));b.classList.add("i-amphtml-consent-ui-fill");this.h=b;b=this.j.ownerDocument.createElement("placeholder");W(b,!1);b.classList.add("i-amphtml-consent-ui-placeholder");h=b.ownerDocument||b;V&&V.ownerDocument===h||(V=h.createElement("div"));h=V;h.innerHTML=Ab[0];k=h.firstElementChild;h.removeChild(k);b.appendChild(k);this.ha=b;this.Ya=a.clientConfig||null}}};l.show=function(a){var b=this;if(this.h)if(this.ba&&!this.j.contains(this.h))W(this.h,!0);else{W(this.j,!0);var c=this.j.classList;c.add("amp-active");c.remove("amp-hidden");this.D.getViewport().addToFixedLayer(this.j);if(this.Na&&this.Sa)this.Ma=a,Cb(this).then((function(){b.D.mutateElement((function(){b.ba||(b.aa=b.T.activeElement);Db(b);Eb(b);Fb(b)}))}));else{var d=function(){b.h&&(W(b.h,!0),b.ba||(b.aa=b.T.activeElement,Db(b),b.resume(),b.h.focus()))};Pa(this.h)?Qa(this.h).then((function(){return b.h.build()})).then((function(){return d()})):d()}this.Pa=!0}};l.hide=function(){var a=this;this.h&&(this.pause(),this.D.mutateElement((function(){a.Na&&Gb(a);if(!a.ba){var b=a.j.classList;b.remove("amp-active");b.add("amp-hidden")}a.ta&&(a.da&&W(a.da,!1),Hb(a));a.ya&&(b=a.ya,b.parentElement&&b.parentElement.removeChild(b),delete a.ya);Hb(a);Ib(a);a.D.getViewport().removeFromFixedLayer(a.j);W(a.h,!1);a.Pa=!1;a.aa?(a.aa.focus(),a.aa=null):0<a.F.document.body.children.length&&a.F.document.body.children[0].focus()})))};l.pause=function(){this.h&&L(this.D.element,"owners").schedulePause(this.D.element,this.h)};l.resume=function(){this.h&&(L(this.D.element,"owners").scheduleLayout(this.D.element,this.h),L(this.D.element,"owners").scheduleResume(this.D.element,this.h))};function Jb(a,b){a.U="30vh";a.Da=!0;a.J=!1;if(b.initialHeight)if("string"===typeof b.initialHeight&&0<=b.initialHeight.indexOf("vh")){var c=parseInt(b.initialHeight,10);a.U=80<=c?"80vh":a.U;10<=c&&80>=c?(a.U=c+"vh",a.J=60<c,a.ta=a.J||a.ta):D().error("amp-consent-ui","Inavlid initial height: "+b.initialHeight+".Minimum: 10vh. Maximum: 80vh.")}else D().error("amp-consent-ui","Inavlid initial height: "+b.initialHeight+'.Must be a string in "vh" units.');!1!==b.border||a.J||(a.Da=!1);a.La.resolve()}function Kb(a){return O(a.B,"consentStateManager").then((function(b){return b.getLastConsentInstanceInfo().then((function(c){var d=x({clientConfig:a.Ya,consentState:I(c.consentState),consentStateValue:I(c.consentState),consentMetadata:c.consentMetadata,consentString:c.consentString,promptTrigger:a.Ma?"action":"load",isDirty:!!c.isDirty});a.O&&(d.purposeConsents=c.purposeConsents);return d}))}))}function Cb(a){a.La=new r;var b=a.j.classList;Ma(a.j)||Na(a.j,a.ha);b.add("i-amphtml-consent-ui-loading");W(a.h,!1);var c=a.Sa.then((function(d){a.Ta=!1;a.h.src=d;return Kb(a).then((function(e){a.h.setAttribute("name",JSON.stringify(e));a.F.addEventListener("message",a.la);Na(a.j,a.h)}))}));return Promise.all([c,a.La.promise,a.D.mutateElement((function(){W(a.ha,!0)}))])}function Fb(a){var b=a.j.classList;b.add("i-amphtml-consent-ui-iframe-active");W(a.ha,!1);W(a.h,!0);a.J&&(b.add("i-amphtml-consent-ui-modal"),Oa(a.h));Ib(a);a.D.mutateElement((function(){b.remove("i-amphtml-consent-ui-loading");a.D.mutateElement((function(){b.add("i-amphtml-consent-ui-in");a.Oa=!0;var c=a.j.classList;if(a.h){var f,d=a.h,e={height:a.U};for(f in e)zb(d,f,e[f])}d={"--i-amphtml-modal-height":""+a.U};e=a.j.style;for(var h in d)e.setProperty(yb(e,h),String(d[h]),"important");c.add("i-amphtml-consent-ui-iframe-transform");(a.Da||a.J)&&c.add("i-amphtml-consent-ui-border-enabled");a.J&&a.ka.enterLightboxMode()}))}))}function Gb(a){var b=a.j.classList;b.remove("i-amphtml-consent-ui-iframe-active");b.remove("i-amphtml-consent-ui-modal");b.remove("i-amphtml-consent-ui-border-enabled");a.F.removeEventListener("message",a.la);b.remove("i-amphtml-consent-ui-iframe-fullscreen");a.ra?a.mb.sendMessage("cancelFullOverlay",{},!0):a.J&&a.ka.leaveLightboxMode();a.ra=!1;b.remove("i-amphtml-consent-ui-in");a.Oa=!1;a.h.removeAttribute("name");W(a.ha,!1);a.Ta=!0;a.F.setTimeout((function(){if(a.Ta){var c=a.h;c.parentElement&&c.parentElement.removeChild(c)}}),1e3)}function Eb(a){if(!a.jb&&!a.J){var b=a.T.createElement("div"),c=a.T.createElement("button"),d=a.T.createElement("div");b.setAttribute("role","alertdialog");d.textContent=a.pb;c.textContent=a.nb;c.onclick=function(){Oa(a.h)};b.appendChild(d);b.appendChild(c);b.classList.add("i-amphtml-consent-alertdialog");a.D.element.appendChild(b);Oa(c);a.jb=!0;a.ya=b}}function Ib(a){a=a.j;var c,b={transform:"",transition:""};for(c in b)zb(a,c,b[c])}function Db(a){if(a.ta){if(!a.da){var b=a.F.document.createElement("div");b.classList.add("i-amphtml-consent-ui-mask");a.j.ownerDocument.body.appendChild(b);a.da=b}W(a.da,!0);a.X&&(a.ka.enterOverlayMode(),a.X=!1)}}function Hb(a){a.X||(a.ka.leaveOverlayMode(),a.X=!0)}l.Ja=function(a){var b=this;if(this.h.contentWindow===a.source&&(a=a.data)&&"consent-ui"==a.type){var c=a.action,d=a.type;"ready"===c&&Jb(this,a);"enter-fullscreen"===c&&(!this.Oa||this.J||this.T.activeElement!==this.h&&!this.Ma?(D().warn("amp-consent-ui","Could not enter fullscreen. Fullscreen is only supported when the iframe is visible as a bottom sheet and after user interaction."),Lb(this,d,c,!0)):(Lb(this,d,c),this.D.mutateElement((function(){b.h&&b.Pa&&!b.ra&&(Ib(b),b.mb.sendMessage("requestFullOverlay",{},!0),b.j.classList.add("i-amphtml-consent-ui-iframe-fullscreen"),b.X&&(b.ka.enterOverlayMode(),b.X=!1),b.ra=!0)}))))}};function Lb(a,b,c,d){var e=d=void 0===d?!1:d;(a=a.h.contentWindow)&&a.postMessage({type:"amp-consent-response",requestType:b,requestAction:c,state:e?"error":"success",info:e?"Could not enter fullscreen. Fullscreen is only supported when the iframe is visible as a bottom sheet and after user interaction.":"Entering fullscreen."},"*")}function Mb(a,b){try{var c=a.document.cookie}catch(g){c=""}var d=c;if(!d)return null;var e=d.split(";");for(a=0;a<e.length;a++){var f=e[a].trim(),h=f.indexOf("=");if(-1!=h&&y(f.substring(0,h).trim())==b)return b=f.substring(h+1).trim(),y(b,b)}return null}function Nb(a,b,c,d,e,f,h){"ampproject.org"==e&&(c="delete",d=0);b=encodeURIComponent(b)+"="+encodeURIComponent(c)+"; path=/"+(e?"; domain="+e:"")+"; expires="+new Date(d).toUTCString()+(f?"; SameSite="+f:"")+(h?"; Secure":"");try{a.document.cookie=b}catch(g){}}function Ob(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b}var Pb={"-":"+",_:"/",".":"="};function Qb(a){var b=atob(a.replace(/[-_.]/g,(function(c){return Pb[c]})));return Ob(b)}var Rb=null;var Sb=/^[a-zA-Z0-9\-_.]+$/;function Tb(a){this.F=a;this.ca={}}Tb.prototype.get=function(a,b){if(!a||!b)return D().error("amp-consent/linker-reader","LINKER_PARAM requires two params, name and id"),null;if(!u.call(this.ca,a)){var c=this.ca,d=A(this.F.location.search);if(u.call(d,a)){var e=d[a];d=e.split("*");var f=0==d.length%2;4>d.length||!f?(D().error("amp-analytics/linker","Invalid linker_param value "+e),d=null):(e=Number(d.shift()),1!==e?(D().error("amp-analytics/linker","Invalid version number "+e),d=null):(e=d.shift(),d=d.join("*"),d={checksum:e,serializedIds:d}));if(e=d){d=e.serializedIds;b:{e=e.checksum;for(f=0;1>=f;f++){var h=d,g=f;var k=(new Date).getTimezoneOffset();var m=window;var p=m.navigator.userLanguage||m.navigator.language;m=window.navigator.userAgent;k=[m,k,p].join("*");g=g||0;g=Math.floor(Date.now()/6e4)-g;h=[k,g,h].join("*");if(!Rb){g=Array(256);for(k=0;256>k;k++){m=k;for(p=0;8>p;p++)m=1&m?m>>>1^3988292384:m>>>1;g[k]=m}Rb=g}h="undefined"!==typeof TextEncoder?new TextEncoder("utf-8").encode(h):Ob(unescape(encodeURIComponent(h)));g=4294967295;for(k=0;k<h.length;k++)g=g>>>8^Rb[255&(g^h[k])];if(((-1^g)>>>0).toString(36)==e){e=!0;break b}}e=!1}if(e){e={};d=d.split("*");for(f=0;f<d.length;f+=2)if(h=d[f],Sb.test(h)){g=Qb(String(d[f+1]));if("undefined"!==typeof TextDecoder)g=new TextDecoder("utf-8").decode(g);else{g=new Uint8Array(g.buffer||g);k=Array(g.length);for(m=0;m<g.length;m++)k[m]=String.fromCharCode(g[m]);g=k.join("");g=decodeURIComponent(escape(g))}e[h]=g}else D().error("amp-analytics/linker","Invalid linker key "+h+", value ignored");d=e}else D().error("amp-analytics/linker","LINKER_PARAM value checksum not valid"),d=null}else d=null}else d=null;c[a]=d}return this.ca[a]&&this.ca[a][b]?this.ca[a][b]:null};var Ub={referrerDomains:!0,enabled:!0,cookiePath:!0,cookieMaxAge:!0,cookieSecure:!0,cookieDomain:!0},Vb={LINKER_PARAM:!0};function Wb(a,b,c){this.F=a;this.N=b;this.Xa=null;this.Y=c;this.ub=new Tb(a)}Wb.prototype.write=function(){this.Xa||(this.Xa=this.P());return this.Xa};Wb.prototype.P=function(){var a=this.N;if(!(a=a.classList.contains("i-amphtml-fie")||!!La(a)||T(this.F.location))){a=this.F||self;if(a.__AMP_MODE)a=a.__AMP_MODE;else{var b=A(a.location.originalHash||a.location.hash);ra||(ra=a.AMP_CONFIG&&a.AMP_CONFIG.v?a.AMP_CONFIG.v:"012106040012000");var c=A(a.location.originalHash||a.location.hash);b={localDev:!1,development:!(!["1","actions","amp","amp4ads","amp4email"].includes(c.development)&&!a.AMP_DEV_MODE),examiner:"2"==b.development,esm:!1,geoOverride:b["amp-geo"],minified:!0,test:!1,log:b.log,version:"2106040012000",rtvVersion:ra};a=a.__AMP_MODE=b}a="inabox"==a.runtime}if(a||!u.call(this.Y,"cookies"))return q();if(!v(this.Y.cookies))return D().error("amp-consent/cookie-writer","cookies config must be an object"),q();var d=this.Y.cookies;if(!1===d.enabled)return q();u.call(d,"cookieMaxAge")?(a=Number(d.cookieMaxAge))||0===a?(0>=a&&D().warn("amp-consent/cookie-writer","cookieMaxAge %s less than or equal to 0, cookie will immediately expire",d.cookieMaxAge),a*=1e3):(D().error("amp-consent/cookie-writer","invalid cookieMaxAge %s, falling back to default value (1 year)",d.cookieMaxAge),a=31536e6):a=31536e6;var e=a;a=Object.keys(d);var f=[];for(b=0;b<a.length;b++){c=a[b];var h=d[c];var g=h;Ub[c]?g=!1:v(g)?u.call(g,"value")?g=!0:(D().error("amp-consent/cookie-writer","value is required in the cookieValue object"),g=!1):(D().error("amp-consent/cookie-writer","cookieValue must be configured in an object"),g=!1);g&&f.push(Xb(this,c,h.value,e))}return Promise.all(f)};function Xb(a,b,c,d){return Da(a.N,"url-replace").expandStringAsync(c,{LINKER_PARAM:function(e,f){return a.ub.get(e,f)}},Vb).then((function(e){if(e){var f=Date.now()+d,h=a.F,g={highestAvailableDomain:!0};g=void 0===g?{}:g;if(g.allowOnProxyOrigin)F(!g.highestAvailableDomain,"Could not support highestAvailable Domain on proxy origin, specify domain explicitly");else{F(!T(h.location.href),"Should never attempt to set cookie on proxy origin: "+b);var k=S(h.location.href).hostname.toLowerCase(),m=S(ua.cdn).hostname.toLowerCase();F(!(k==m||la(k,"."+m)),"Should never attempt to set cookie on proxy origin. (in depth check): "+b)}k=void 0;if(g.domain)k=g.domain;else if(g.highestAvailableDomain)a:if(k=h.document.head&&h.document.head.querySelector("meta[name='amp-cookie-scope']"))k=k.getAttribute("content")||"",m=S(qb(h.location.href)).origin,k=la(m,"."+k)?k:m.split("://")[1];else{if(!T(h.location.href)){k=h.location.hostname.split(".");m=k[k.length-1];var p;for(p="-test-amp-cookie-tmp";Mb(h,p);)p="-test-amp-cookie-tmp0";for(var z=k.length-2;0<=z;z--)if(m=k[z]+"."+m,Nb(h,p,"delete",Date.now()+1e3,m),"delete"==Mb(h,p)){Nb(h,p,"delete",Date.now()-1e3,m);k=m;break a}}k=null}Nb(h,b,e,f,k,g.sameSite,g.secure)}})).catch((function(e){D().error("amp-consent/cookie-writer","Error expanding cookie string",e)}))}function Yb(){this.W=0;this.ib=q();this.gb=function(){};this.hb=function(){}}Yb.prototype.onQueueEmpty=function(a){this.gb=a;0==this.W&&a()};Yb.prototype.onQueueNotEmpty=function(a){this.hb=a;0<this.W&&a()};Yb.prototype.registerUI=function(a){var b=this;0==this.W&&this.hb();this.W++;var c=this.ib.then((function(){return a().then((function(){b.W--;0==b.W&&b.gb()}))}));return this.ib=c};function Zb(a){var b=this;this.ua=a;this.L=w();this.cb=null;this.Qa=0;a.setOnPolicyChange((function(){$b(b)}))}Zb.prototype.handleTcfCommand=function(a,b){if(ac(a.__tcfapiCall)){var c=a.__tcfapiCall;switch(c.command){case"ping":bc(this,c,b);break;case"getTCData":cc(this,c,b);break;case"addEventListener":this.L[this.Qa]||(this.L[this.Qa]={payload:c,win:b},this.Qa++);break;case"removeEventListener":a=c.callId;c=c.parameter;var d=!!this.L[c];d&&delete this.L[c];dc(b,void 0,a,d)}}};function $b(a){Object.keys(a.L).length&&ec(a).then((function(b){var c=b[2];if(c&&c!==a.cb){a.cb=c;for(var d=Object.keys(a.L),e=0;e<d.length;e++){var f=Number(d[e]);if(u.call(a.L,f)){var h=a.L[f],g=h.win;h=h.payload.callId;var k=fc(b[0],b[1],c,f);dc(g,k,h,!0)}}}}))}function ec(a){var b=a.ua.getConsentStringInfo("default"),c=a.ua.getConsentMetadataInfo("default");a=a.ua.getMergedSharedData("default");return Promise.all([c,a,b])}function cc(a,b,c){ec(a).then((function(d){d=fc(d[0],d[1],d[2]);dc(c,d,b.callId,!0)}))}function fc(a,b,c,d){var e=a?a.purposeOne:void 0,f=a?a.gdprApplies:void 0,h=Object.assign({},b,{additionalConsent:a?a.additionalConsent:void 0});return{tcfPolicyVersion:2,gdprApplies:f,tcString:c,listenerId:d,cmpStatus:"loaded",eventStatus:"tcloaded",purposeOneTreatment:e,additionalData:h}}function bc(a,b,c){a.ua.getConsentMetadataInfo("default").then((function(d){d=gc(d);dc(c,d,b.callId)}))}function gc(a){return{gdprApplies:a?a.gdprApplies:void 0,cmpLoaded:!0,cmpStatus:"loaded",tcfPolicyVersion:2}}function dc(a,b,c,d){a&&a.postMessage({__tcfapiReturn:{returnValue:b,callId:c,success:d}},"*")}function ac(a){if(!v(a))return D().error("amp-consent",'"tcfapiCall" is not an object: '+a),!1;var b=a.command,c=a.parameter;a=a.version;return"getTCData"!==b&&"ping"!==b&&"addEventListener"!==b&&"removeEventListener"!==b?(D().error("amp-consent",'Unsupported command found in "tcfapiCall": '+b),!1):c&&"removeEventListener"!=b?(D().error("amp-consent",'Unsupported parameter found in "tcfapiCall": '+c),!1):2!==a?(D().error("amp-consent",'Found incorrect version in "tcfapiCall": '+a),!1):!0}Zb.prototype.Bb=function(a){return gc(a)};Zb.prototype.Cb=function(a,b,c,d){return fc(a,b,c,d)};function X(a){a=AMP.BaseElement.call(this,a)||this;a.o=null;a.$=null;a.lb=null;a.fa=null;a.M=null;a.A=null;a.Ra=null;a.va=null;a.qa=null;a.S=!1;a.bb=!1;a.Ha=!1;a.Wa=a.getVsync();a.xa=null;a.Z=null;a.ea=null;a.fb=!!vb(a.win)["tcf-post-message-proxy-api"];a.O=!!vb(a.win)["amp-consent-granular-consent"];a.ia=a.O?null:q();a.la=a.fb?a.Ja.bind(a):null;return a}var Y=AMP.BaseElement;X.prototype=ba(Y.prototype);X.prototype.constructor=X;if(ia)ia(X,Y);else for(var Z in Y)if("prototype"!=Z)if(Object.defineProperties){var hc=Object.getOwnPropertyDescriptor(Y,Z);hc&&Object.defineProperty(X,Z,hc)}else X[Z]=Y[Z];X.Eb=Y.prototype;l=X.prototype;l.getConsentPolicy=function(){return null};l.buildCallback=function(){var a=this;F(this.element.getAttribute("id"),"amp-consent should have an id");var b=new Ua(this.element);return b.getConsentConfigPromise().then((function(c){a.ea=b.getMatchedGeoGroup();ic(a,c)}))};l.pauseCallback=function(){this.M&&this.M.pause()};l.resumeCallback=function(){this.M&&this.M.resume()};function ic(a,b){a.A=b;a.Z=a.A.consentInstanceId;a.A.postPromptUI&&(a.va=new Bb(a,x({}),a.A.postPromptUI));b=a.A.policy||x({});a.Ra=bb(b,a.Z);b=a.getRealChildren();for(var c=0;c<b.length;c++){var d=b[c];W(d,!1);L(a.element,"owners").setOwner(d,a.element)}var e=O(a.getAmpDoc(),"consentPolicyManager").then((function(k){a.$=k;a.$.setLegacyConsentInstanceId(a.Z);var m=Object.keys(a.Ra);for(k=0;k<m.length;k++)a.$.registerConsentPolicyInstance(m[k],a.Ra[m[k]])})),f=O(a.getAmpDoc(),"consentStateManager").then((function(k){k.registerConsentInstance(a.Z,a.A);a.o=k})),h=O(a.getAmpDoc(),"notificationUIManager").then((function(k){a.fa=k})),g=a.A.cookies?new Wb(a.win,a.element,a.A).write():q();Promise.all([f,h,e,g]).then((function(){a.P()}))}function jc(a){a.registerAction("accept",(function(b){kc(a,"accept",b)}));a.registerAction("reject",(function(b){kc(a,"reject",b)}));a.registerAction("dismiss",(function(){kc(a,"dismiss")}));a.O&&a.registerAction("setPurpose",(function(b){b&&b.args&&Object.keys(b.args).length?(b=b.args,lc(a)&&(mc(b),a.o.updateConsentInstancePurposes(b))):E().error("amp-consent","Must have arugments for `setPurpose`.")}));a.registerAction("prompt",(function(b){(b=b.args)&&!0===b.expireCache&&a.o.setDirtyBit();nc(a,!0)}));oc(a)}function kc(a,b,c){lc(a)&&pc(a,b,c).then((function(){qc(a,b)}))}function oc(a){a.win.addEventListener("message",(function(b){if(a.S){var c=b.data;if(c&&"consent-response"==c.type)if(c.action){if(void 0!==c.info){"string"!=typeof c.info&&(D().error("amp-consent","consent-response info only supports string, %s, treated as undefined",c.info),c.info=void 0);"dismiss"===c.action&&(c.info&&a.user().error("amp-consent","Consent string value %s not applicable on user dismiss, stored value will be kept and used",c.info),c.info=void 0);var d=c.info;var e=rc(c.consentMetadata)}for(var f=a.element.querySelectorAll("iframe"),h=0;h<f.length;h++)if(f[h].contentWindow===b.source){var g=c,k=g.action;g=g.purposeConsents;"accept"!==k&&"reject"!==k&&"dismiss"!==k||!lc(a)||(g&&Object.keys(g).length&&"dismiss"!==k&&(mc(g),a.o.updateConsentInstancePurposes(g)),qc(a,k,d,e))}}else D().error("amp-consent","consent-response message missing required info")}}))}function nc(a,b){a.fa||E().error("amp-consent","notification ui manager not found");!a.Ha&&a.M&&(a.Ha=!0,a.fa.registerUI(a.wb.bind(a,b)))}l.wb=function(a){var b=this;this.S&&E().error("amp-consent","Attempt to show an already displayed prompt UI");this.Wa.mutate((function(){b.M.show(a);b.S=!0}));var c=new r;this.qa=c.resolve;return c.promise};function lc(a){return a.o?a.S:(E().error("amp-consent","No consent state manager"),!1)}function qc(a,b,c,d){a.bb=!0;"accept"==b?a.o.updateConsentInstanceState(1,c,d):"reject"==b?a.o.updateConsentInstanceState(2,c,d):"dismiss"==b&&a.o.updateConsentInstanceState(3);a.S||E().error("amp-consent","%s no consent ui to hide");a.M.hide();a.S=!1;a.qa&&(a.qa(),a.qa=null);a.Ha=!1}function pc(a,b,c){var d;return a.O&&"boolean"===typeof(null==c?void 0:null==(d=c.args)?void 0:d.purposeConsentDefault)?"dismiss"===b?(E.warn("amp-consent","Dismiss cannot have a `purposeConsentDefault` parameter."),q()):sc(a).then((function(e){if(e&&e.length){var f={},h=c.args.purposeConsentDefault;e.forEach((function(g){f[g]=h}));a.o.updateConsentInstancePurposes(f,!0)}})):q()}l.P=function(){var a=this;tc(this);uc(this);vc(this);wc(this).then((function(b){return xc(a,b)})).then((function(b){b&&yc(a);a.$.enableTimeout()})).catch((function(){}));jc(this)};function wc(a){return a.o.getConsentInstanceInfo().then((function(b){if(Ba(b))return Promise.resolve(!0);var c=a.A.consentRequired;return"boolean"===typeof c?Promise.resolve(c):zc(a).then((function(d){return d?void 0!==d.consentRequired?!!d.consentRequired:!!d.promptIfUnknown:!1}))}))}function tc(a){var b=zc(a).then((function(c){return c&&void 0!==c.sharedData?c.sharedData:null}));a.o.setConsentInstanceSharedData(b)}function uc(a){zc(a).then((function(b){if(b&&((b.expireCache||b.forcePromptOnNext)&&a.o.setDirtyBit(),b.consentRequired&&!a.bb)){var c=b.consentString||void 0,d=b.consentMetadata,e=b.purposeConsents;b=b.consentStateValue;b="accepted"===b?1:"rejected"===b?2:"unknown"===b?5:null;null!==b&&(a.O&&e&&v(e)&&Object.keys(e).length&&(mc(e),a.o.updateConsentInstancePurposes(e)),a.o.updateConsentInstanceState(b,c,rc(d)))}}))}function zc(a){if(a.xa)return a.xa;a.xa=a.A.checkConsentHref?a.o.getLastConsentInstanceInfo().then((function(b){var c={consentInstanceId:a.Z,consentStateValue:I(b.consentState),consentMetadata:b.consentMetadata,consentString:b.consentString,isDirty:!!b.isDirty,matchedGeoGroup:a.ea};a.O&&(c.purposeConsents=b.purposeConsents);a.A.clientConfig&&(c.clientConfig=a.A.clientConfig);var d={credentials:"include",method:"POST",body:c},e=a.A.checkConsentHref;pb(e,a.element);b=a.getAmpDoc();var f=qb(b.getUrl()),h=rb(e,f),g=J(a.win,"xhr");return b.whenFirstVisible().then((function(){return $a(a.element,h).then((function(k){return g.fetchJson(k,d).then((function(m){return g.xssiJson(m,a.A.xssiPrefix).catch((function(p){D().error("amp-consent","Could not parse the `checkConsentHref` response.",p)}))}))}))}))})):Promise.resolve(null);return a.xa}function Ac(a,b){return a.O?sc(a).then((function(c){if(null==c||!c.length)return a.o.hasAllPurposeConsents(),!0;var d=b.purposeConsents;if(!d||Object.keys(d).length<c.length)return!1;for(var e=0;e<c.length;e++)if(!u.call(d,c[e]))return!1;a.o.hasAllPurposeConsents();return!0})):Promise.resolve(!0)}function sc(a){if(a.ia)return a.ia;var b=a.A.purposeConsentRequired;t(b)?a.ia=Promise.resolve(b):a.ia=zc(a).then((function(c){return c&&t(c.purposeConsentRequired)?c.purposeConsentRequired:null}));return a.ia}function Bc(a){return a.o.getConsentInstanceInfo().then((function(b){return Ba(b)?Ac(a,b):Promise.resolve(!1)}))}function xc(a,b){a.M=new Bb(a,a.A);return Bc(a).then((function(c){if(c)return!0;if(!b)return a.o.updateConsentInstanceState(4),!1;nc(a,!1);return!0}))}function yc(a){a.va&&(a.fa.onQueueEmpty((function(){a.Wa.mutate((function(){a.va.show(!1)}))})),a.fa.onQueueNotEmpty((function(){a.Wa.mutate((function(){a.va.hide()}))})))}l.zb=function(){return this.o};l.yb=function(){return wc(this)};l.Ab=function(){return this.S};function mc(a){Object.keys(a).forEach((function(b){a[b]}))}function rc(a){if(a){if(v(a)){var b=a.consentStringType,c=a.additionalConsent,d=a.gdprApplies,e=a.purposeOne,f=[];b&&1!==b&&2!==b&&3!==b&&(delete a.consentStringType,f.push("consentStringType"));c&&"string"!=typeof c&&(delete a.additionalConsent,f.push("additionalConsent"));d&&"boolean"!=typeof d&&(delete a.gdprApplies,f.push("gdprApplies"));e&&"boolean"!=typeof e&&(delete a.purposeOne,f.push("purposeOne"));for(b=0;b<f.length;b++)D().error("amp-consent",'Consent metadata value "%s" is invalid.',f[b]);return za(a.consentStringType,a.additionalConsent,a.gdprApplies,a.purposeOne)}D().error("amp-consent","CMP metadata is not an object.")}}function vc(a){if(a.fb&&a.A.exposesTcfApi&&!a.win.frames.__tcfapiLocator){a.lb=new Zb(a.$);a.win.addEventListener("message",a.la);var b=a.element.ownerDocument.createElement("iframe");b.setAttribute("name","__tcfapiLocator");W(b,!1);b.setAttribute("aria-hidden",!0);a.element.appendChild(b)}}l.Ja=function(a){var b=a.data;b&&b.__tcfapiCall&&this.lb.handleTcfCommand(b,a.source)};(function(a){a.registerElement("amp-consent",X,"amp-consent{position:fixed!important;bottom:0;left:0;overflow:hidden!important;background:hsla(0,0%,100%,0.7);width:100%;z-index:2147483645}amp-consent[i-amphtml-notbuilt]>*{display:none!important}amp-consent>*{max-height:100vh!important}amp-consent.amp-active{visibility:visible}amp-consent.amp-hidden{visibility:hidden}@keyframes amp-consent-ui-placeholder-spin{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}.i-amphtml-consent-ui-placeholder{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.i-amphtml-consent-ui-placeholder>svg{width:30px;height:30px;fill:none;stroke-width:1.5px;transform-origin:50% 50%;animation:amp-consent-ui-placeholder-spin 1000ms linear infinite}.i-amphtml-consent-alertdialog{overflow:hidden;position:absolute;height:1px;width:1px;top:auto;left:auto}.i-amphtml-consent-ui-fill{position:absolute;top:0;left:0;width:100%}iframe.i-amphtml-consent-ui-fill{border:none}amp-consent.i-amphtml-consent-ui-iframe-active{width:100%!important;height:100%!important;padding:0px!important;margin:0px!important;overflow:auto!important;transform:translate3d(0px,100vh,0px)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-modal{box-sizing:border-box;top:0;right:0;animation:i-amphtml-modal-appear 0.5s;animation-fill-mode:forwards;height:var(--i-amphtml-modal-height)!important;width:90vw!important;margin:auto!important;max-width:760px}amp-consent.i-amphtml-consent-ui-border-enabled{border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 0 5px 0 rgba(0,0,0,0.2)!important}amp-consent.i-amphtml-consent-ui-modal.i-amphtml-consent-ui-border-enabled{border-radius:8px!important;box-shadow:0 0 5px 0 rgba(0,0,0,0.2)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-iframe-transform{transform:translate3d(0px,calc(100% - var(--i-amphtml-modal-height)),0px)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-in{transition:transform 0.5s ease-out!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-in.i-amphtml-consent-ui-iframe-fullscreen{top:0px!important;transform:translateZ(0px)!important;border-top-left-radius:0px!important;border-top-right-radius:0px!important}amp-consent.i-amphtml-consent-ui-in.i-amphtml-consent-ui-iframe-fullscreen>.i-amphtml-consent-ui-fill{height:100%!important}@keyframes i-amphtml-consent-ui-mask{0%{opacity:0.0}to{opacity:0.2}}@keyframes i-amphtml-modal-appear{0%{transform:translateY(100vh);opacity:0}to{transform:translate(0);opacity:1}}.i-amphtml-consent-ui-mask{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;opacity:0.2;animation:i-amphtml-consent-ui-mask 0.25s ease-in;background-image:none!important;background-color:#000;z-index:2147483644}\n/*# sourceURL=/extensions/amp-consent/0.1/amp-consent.css*/");a.registerServiceForDoc("notificationUIManager",Yb);a.registerServiceForDoc("consentStateManager",sb);a.registerServiceForDoc("consentPolicyManager",eb)})(self.AMP)}});//# sourceMappingURL=amp-consent-0.1.js.map