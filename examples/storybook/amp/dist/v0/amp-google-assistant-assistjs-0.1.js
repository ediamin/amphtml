(self.AMP=self.AMP||[]).push({n:"amp-google-assistant-assistjs",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ba(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}ba(this);"function"===typeof Symbol&&Symbol("x");var ca;if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={a:!0},fa={};try{fa.__proto__=ea;da=fa.a;break a}catch(a){}da=!1}ca=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ca;function k(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.ha=b.prototype}function ia(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}var m=Object.prototype.hasOwnProperty;var n=self.AMP_CONFIG||{},ja=("string"==typeof n.cdnProxyRegex?new RegExp(n.cdnProxyRegex):n.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ka(a){if(self.document&&self.document.head&&(!self.location||!ja.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}n.cdnUrl||ka("runtime-host");n.geoApiUrl||ka("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};function la(a,b){var c=ma(a);c=ma(c);c=c.isSingleDoc()?c.win:c;return na(c,b)}function ma(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=na(b,"ampdoc").getAmpDoc(a)}return a}function na(a,b){var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function p(a,b){for(var c in b)a.setAttribute(c,b[c])}function oa(a){return la(a,"assistjs-frame-service")}function q(a){return la(a,"assistjs-config-service")}function pa(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a}function r(a){a=AMP.BaseElement.call(this,a)||this;a.Y=null;a.Z=null;return a}k(r,AMP.BaseElement);r.prototype.buildCallback=function(){this.Y=q(this.element);this.Z=oa(this.element)};r.prototype.isLayoutSupported=function(a){return pa(a)};r.prototype.layoutCallback=function(){var a=this,b=this.win.document.createElement("iframe");this.Y.getWidgetIframeUrl("inlinesuggestionbar").then((function(c){p(b,{src:c,sandbox:"allow-scripts"});a.applyFillContent(b,!0);a.element.appendChild(b)}));b.addEventListener("load",(function(){a.Z.sendTextQuery()}));return this.loadPromise(b)};var t,u=this||self;function v(){}function w(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function qa(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(x);try{delete a[x]}catch(b){}}var x="closure_uid_"+(1e9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function y(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y=sa:y=ta;return y.apply(null,arguments)}function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function A(a,b){function c(){}c.prototype=b.prototype;a.A=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.X=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}}function B(a){if(Error.captureStackTrace)Error.captureStackTrace(this,B);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}A(B,Error);B.prototype.name="CustomError";var va=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=Array(c),e="string"===typeof a?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},xa=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1},ya=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function za(a,b){return a<b?-1:a>b?1:0}var C;a:{var Aa=u.navigator;if(Aa){var Ba=Aa.userAgent;if(Ba){C=Ba;break a}}C=""}function D(a){return-1!=C.indexOf(a)}function Ca(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Da(a,b,c){var e,d={};for(e in a)d[e]=b.call(c,a[e],e,a);return d}var Ea="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ea.length;f++)c=Ea[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function Ga(a){Ga[" "](a);return a}Ga[" "]=v;var Ma,Ha=D("Opera"),Ia=D("Trident")||D("MSIE"),Ja=D("Edge"),Ka=D("Gecko")&&!(-1!=C.toLowerCase().indexOf("webkit")&&!D("Edge"))&&!(D("Trident")||D("MSIE"))&&!D("Edge"),La=-1!=C.toLowerCase().indexOf("webkit")&&!D("Edge");a:{var Na="",Oa=function(){var a=C;if(Ka)return/rv:([^\);]+)(\)|;)/.exec(a);if(Ja)return/Edge\/([\d\.]+)/.exec(a);if(Ia)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(La)return/WebKit\/(\S+)/.exec(a);if(Ha)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Oa&&(Na=Oa?Oa[1]:"");if(Ia){var E,Pa=u.document;E=Pa?Pa.documentMode:void 0;if(null!=E&&E>parseFloat(Na)){Ma=String(E);break a}}Ma=Na}var Qa=Ma;function Ra(a){function b(f,g){var h=g+"  ";try{if(void 0===f)c.push("undefined");else if(null===f)c.push("NULL");else if("string"===typeof f)c.push('"'+f.replace(/\n/g,"\n"+g)+'"');else if("function"===typeof f)c.push(String(f).replace(/\n/g,"\n"+g));else if(w(f)){f[x]||d.push(f);var l=Object.prototype.hasOwnProperty.call(f,x)&&f[x]||(f[x]=++ra);if(e[l])c.push("*** reference loop detected (id="+l+") ***");else{e[l]=!0;c.push("{");for(var z in f)"function"!==typeof f[z]&&(c.push("\n"),c.push(h),c.push(z+" = "),b(f[z],h));c.push("\n"+g+"}");delete e[l]}}else c.push(f)}catch(hc){c.push("*** "+hc+" ***")}}var c=[],d=[],e={};b(a,"");for(a=0;a<d.length;a++)qa(d[a])}function Sa(a){a&&"function"==typeof a.R&&a.R()}var Ta=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{u.addEventListener("test",v,b),u.removeEventListener("test",v,b)}catch(c){}return a}();function F(){this.h=this.h;this.l=this.l}F.prototype.h=!1;F.prototype.R=function(){this.h||(this.h=!0,this.o())};F.prototype.o=function(){if(this.l)for(;this.l.length;)this.l.shift()()};function G(a,b){this.type=a;this.g=this.target=b;this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};function H(a,b){G.call(this,a?a.type:"");this.relatedTarget=this.g=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.i=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.g=b;if(b=a.relatedTarget){if(Ka){a:{try{Ga(b.nodeName);c=!0;break a}catch(e){}c=!1}c||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:Ua[a.pointerType]||"";this.state=a.state;this.i=a;a.defaultPrevented&&H.A.h.call(this)}}A(H,G);var Ua={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.A.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),Va=0;function Wa(a,b,c,d,e){this.listener=a;this.g=null;this.src=b;this.type=c;this.capture=!!d;this.J=e;this.key=++Va;this.F=this.H=!1}function Xa(a){a.F=!0;a.listener=null;a.g=null;a.src=null;a.J=null}function Ya(a){this.src=a;this.g={};this.h=0}Ya.prototype.add=function(a,b,c,d,e){var f=a.toString();(a=this.g[f])||(a=this.g[f]=[],this.h++);var g=Za(a,b,d,e);-1<g?(b=a[g],c||(b.H=!1)):(b=new Wa(b,this.src,f,!!d,e),b.H=c,a.push(b));return b};function $a(a,b){var c=b.type;if(c in a.g){var f,d=a.g[c],e=va(d,b);(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Xa(b),0==a.g[c].length&&(delete a.g[c],a.h--))}}function Za(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.F&&f.listener==b&&f.capture==!!c&&f.J==d)return e}return-1}var ab="closure_lm_"+(1e6*Math.random()|0),bb={},cb=0;function db(a,b,c,d,e){if(d&&d.once)return eb(a,b,c,d,e);if(Array.isArray(b)){for(var f=0;f<b.length;f++)db(a,b[f],c,d,e);return null}c=fb(c);return a&&a[I]?a.g.add(String(b),c,!1,w(d)?!!d.capture:!!d,e):gb(a,b,c,!1,d,e)}function gb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=w(e)?!!e.capture:!!e,h=hb(a);h||(a[ab]=h=new Ya(a));c=h.add(b,c,d,g,f);if(c.g)return c;d=ib();c.g=d;d.src=a;d.listener=c;if(a.addEventListener)Ta||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(jb(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");cb++;return c}function ib(){function a(c){return b.call(a.src,a.listener,c)}var b=kb;return a}function eb(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)eb(a,b[f],c,d,e);return null}c=fb(c);return a&&a[I]?a.g.add(String(b),c,!0,w(d)?!!d.capture:!!d,e):gb(a,b,c,!0,d,e)}function lb(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)lb(a,b[f],c,d,e);else(d=w(d)?!!d.capture:!!d,c=fb(c),a&&a[I])?(a=a.g,b=String(b).toString(),b in a.g&&(f=a.g[b],c=Za(f,c,d,e),-1<c&&(Xa(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.g[b],a.h--)))):a&&(a=hb(a))&&(b=a.g[b.toString()],a=-1,b&&(a=Za(b,c,d,e)),(c=-1<a?b[a]:null)&&mb(c))}function mb(a){if("number"!==typeof a&&a&&!a.F){var b=a.src;if(b&&b[I])$a(b.g,a);else{var c=a.type,d=a.g;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(jb(c),d):b.addListener&&b.removeListener&&b.removeListener(d);cb--;(c=hb(b))?($a(c,a),0==c.h&&(c.src=null,b[ab]=null)):Xa(a)}}}function jb(a){return a in bb?bb[a]:bb[a]="on"+a}function kb(a,b){if(a.F)a=!0;else{b=new H(b,this);var c=a.listener,d=a.J||a.src;a.H&&mb(a);a=c.call(d,b)}return a}function hb(a){a=a[ab];return a instanceof Ya?a:null}var nb="__closure_events_fn_"+(1e9*Math.random()>>>0);function fb(a){if("function"===typeof a)return a;a[nb]||(a[nb]=function(b){return a.handleEvent(b)});return a[nb]}function ob(a){var b=[];pb(new qb,a,b);return b.join("")}function qb(){}function pb(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(Array.isArray(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),pb(a,d[f],c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");e="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(f=b[d],"function"!=typeof f&&(c.push(e),rb(d,c),c.push(":"),pb(a,f,c),e=","));c.push("}");return}}switch(typeof b){case"string":rb(b,c);break;case"number":c.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case"boolean":c.push(String(b));break;case"function":c.push("null");break;default:throw Error("Unknown type: "+typeof b)}}}var sb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},tb=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function rb(a,b){b.push('"',a.replace(tb,(function(c){var d=sb[c];d||(d="\\u"+(65536|c.charCodeAt(0)).toString(16).substr(1),sb[c]=d);return d})),'"')}function J(){F.call(this);this.j={}}A(J,F);J.prototype.connect=function(a){a&&a()};J.prototype.C=function(a,b,c){this.j[a]={I:b,T:!!c}};J.prototype.K=function(a){this.i=a};J.prototype.o=function(){J.A.o.call(this);delete this.j;delete this.i};function K(a){F.call(this);this.g=a}A(K,F);t=K.prototype;t.cancel=function(){this.g.cancel()};t.connect=function(a){a&&a()};t.C=function(a,b,c){ub(this.g,(function(d){d.C(a,b,c)}))};t.K=function(a){ub(this.g,(function(b){b.K(a)}))};t.D=function(a,b){ub(this.g,(function(c){c.D(a,b)}))};t.o=function(){this.cancel();K.A.o.call(this)};function vb(a,b){this.i=a;this.l=b;this.h=0;this.g=null}vb.prototype.get=function(){if(0<this.h){this.h--;var a=this.g;this.g=a.next;a.next=null}else a=this.i();return a};function wb(a,b){a.l(b);100>a.h&&(a.h++,b.next=a.g,a.g=b)}function xb(){var a=document,b="IFRAME";"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase());return a.createElement(b)}var yb;function zb(){var a=u.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!D("Presto")&&(a=function(){var e=xb();e.style.display="none";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=y((function(l){if(("*"==h||l.origin==h)&&l.data==g)this.port1.onmessage()}),this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!D("Trident")&&!D("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.P;c.P=null;e()}};return function(e){d.next={P:e};d=d.next;b.port2.postMessage(0)}}return function(e){u.setTimeout(e,0)}}function Ab(a){u.setTimeout((function(){throw a}),0)}function Bb(){this.h=this.g=null}Bb.prototype.add=function(a,b){var c=Cb.get();c.set(a,b);this.h?this.h.next=c:this.g=c;this.h=c};function Db(){var a=null;L.g&&(a=L.g,L.g=L.g.next,L.g||(L.h=null),a.next=null);return a}var Cb=new vb((function(){return new Eb}),(function(a){return a.reset()}));function Eb(){this.next=this.g=this.h=null}Eb.prototype.set=function(a,b){this.h=a;this.g=b;this.next=null};Eb.prototype.reset=function(){this.next=this.g=this.h=null};function Fb(a,b){Gb||Hb();Ib||(Gb(),Ib=!0);L.add(a,b)}var Gb;function Hb(){if(u.Promise&&u.Promise.resolve){var a=u.Promise.resolve(void 0);Gb=function(){a.then(Jb)}}else Gb=function(){"function"!==typeof u.setImmediate||u.Window&&u.Window.prototype&&!D("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(yb||(yb=zb()),yb(Jb)):u.setImmediate(Jb)}}var Ib=!1,L=new Bb;function Jb(){for(var a;a=Db();){try{a.h.call(a.g)}catch(b){Ab(b)}wb(Cb,a)}Ib=!1}function Kb(a){if(!a)return!1;try{return!!a.ba}catch(b){return!1}}function M(a){this.g=0;this.s=void 0;this.l=this.h=this.i=null;this.j=this.m=!1;if(a!=v)try{var b=this;a.call(void 0,(function(c){N(b,2,c)}),(function(c){N(b,3,c)}))}catch(c){N(this,3,c)}}function Lb(){this.next=this.i=this.h=this.l=this.g=null;this.j=!1}Lb.prototype.reset=function(){this.i=this.h=this.l=this.g=null;this.j=!1};var Mb=new vb((function(){return new Lb}),(function(a){a.reset()}));function Nb(a,b,c){var d=Mb.get();d.l=a;d.h=b;d.i=c;return d}function Ob(a){if(a instanceof M)return a;var b=new M(v);N(b,2,a);return b}M.prototype.then=function(a,b,c){return Pb(this,"function"===typeof a?a:null,"function"===typeof b?b:null,c)};M.prototype.ba=!0;M.prototype.cancel=function(a){if(0==this.g){var b=new O(a);Fb((function(){Qb(this,b)}),this)}};function Qb(a,b){if(0==a.g)if(a.i){var c=a.i;if(c.h){for(var d=0,e=null,f=null,g=c.h;g&&(g.j||(d++,g.g==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(0==c.g&&1==d?Qb(c,b):(f?(d=f,d.next==c.l&&(c.l=d),d.next=d.next.next):Rb(c),Sb(c,e,3,b)))}a.i=null}else N(a,3,b)}function Tb(a,b){a.h||2!=a.g&&3!=a.g||a.m||(a.m=!0,Fb(a.u,a));a.l?a.l.next=b:a.h=b;a.l=b}function Pb(a,b,c,d){var e=Nb(null,null,null);e.g=new M((function(f,g){e.l=b?function(h){try{var l=b.call(d,h);f(l)}catch(z){g(z)}}:f;e.h=c?function(h){try{var l=c.call(d,h);void 0===l&&h instanceof O?g(h):f(l)}catch(z){g(z)}}:g}));e.g.i=a;Tb(a,e);return e.g}M.prototype.B=function(a){this.g=0;N(this,2,a)};M.prototype.L=function(a){this.g=0;N(this,3,a)};function N(a,b,c){if(0==a.g){a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself"));a.g=1;a:{var d=c,e=a.B,f=a.L;if(d instanceof M){Tb(d,Nb(e||v,f||null,a));var g=!0}else if(Kb(d))d.then(e,f,a),g=!0;else{if(w(d))try{var h=d.then;if("function"===typeof h){Ub(d,h,e,f,a);g=!0;break a}}catch(l){f.call(a,l);g=!0;break a}g=!1}}g||(a.s=c,a.g=b,a.i=null,a.m||(a.m=!0,Fb(a.u,a)),3!=b||c instanceof O||Vb(a,c))}}function Ub(a,b,c,d,e){function f(l){h||(h=!0,d.call(e,l))}function g(l){h||(h=!0,c.call(e,l))}var h=!1;try{b.call(a,g,f)}catch(l){f(l)}}function Rb(a){var b=null;a.h&&(b=a.h,a.h=b.next,b.next=null);a.h||(a.l=null);return b}M.prototype.u=function(){for(var a;a=Rb(this);)Sb(this,a,this.g,this.s);this.m=!1};function Sb(a,b,c,d){if(3==c&&b.h&&!b.j)for(;a&&a.j;a=a.i)a.j=!1;if(b.g)b.g.i=null,Wb(b,c,d);else try{b.j?b.l.call(b.i):Wb(b,c,d)}catch(e){Ab.call(null,e)}wb(Mb,b)}function Wb(a,b,c){2==b?a.l.call(a.i,c):a.h&&a.h.call(a.i,c)}function Vb(a,b){a.j=!0;Fb((function(){a.j&&Ab.call(null,b)}))}function O(a){B.call(this,a)}A(O,B);O.prototype.name="cancel";function P(a){this.j=[];this.O=a;this.l=this.i=!1;this.h=void 0;this.B=this.U=this.s=!1;this.m=0;this.g=null;this.u=0}P.prototype.cancel=function(a){if(this.i)this.h instanceof P&&this.h.cancel();else{if(this.g){var b=this.g;delete this.g;a?b.cancel(a):(b.u--,0>=b.u&&b.cancel())}this.O?this.O.call(null,this):this.B=!0;this.i||(a=new Q(this),Xb(this),Yb(this,!1,a))}};P.prototype.L=function(a,b){this.s=!1;Yb(this,a,b)};function Yb(a,b,c){a.i=!0;a.h=c;a.l=!b;Zb(a)}function Xb(a){if(a.i){if(!a.B)throw new $b(a);a.B=!1}}P.prototype.I=function(a){Xb(this);Yb(this,!0,a)};function ub(a,b){ac(a,b,null,void 0)}function ac(a,b,c,d){a.j.push([b,c,d]);a.i&&Zb(a)}P.prototype.then=function(a,b,c){var d,e,f=new M((function(g,h){d=g;e=h}));ac(this,d,(function(g){g instanceof Q?f.cancel():e(g)}));return f.then(a,b,c)};P.prototype.ba=!0;function bc(a){return xa(a.j,(function(b){return"function"===typeof b[1]}))}function Zb(a){if(a.m&&a.i&&bc(a)){var b=a.m,c=cc[b];c&&(u.clearTimeout(c.g),delete cc[b]);a.m=0}a.g&&(a.g.u--,delete a.g);b=a.h;for(var d=c=!1;a.j.length&&!a.s;){var e=a.j.shift(),f=e[0],g=e[1];e=e[2];if(f=a.l?g:f)try{var h=f.call(e||null,b);void 0!==h&&(a.l=a.l&&(h==b||h instanceof Error),a.h=b=h);if(Kb(b)||"function"===typeof u.Promise&&b instanceof u.Promise)d=!0,a.s=!0}catch(l){b=l,a.l=!0,bc(a)||(c=!0)}}a.h=b;d&&(h=y(a.L,a,!0),d=y(a.L,a,!1),b instanceof P?(ac(b,h,d),b.U=!0):b.then(h,d));c&&(b=new dc(b),cc[b.g]=b,a.m=b.g)}function ec(){var a=new P,b=Error("Invalid origin");Xb(a);Yb(a,!1,b);return a}function $b(){B.call(this)}A($b,B);$b.prototype.message="Deferred has already fired";$b.prototype.name="AlreadyCalledError";function Q(){B.call(this)}A(Q,B);Q.prototype.message="Deferred was canceled";Q.prototype.name="CanceledError";function dc(a){this.g=u.setTimeout(y(this.i,this),0);this.h=a}dc.prototype.i=function(){delete cc[this.g];throw this.h};var cc={};function R(){F.call(this);this.g=new Ya(this);this.B=this;this.m=null}A(R,F);R.prototype[I]=!0;R.prototype.removeEventListener=function(a,b,c,d){lb(this,a,b,c,d)};R.prototype.o=function(){R.A.o.call(this);if(this.g){var c,a=this.g,b=0;for(c in a.g){for(var d=a.g[c],e=0;e<d.length;e++)++b,Xa(d[e]);delete a.g[c];a.h--}}this.m=null};function fc(a,b,c,d){b=a.g.g[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.F&&g.capture==c){var h=g.listener,l=g.J||g.src;g.H&&$a(a.g,g);e=!1!==h.call(l,d)&&e}}return e&&!d.defaultPrevented}function gc(a,b){R.call(this);this.j=a||1;this.i=b||u;this.s=y(this.W,this);this.u=Date.now()}A(gc,R);t=gc.prototype;t.G=!1;t.v=null;t.W=function(){if(this.G){var a=Date.now()-this.u;if(0<a&&a<.8*this.j)this.v=this.i.setTimeout(this.s,this.j-a);else{this.v&&(this.i.clearTimeout(this.v),this.v=null);var b;if(a=this.m)for(b=[];a;a=a.m)b.push(a);a=this.B;var c="tick",d=c.type||c;if("string"===typeof c)c=new G(c,a);else if(c instanceof G)c.target=c.target||a;else{var e=c;c=new G(d,a);Fa(c,e)}e=!0;if(b)for(var f=b.length-1;0<=f;f--){var g=c.g=b[f];e=fc(g,d,!0,c)&&e}g=c.g=a;e=fc(g,d,!0,c)&&e;e=fc(g,d,!1,c)&&e;if(b)for(f=0;f<b.length;f++)g=c.g=b[f],e=fc(g,d,!1,c)&&e;this.G&&(ic(this),this.start())}}};t.start=function(){this.G=!0;this.v||(this.v=this.i.setTimeout(this.s,this.j),this.u=Date.now())};function ic(a){a.G=!1;a.v&&(a.i.clearTimeout(a.v),a.v=null)}t.o=function(){gc.A.o.call(this);ic(this);delete this.i};function jc(a){J.call(this);this.g=a;this.m=db(this.g,"message",this.V,!1,this)}A(jc,J);function kc(a,b){if("*"==b)return new K(ec());var c=new gc(50),d=ua(Sa,c),e=new P(d);ac(e,d,d,void 0);c.start();db(c,"tick",(function(){function f(){console.log("got back message from iframe. channel created!");g.port1.removeEventListener("message",f,!0);c.h||e.I(new jc(g.port1))}var g=new MessageChannel;g.port1.start();g.port1.addEventListener("message",f,!0);a.postMessage({"--goog.messaging.PortChannel":!0},b,[g.port2])}));return new K(e)}var lc;if(lc=La){for(var mc=0,nc=ya(String(Qa)).split("."),oc=ya("533").split("."),pc=Math.max(nc.length,oc.length),qc=0;0==mc&&qc<pc;qc++){var rc=nc[qc]||"",sc=oc[qc]||"";do{var S=/(\d*)(\D*)(.*)/.exec(rc)||["","","",""],T=/(\d*)(\D*)(.*)/.exec(sc)||["","","",""];if(0==S[0].length&&0==T[0].length)break;mc=za(0==S[1].length?0:parseInt(S[1],10),0==T[1].length?0:parseInt(T[1],10))||za(0==S[2].length,0==T[2].length)||za(S[2],T[2]);rc=S[3];sc=T[3]}while(0==mc)}lc=0>mc}var tc=lc;t=jc.prototype;t.D=function(a,b){var c=[];b=this.M(c,b);a={serviceName:a,payload:b,"--goog.messaging.PortChannel":!0};tc&&(a=ob(a));this.g.postMessage(a,c)};t.V=function(a){a=a.i;var b=a.data;if(tc)try{b=JSON.parse(b)}catch(e){return}var c;if(c=w(b)&&b["--goog.messaging.PortChannel"])c=b,"serviceName"in c?"payload"in c?c=!0:(Ra(c),c=!1):(Ra(c),c=!1);if(c){c=b.serviceName;b=b.payload;var d=this.j[c];if(c=d?d:this.i?{I:ua(this.i,c),T:w(b)}:null){a:{a=this.N(a.ports||[],b);if((d=c.T)&&"string"===typeof a)try{b=JSON.parse(a);break a}catch(e){b=null;break a}else if(!d&&"string"!==typeof a){b=ob(a);break a}b=a}null!=b&&c.I(b)}}};t.M=function(a,b){return b&&"[object MessagePort]"==Object.prototype.toString.call(b)?(a.push(b),{_port:{type:"real",index:a.length-1}}):Array.isArray(b)?wa(b,y(this.M,this,a)):b&&b.constructor==Object?Da(b,(function(c,d){c=this.M(a,c);return"_port"==d?{type:"escaped",val:c}:c}),this):b};t.N=function(a,b){return Array.isArray(b)?wa(b,y(this.N,this,a)):b&&b.constructor==Object?b._port&&"real"==b._port.type?a[b._port.index]:Da(b,(function(c,d){return this.N(a,"_port"==d?c.val:c)}),this):b};t.o=function(){mb(this.m);"[object MessagePort]"==Object.prototype.toString.call(this.g)?this.g.close():"[object Worker]"==Object.prototype.toString.call(this.g)&&this.g.terminate();delete this.g;jc.A.o.call(this)};function uc(a){F.call(this);this.i=a;this.g={};this.i.K(y(this.j,this))}A(uc,F);function vc(a,b){if(-1!=b.indexOf(":"))throw Error('Virtual channel name "'+b+'" should not contain colons');if(b in a.g)throw Error('Virtual channel "'+b+'" was already created for this multichannel.');var c=new wc(a,b);return a.g[b]=c}uc.prototype.j=function(a,b){if(a=a.match(/^([^:]*):(.*)/)){var c=a[1];a=a[2];c in this.g&&(c=this.g[c])&&c.j&&c.j(a,b)}};uc.prototype.o=function(){Ca(this.g,(function(a){Sa(a)}));Sa(this.i);delete this.g;delete this.i};function wc(a,b){F.call(this);this.g=a;this.i=b}A(wc,F);t=wc.prototype;t.connect=function(a){a&&a()};t.C=function(a,b,c){this.g.i.C(this.i+":"+a,y(this.S,this,b),c)};t.K=function(a){this.j=y(this.S,this,a)};t.D=function(a,b){if(this.h)throw Error("#send called for disposed VirtualChannel.");this.g.i.D(this.i+":"+a,b)};t.S=function(a,b){this.h||a.apply({},Array.prototype.slice.call(arguments,1))};t.o=function(){this.g=this.g.g[this.i]=null};function U(a){F.call(this);this.g=new uc(a);this.j={};this.i=vc(this.g,"private");this.m=vc(this.g,"public");this.i.C("mics",y(this.u,this),!0)}A(U,F);U.prototype.o=function(){Sa(this.g);delete this.g;delete this.m;delete this.i};U.prototype.u=function(a){var b=a.signature;a=a.data;b in this.j&&((0,this.j[b])(a),delete this.j[b])};U.prototype.s=function(a,b){a=a(b.data);var c=b.signature;Ob(a).then(y((function(d){var e={};e.data=d;e.signature=c;this.i&&this.i.D("mics",e)}),this))};function xc(a,b,c){a=kc(a,b);var d=new U(a);c.forEach((function(e,f,g){null!=f&&null!=g.get(f)&&(g=g.get(f),d.m.C(f,y(d.s,d,g),!0))}));return d}var V=["__AMP_createRC"],W=u;V[0]in W||"undefined"==typeof W.execScript||W.execScript("var "+V[0]);for(var X;V.length&&(X=V.shift());)V.length||void 0===xc?W[X]&&W[X]!==Object.prototype[X]?W=W[X]:W=W[X]={}:W[X]=xc;function Y(a){a=AMP.BaseElement.call(this,a)||this;a.Y=null;a.Z=null;return a}k(Y,AMP.BaseElement);Y.prototype.buildCallback=function(){this.Y=q(this.element);this.Z=oa(this.element)};Y.prototype.isLayoutSupported=function(a){return pa(a)};Y.prototype.layoutCallback=function(){var a=this,b=this.win.document.createElement("iframe");this.Y.getWidgetIframeUrl("voicebar").then((function(d){p(b,{src:d,sandbox:"allow-scripts"});a.applyFillContent(b,!0);a.element.appendChild(b)}));var c=new Map;c.set("RuntimeService.TriggerSendTextQuery",(function(){a.Z.sendTextQuery()}));c.set("RuntimeService.TriggerOpenMic",(function(){a.Z.openMic()}));b.addEventListener("load",(function(){var d=a.Y.getAssistjsServer();__AMP_createRC(b.contentWindow,d,c);console.log("after calling create RC!")}));return this.loadPromise(b)};function Z(a){a=AMP.BaseElement.call(this,a)||this;a.Y=null;a.Z=null;return a}k(Z,AMP.BaseElement);Z.prototype.buildCallback=function(){this.Y=q(this.element);this.Z=oa(this.element)};Z.prototype.isLayoutSupported=function(a){return pa(a)};Z.prototype.layoutCallback=function(){var a=this,b=this.win.document.createElement("iframe");this.Y.getWidgetIframeUrl("voicebutton").then((function(c){p(b,{src:c,sandbox:"allow-scripts"});a.applyFillContent(b,!0);a.element.appendChild(b)}));b.addEventListener("load",(function(){a.Z.openMic()}));return this.loadPromise(b)};function yc(){this.ga="";this.aa="https://actions.google.com";this.ca=!1;this.da=window.location.href;this.ea=new ia;this.fa=!1}yc.prototype.initializeConfigs=function(a){if(!this.fa){if(!m.call(a,"projectId"))throw Error("Project id is required to embed assist.js.");this.ga=a.projectId;m.call(a,"assistjsServer")&&(this.aa=a.assistjsServer);m.call(a,"devMode")&&(this.ca=a.devMode);m.call(a,"hostUrl")&&(this.da=a.hostUrl);this.fa=!0;this.ea.resolve()}};yc.prototype.getWidgetIframeUrl=function(a){var b=this;return this.ea.promise.then((function(){return b.aa+"/assist/"+a+"?origin="+origin+"&projectId="+b.ga+"&dev="+b.ca+"&hostUrl="+b.da}))};yc.prototype.getAssistjsServer=function(){return this.aa};function zc(a){this.$=a;this.Y=null;Ac(this)}function Ac(a){a.$.whenFirstVisible().then((function(){a.Y=q(a.$);var b=a.$.win.document.createElement("iframe");a.Y.getWidgetIframeUrl("frame").then((function(c){p(b,{src:c,allow:"microphone",sandbox:"allow-scripts"});c=!1;void 0===c&&(c=b.hasAttribute("hidden"));c?b.removeAttribute("hidden"):b.setAttribute("hidden","");document.body.appendChild(b)}))}))}zc.prototype.openMic=function(){};zc.prototype.sendTextQuery=function(){};function Bc(){return AMP.BaseElement.apply(this,arguments)||this}k(Bc,AMP.BaseElement);Bc.prototype.buildCallback=function(){var a=JSON.parse(this.element.textContent);q(this.element).initializeConfigs(a)};(function(a){a.registerServiceForDoc("assistjs-config-service",yc);a.registerServiceForDoc("assistjs-frame-service",zc);a.registerElement("amp-google-assistant-assistjs-config",Bc,".amp-google-assistant-assistjs{display:block}\n/*# sourceURL=/extensions/amp-google-assistant-assistjs/0.1/amp-google-assistant-assistjs.css*/");a.registerElement("amp-google-assistant-voice-button",Z,".amp-google-assistant-assistjs{display:block}\n/*# sourceURL=/extensions/amp-google-assistant-assistjs/0.1/amp-google-assistant-assistjs.css*/");a.registerElement("amp-google-assistant-voice-bar",Y,".amp-google-assistant-assistjs{display:block}\n/*# sourceURL=/extensions/amp-google-assistant-assistjs/0.1/amp-google-assistant-assistjs.css*/");a.registerElement("amp-google-assistant-inline-suggestion-bar",r,".amp-google-assistant-assistjs{display:block}\n/*# sourceURL=/extensions/amp-google-assistant-assistjs/0.1/amp-google-assistant-assistjs.css*/")})(self.AMP)}});//# sourceMappingURL=amp-google-assistant-assistjs-0.1.js.map