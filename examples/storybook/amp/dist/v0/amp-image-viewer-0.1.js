(self.AMP=self.AMP||[]).push({n:"amp-image-viewer",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var g;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ca="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function da(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}da(this);"function"===typeof Symbol&&Symbol("x");var p;if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var q;a:{var ea={a:!0},fa={};try{fa.__proto__=ea;q=fa.a;break a}catch(a){}q=!1}p=q?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=p;function r(a,b){a.prototype=ca(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.zb=b.prototype}var u;function v(){return u?u:u=Promise.resolve(void 0)}function ia(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}function ja(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var f=a[e];b(f,e,a)?c.push(f):(d<e&&(a[d]=f),d++)}d<a.length&&(a.length=d);return c}function ka(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1}function la(a,b){var c;"number"!==typeof c&&(c=0);return c+b.length>a.length?!1:-1!==a.indexOf(b,c)}function ma(a){return 1==(null==a?void 0:a.nodeType)?a.tagName.toLowerCase()+(a.id?"#"+a.id:""):a}function na(a,b,c,d){var e=void 0===c?"Assertion failed":c;if(b)return b;a&&!la(e,a)&&(e+=a);for(var f=3,h=e.split("%s"),k=h.shift(),l=[k];h.length;){var m=arguments[f++],n=h.shift();k+=ma(m)+n;l.push(m,n.trim())}f=Error(k);f.messageArray=ja(l,(function(Ta){return""!==Ta}));var t,A;null==(A=(t=self).__AMP_REPORT_ERROR)||A.call(t,f);throw f}function oa(a){for(var b=null,c="",d=ba(arguments),e=d.next();!e.done;e=d.next())if(e=e.value,e instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(e,"message"))?0:f.writable)b=e;else{f=e.stack;var h=Error(e.message);for(b in e)h[b]=e[b];h.stack=f;b=h}}else c&&(c+=" "),c+=e;b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function pa(a){var b=oa.apply(null,arguments);setTimeout((function(){var c,d;null==(d=(c=self).__AMP_REPORT_ERROR)||d.call(c,b);throw b}))}function qa(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];try{a.apply(null,c)}catch(e){pa(e)}}var w=self.AMP_CONFIG||{},ra=("string"==typeof w.cdnProxyRegex?new RegExp(w.cdnProxyRegex):w.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function sa(a){if(self.document&&self.document.head&&(!self.location||!ra.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}w.cdnUrl||sa("runtime-host");w.geoApiUrl||sa("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var x=self.__AMP_LOG;function y(){if(x.dev)return x.dev;throw Error("failed to call initLogConstructor")}function ta(a,b,c,d){if(!x.user)throw Error("failed to call initLogConstructor");x.user.assert(a,b,c,d,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}var z,ua="Webkit webkit Moz moz ms O o".split(" "),va={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};function B(a,b){for(var c in b){var d=a,e=b[c];var f=d.style;var h=c;if(h.startsWith("--"))f=h;else{z||(z=Object.create(null));var k=z[h];if(!k){k=h;if(void 0===f[h]){var l=h;l=l.charAt(0).toUpperCase()+l.slice(1);b:{for(var m=0;m<ua.length;m++){var n=ua[m]+l;if(void 0!==f[n]){l=n;break b}}l=""}void 0!==f[l]&&(k=l)}z[h]=k}f=k}f&&(f.startsWith("--")?d.style.setProperty(f,e):d.style[f]=e)}}function wa(a){var b=!1;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function xa(a,b,c,d){return function(e){return C(e,a,b,c,d)}}function C(a,b,c,d,e){a:{var f=a-0;if(0>=f)a=0;else if(1<=f)a=1;else{for(var h=0,k=1,l=0,m=0;8>m;m++){l=D(f,b,d);var n=(D(f+1e-6,b,d)-l)/1e-6;if(1e-6>Math.abs(l-a)){a=f;break a}if(1e-6>Math.abs(n))break;else l<a?h=f:k=f,f-=(l-a)/n}for(m=0;1e-6<Math.abs(l-a)&&8>m;m++)l<a?(h=f,f=(f+k)/2):(k=f,f=(f+h)/2),l=D(f,b,d);a=f}}0==a?e=0:1==a?e=1:(b=E(0,c,a),c=E(c,e,a),e=E(e,1,a),b=E(b,c,a),c=E(c,e,a),e=E(b,c,a));return e}function D(a,b,c){if(0==a)return 0;if(1==a)return 1;var d=E(0,b,a),e=E(b,c,a),f=E(c,1,a);d=E(d,e,a);e=E(e,f,a);return E(d,e,a)}function E(a,b,c){return a+c*(b-a)}var ya={linear:function(a){return a},ease:function(a){return C(a,.25,.1,.25,1)},"ease-in":function(a){return C(a,.42,0,1,1)},"ease-out":function(a){return C(a,0,0,.58,1)},"ease-in-out":function(a){return C(a,.42,0,.58,1)}};function za(a){if(!a)return null;if("string"==typeof a){if(-1!=a.indexOf("cubic-bezier")){var b=a.match(/cubic-bezier\((.+)\)/);if(b&&(b=b[1].split(",").map(parseFloat),4==b.length)){for(var c=0;4>c;c++)if(isNaN(b[c]))return null;return xa(b[0],b[1],b[2],b[3])}return null}return ya[a]}return a}function F(a,b){return function(c){return a+(b-a)*c}}function G(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return Aa(a,b)}function Ba(a){var b=Ca(a);b=Ca(b);b=b.isSingleDoc()?b.win:b;return Aa(b,"owners")}function Ca(a){return a.nodeType?G((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function Aa(a,b){var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function H(a,b,c){return na("​​​",a,b,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function Da(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function Ea(a){return a.closest?a.closest("[i-amphtml-scale-animation]"):Da(a,(function(b){var c=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector;return c?c.call(b,"[i-amphtml-scale-animation]"):!1}))}function Fa(a){/^[\w-]+$/.test("img");return a.querySelector("img")}function Ga(){}function I(a){this.Y=a;this.aa=G(self,"vsync");this.ab=null;this.M=[]}function Ha(a,b,c){var d=Ia;return new I(a).setCurve(d).add(0,b,1).start(c)}I.prototype.setCurve=function(a){a&&(this.ab=za(a));return this};I.prototype.add=function(a,b,c,d){this.M.push({delay:a,func:b,duration:c,curve:za(d)});return this};I.prototype.start=function(a){return new J(this.aa,this.Y,this.M,this.ab,a)};function J(a,b,c,d,e){this.aa=a;this.Y=b;this.M=[];for(b=0;b<c.length;b++){var f=c[b];this.M.push({delay:f.delay,func:f.func,duration:f.duration,curve:f.curve||d,started:!1,completed:!1})}this.ob=e;this.$=Date.now();this.Z=!0;this.gb={};c=new ia;this.va=c.promise;this.Ta=c.resolve;this.Sa=c.reject;this.ib=this.aa.createAnimTask(this.Y,{mutate:this.xb.bind(this)});this.aa.canAnimate(this.Y)?this.ib(this.gb):(y().warn("Animation","cannot animate"),K(this,!1,0))}J.prototype.then=function(a,b){return a||b?this.va.then(a,b):this.va};J.prototype.thenAlways=function(a){a=a||Ga;return this.then(a,a)};J.prototype.halt=function(a){K(this,!1,a||0)};function K(a,b,c){if(a.Z){a.Z=!1;if(0!=c){1<a.M.length&&a.M.sort((function(e,f){return e.delay+e.duration-(f.delay+f.duration)}));try{if(0<c)for(c=0;c<a.M.length;c++)a.M[c].func(1,!0);else for(var d=a.M.length-1;0<=d;d--)a.M[d].func(0,!1)}catch(e){y().error("Animation","completion failed: "+e,e),b=!1}}b?a.Ta():a.Sa()}}J.prototype.xb=function(){if(this.Z){for(var a=Date.now(),b=Math.min((a-this.$)/this.ob,1),c=0;c<this.M.length;c++){var d=this.M[c];!d.started&&b>=d.delay&&(d.started=!0)}for(c=0;c<this.M.length;c++)if(d=this.M[c],d.started&&!d.completed)a:{var e;if(0<d.duration){var f=e=Math.min((b-d.delay)/d.duration,1);if(d.curve&&1!=f)try{f=d.curve(e)}catch(h){y().error("Animation","step curve failed: "+h,h);K(this,!1,0);break a}}else f=e=1;1==e&&(d.completed=!0);try{d.func(f,d.completed)}catch(h){y().error("Animation","step mutate failed: "+h,h),K(this,!1,0)}}1==b?K(this,!0,0):this.aa.canAnimate(this.Y)?this.ib(this.gb):(y().warn("Animation","cancel animation"),K(this,!1,0))}};function Ja(){this.V=null}g=Ja.prototype;g.add=function(a){var b=this;this.V||(this.V=[]);this.V.push(a);return function(){b.remove(a)}};g.remove=function(a){if(this.V){var b=this.V;a=b.indexOf(a);-1!=a&&b.splice(a,1)}};g.removeAll=function(){this.V&&(this.V.length=0)};g.fire=function(a){if(this.V)for(var b=ba(this.V),c=b.next();!c.done;c=b.next())c=c.value,c(a)};g.getHandlerCount=function(){var a,b;return null!=(b=null==(a=this.V)?void 0:a.length)?b:0};function L(a,b){var c=this;this.jb=Aa(a,"timer");this.pb=b;this.nb=0;this.wa=-1;this.Oa=0;this.Z=!1;this.mb=function(){c.Ca()}}L.prototype.isPending=function(){return-1!=this.wa};L.prototype.schedule=function(a){a=a||this.nb;this.Z&&10>a&&(a=10);var b=Date.now()+a;return!this.isPending()||-10>b-this.Oa?(this.cancel(),this.Oa=b,this.wa=this.jb.delay(this.mb,a),!0):!1};L.prototype.Ca=function(){this.wa=-1;this.Oa=0;this.Z=!0;this.pb();this.Z=!1};L.prototype.cancel=function(){this.isPending()&&(this.jb.cancel(this.wa),this.wa=-1)};var M;function Ka(a){if(void 0!==M)return M;M=!1;try{var b={get passive(){M=!0;return!1}};a.addEventListener("test-options",null,b);a.removeEventListener("test-options",null,b)}catch(c){}return M}function La(a,b,c,d){this.type=a;this.data=b;this.time=c;this.event=d}function Ma(a,b,c){this.W=a;this.C=[];this.ia=[];this.S=[];this.H=[];this.h=null;this.ub=b;this.vb=c;this.Ha=!1;this.Ca=new L(a.ownerDocument.defaultView,this.bb.bind(this));this.fb=new Ja;this.ua=Object.create(null);this.Ya=this.tb.bind(this);this.Wa=this.rb.bind(this);this.Xa=this.sb.bind(this);this.Va=this.qb.bind(this);var d=Ka(a.ownerDocument.defaultView);this.W.addEventListener("touchstart",this.Ya,d?{passive:!0}:!1);this.W.addEventListener("touchend",this.Wa);this.W.addEventListener("touchmove",this.Xa,d?{passive:!0}:!1);this.W.addEventListener("touchcancel",this.Va);this.Pa=!1}function Na(a){var b=void 0===b?!1:b;var c=void 0===c?!1:c;var d=a.__AMP_Gestures;d||(d=new Ma(a,b,c),a.__AMP_Gestures=d);return d}g=Ma.prototype;g.cleanup=function(){this.W.removeEventListener("touchstart",this.Ya);this.W.removeEventListener("touchend",this.Wa);this.W.removeEventListener("touchmove",this.Xa);this.W.removeEventListener("touchcancel",this.Va);delete this.W.__AMP_Gestures;this.Ca.cancel()};g.onGesture=function(a,b){var c=new a(this),d=c.getType(),e=this.ua[d];e||(this.C.push(c),e=new Ja,this.ua[d]=e);return e.add(b)};g.removeGesture=function(a){var b=new a(this).getType();if(a=this.ua[b]){a.removeAll();a=ka(this.C,(function(c){return c.getType()==b}));if(0>a)return!1;this.C.splice(a,1);this.S.splice(a,1);this.H.splice(a,1);this.ia.splice(a,1);delete this.ua[b];return!0}return!1};g.onPointerDown=function(a){return this.fb.add(a)};g.tb=function(a){var b=Date.now();this.Ha=!1;this.fb.fire(a);for(var c=0;c<this.C.length;c++)if(!this.S[c]&&(this.H[c]&&this.H[c]<b&&N(this,c),this.C[c].onTouchStart(a))){var d=c;this.ia[d]=!0;this.H[d]=0}O(this,a)};g.sb=function(a){for(var b=Date.now(),c=0;c<this.C.length;c++)this.ia[c]&&(this.H[c]&&this.H[c]<b?N(this,c):this.C[c].onTouchMove(a)||N(this,c));O(this,a)};g.rb=function(a){for(var b=Date.now(),c=0;c<this.C.length;c++)if(this.ia[c])if(this.H[c]&&this.H[c]<b)N(this,c);else{this.C[c].onTouchEnd(a);var d=!this.H[c],e=this.H[c]<b;this.h!=this.C[c]&&(d||e)&&N(this,c)}O(this,a)};g.qb=function(a){for(var b=0;b<this.C.length;b++){var c=b;this.S[c]=0;N(this,c)}O(this,a)};function O(a,b){var c=!!a.h||a.Ha;a.Ha=!1;if(!c)for(var d=Date.now(),e=0;e<a.C.length;e++)if(a.S[e]||a.H[e]&&a.H[e]>=d){c=!0;break}c?(b.stopPropagation(),a.ub||b.preventDefault()):a.vb&&b.stopPropagation();a.Pa&&(a.Pa=!1,a.bb())}g.bb=function(){for(var a=Date.now(),b=-1,c=0;c<this.C.length;c++)if(!this.S[c])this.H[c]&&this.H[c]<a&&N(this,c);else if(-1==b||this.S[c]>this.S[b])b=c;if(-1!=b){var d=0;for(c=0;c<this.C.length;c++)!this.S[c]&&this.ia[c]&&(d=Math.max(d,this.H[c]-a));if(2>d){a=b;c=this.C[a];for(var e=0;e<this.C.length;e++)if(e!=a){var f=e;this.S[f]=0;N(this,f)}this.S[a]=0;this.H[a]=0;this.h=c;c.acceptStart()}else this.Ca.schedule(d)}};function N(a,b){a.ia[b]=!1;a.H[b]=0;a.S[b]||a.C[b].acceptCancel()}function P(a,b){this.yb=a;this.za=b}g=P.prototype;g.getType=function(){return this.yb};g.signalReady=function(a){var b=this.za;if(b.h)this.acceptCancel();else{for(var c=Date.now(),d=0;d<b.C.length;d++)b.C[d]==this&&(b.S[d]=c+a,b.H[d]=0);b.Pa=!0}};g.signalPending=function(a){var b=this.za;if(b.h)this.acceptCancel();else for(var c=Date.now(),d=0;d<b.C.length;d++)b.C[d]==this&&(b.H[d]=c+a)};g.signalEnd=function(){var a=this.za;a.h==this&&(a.h=null,a.Ha=!0)};g.signalEmit=function(a,b){var c=this.za.ua[this.getType()];c&&c.fire(new La(this.getType(),a,Date.now(),b))};g.acceptStart=function(){};g.acceptCancel=function(){};g.onTouchStart=function(){return!1};g.onTouchMove=function(){return!1};g.onTouchEnd=function(){};function Oa(){}var Pa=Math.round(-16.67/Math.log(.95));function Q(a,b,c){1>b&&(b=1);var d=.5+Math.min(b/33.34,.5);return a/b*d+c*(1-d)}function Qa(a,b,c,d,e,f){return new Ra(a,b,c,d,e,f).start()}function Ra(a,b,c,d,e,f){this.aa=G(self,"vsync");this.Y=a;this.Ia=f;this.j=b;this.o=c;this.La=d;this.Ma=e;this.G=this.F=0;a=new ia;this.va=a.promise;this.Ta=a.resolve;this.Sa=a.reject;this.ja=!1}g=Ra.prototype;g.start=function(){this.ja=!0;if(.02>=Math.abs(this.La)&&.02>=Math.abs(this.Ma))this.Ia(this.j,this.o),this.Ja(!0);else{this.F=this.La;this.G=this.Ma;var a=this.wb.bind(this),b=this.Ja.bind(this,!0);this.aa.runAnimMutateSeries(this.Y,a,5e3).then(b,b)}return this};g.halt=function(){this.ja&&this.Ja(!1)};g.then=function(a,b){return a||b?this.va.then(a,b):this.va};g.thenAlways=function(a){a=a||Oa;return this.then(a,a)};g.wb=function(a,b){if(!this.ja)return!1;this.j+=b*this.F;this.o+=b*this.G;if(!this.Ia(this.j,this.o))return!1;var c=Math.exp(-a/Pa);this.F=this.La*c;this.G=this.Ma*c;return.02<Math.abs(this.F)||.02<Math.abs(this.G)};g.Ja=function(a){this.ja&&(this.ja=!1,this.Ia(this.j,this.o),a?this.Ta():this.Sa())};function R(a){P.call(this,"tap",a);this.o=this.j=this.B=this.A=0;this.hb=null}r(R,P);R.prototype.onTouchStart=function(a){var b=a.touches;this.hb=a.target;return b&&1==b.length?(this.A=b[0].clientX,this.B=b[0].clientY,!0):!1};R.prototype.onTouchMove=function(a){return(a=a.changedTouches||a.touches)&&1==a.length&&(this.j=a[0].clientX,this.o=a[0].clientY,a=8<=Math.abs(this.o-this.B),8<=Math.abs(this.j-this.A)||a)?!1:!0};R.prototype.onTouchEnd=function(){this.signalReady(0)};R.prototype.acceptStart=function(){this.signalEmit({clientX:this.j,clientY:this.o,target:this.hb},null);this.signalEnd()};function Sa(a){P.call(this,"doubletap",a);this.U=this.o=this.j=this.B=this.A=0;this.cb=null}r(Sa,P);g=Sa.prototype;g.onTouchStart=function(a){return 1<this.U?!1:(a=a.touches)&&1==a.length?(this.A=a[0].clientX,this.B=a[0].clientY,this.j=a[0].clientX,this.o=a[0].clientY,!0):!1};g.onTouchMove=function(a){return(a=a.touches)&&1==a.length?(this.j=a[0].clientX,this.o=a[0].clientY,a=8<=Math.abs(this.o-this.B),8<=Math.abs(this.j-this.A)||a?(this.acceptCancel(),!1):!0):!1};g.onTouchEnd=function(a){this.U++;2>this.U?this.signalPending(200):(this.cb=a,this.signalReady(0))};g.acceptStart=function(){this.U=0;this.signalEmit({clientX:this.j,clientY:this.o},this.cb);this.signalEnd()};g.acceptCancel=function(){this.U=0};function S(a,b,c,d){P.call(this,a,b);this.eb=c;this.kb=d;this.h=!1;this.G=this.F=this.R=this.K=this.$=this.ca=this.ba=this.o=this.j=this.B=this.A=0}r(S,P);g=S.prototype;g.onTouchStart=function(a){a=a.touches;return this.h&&a&&1<a.length?!0:a&&1==a.length?(this.$=Date.now(),this.A=a[0].clientX,this.B=a[0].clientY,!0):!1};g.onTouchMove=function(a){var b=a.touches;if(b&&1<=b.length){var c=b[0];b=c.clientX;c=c.clientY;this.j=b;this.o=c;if(this.h)this.T(!1,!1,a);else if(a=Math.abs(b-this.A),b=Math.abs(c-this.B),this.eb&&this.kb)(8<=a||8<=b)&&this.signalReady(-10);else if(this.eb){if(8<=a&&a>b)this.signalReady(-10);else if(8<=b)return!1}else if(this.kb){if(8<=b&&b>a)this.signalReady(-10);else if(8<=a)return!1}else return!1;return!0}return!1};g.onTouchEnd=function(a){var b=a.touches;b&&0==b.length&&this.ka(a)};g.acceptStart=function(){this.h=!0;this.ba=this.A;this.ca=this.B;this.R=this.$;this.A=this.j;this.B=this.o;this.T(!0,!1,null)};g.acceptCancel=function(){this.h=!1};g.T=function(a,b,c){this.K=Date.now();var d=this.K-this.R;if(!b&&4<d||b&&16<d){var e=Q(this.j-this.ba,d,this.F),f=Q(this.o-this.ca,d,this.G);if(!b||32<d||0!=e||0!=f)this.F=1e-4<Math.abs(e)?e:0,this.G=1e-4<Math.abs(f)?f:0;this.ba=this.j;this.ca=this.o;this.R=this.K}this.signalEmit({first:a,last:b,time:this.K,deltaX:this.j-this.A,deltaY:this.o-this.B,startX:this.A,startY:this.B,lastX:this.j,lastY:this.o,velocityX:this.F,velocityY:this.G},c)};g.ka=function(a){this.h&&(this.h=!1,this.T(!1,!0,a),this.signalEnd())};function Ua(a){S.call(this,"swipe-xy",a,!0,!0)}r(Ua,S);function Va(a){P.call(this,"tapzoom",a);this.h=!1;this.G=this.F=this.R=this.K=this.ca=this.ba=this.U=this.o=this.j=this.B=this.A=0}r(Va,P);g=Va.prototype;g.onTouchStart=function(a){return this.h?!1:(a=a.touches)&&1==a.length?(this.A=a[0].clientX,this.B=a[0].clientY,!0):!1};g.onTouchMove=function(a){var b=a.touches;if(b&&1==b.length){this.j=b[0].clientX;this.o=b[0].clientY;if(this.h)this.T(!1,!1,a);else if(a=8<=Math.abs(this.o-this.B),8<=Math.abs(this.j-this.A)||a){if(0==this.U)return this.acceptCancel(),!1;this.signalReady(0)}return!0}return!1};g.onTouchEnd=function(a){this.h?this.ka(a):(this.U++,1==this.U?this.signalPending(400):this.acceptCancel())};g.acceptStart=function(){this.U=0;this.h=!0;this.T(!0,!1,null)};g.acceptCancel=function(){this.U=0;this.h=!1};g.T=function(a,b,c){this.K=Date.now();a?this.F=this.G=0:2<this.K-this.R&&(this.F=Q(this.j-this.ba,this.K-this.R,this.F),this.G=Q(this.o-this.ca,this.K-this.R,this.G));this.ba=this.j;this.ca=this.o;this.R=this.K;this.signalEmit({first:a,last:b,centerClientX:this.A,centerClientY:this.B,deltaX:this.j-this.A,deltaY:this.o-this.B,velocityX:this.F,velocityY:this.G},c)};g.ka=function(a){this.h&&(this.h=!1,this.T(!1,!0,a),this.signalEnd())};function Wa(a){P.call(this,"pinch",a);this.h=!1;this.G=this.F=this.R=this.K=this.$=this.$a=this.Za=this.Ra=this.Qa=this.oa=this.ma=this.na=this.la=this.ha=this.fa=this.ga=this.ea=0}r(Wa,P);g=Wa.prototype;g.onTouchStart=function(a){a=a.touches;return a?1==a.length||this.h&&2<a.length?!0:2==a.length?(this.$=Date.now(),this.ea=a[0].clientX,this.ga=a[0].clientY,this.fa=a[1].clientX,this.ha=a[1].clientY,!0):!1:!1};g.onTouchMove=function(a){var b=a.touches;if(!b||0==b.length)return!1;if(1==b.length)return!0;this.la=b[0].clientX;this.na=b[0].clientY;this.ma=b[1].clientX;this.oa=b[1].clientY;if(this.h)return this.T(!1,!1,a),!0;a=this.la-this.ea;b=this.na-this.ga;var c=this.ma-this.fa,d=this.oa-this.ha,e=10<=Math.abs(a+c),f=10<=Math.abs(b+d);if((0<a*c||0<b*d)&&(e||f))return!1;a=this.la-this.ea;b=this.na-this.ga;c=this.ma-this.fa;d=this.oa-this.ha;e=4<=Math.abs(a-c);f=4<=Math.abs(b-d);0>=a*c&&0>=b*d&&(e||f)&&this.signalReady(0);return!0};g.onTouchEnd=function(a){var b=a.touches;b&&2>b.length&&this.ka(a)};g.acceptStart=function(){this.h=!0;this.R=this.$;this.Ra=this.Qa=0;this.Za=.5*(this.ea+this.fa);this.$a=.5*(this.ga+this.ha);this.T(!0,!1,null)};g.acceptCancel=function(){this.h=!1};g.T=function(a,b,c){this.K=Date.now();var d=this.K-this.R,e=Math.abs(this.la-this.ea-(this.ma-this.fa)),f=Math.abs(this.na-this.ga-(this.oa-this.ha));if(!b&&4<d||b&&16<d)this.F=Q(e-this.Qa,d,this.F),this.G=Q(f-this.Ra,d,this.G),this.F=1e-4<Math.abs(this.F)?this.F:0,this.G=1e-4<Math.abs(this.G)?this.G:0,this.Qa=e,this.Ra=f,this.R=this.K;d=this.ea;var h=this.fa,k=this.ga,l=this.ha,m=this.la,n=this.ma,t=this.na,A=this.oa;this.signalEmit({first:a,last:b,time:this.K,centerClientX:this.Za,centerClientY:this.$a,dir:Math.sign((m-n)*(m-n)+(t-A)*(t-A)-((d-h)*(d-h)+(k-l)*(k-l))),deltaX:.5*e,deltaY:.5*f,velocityX:.5*this.F,velocityY:.5*this.G},c)};g.ka=function(a){this.h&&(this.h=!1,this.T(!1,!0,a),this.signalEnd())};function T(a,b,c,d){return Math.min(Math.max(a,b-d),c+d)}function Xa(a,b){return Math.sqrt(a*a+b*b)}function U(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c,x:a,y:b}}var Ya=/vertical/,Za=new WeakMap,V=new WeakMap,$a=new WeakMap;function ab(a,b){var c=a.ownerDocument.defaultView;if(c){var d=V.get(a);d||(d=[],V.set(a,d),bb(c).observe(a));if(!d.some((function(f){return f.callback===b&&0===f.type}))){d.push({type:0,callback:b});var e=$a.get(a);e&&setTimeout((function(){return cb(0,b,e)}))}}}function db(a,b){var c=V.get(a);c&&(ja(c,(function(d){return d.callback===b&&0===d.type})),0==c.length&&(V.delete(a),$a.delete(a),(c=a.ownerDocument.defaultView)&&bb(c).unobserve(a)))}function bb(a){var b=Za.get(a);b||(b=new a.ResizeObserver(eb),Za.set(a,b));return b}function eb(a){for(var b=new Set,c=a.length-1;0<=c;c--){var d=a[c],e=d.target;if(!b.has(e)){b.add(e);var f=V.get(e);if(f)for($a.set(e,d),e=0;e<f.length;e++){var h=f[e];cb(h.type,h.callback,d)}}}}function cb(a,b,c){if(0==a)a=c.contentRect,qa(b,{width:a.width,height:a.height});else if(1==a){var d=c.borderBoxSize;if(d)var e=0<d.length?d[0]:{inlineSize:0,blockSize:0};else{a=c.target;var f=Ya.test((a.ownerDocument.defaultView.getComputedStyle(a)||va)["writing-mode"]),h=a.offsetHeight,k=a.offsetWidth;if(f){var l=k;var m=h}else m=k,l=h;e={inlineSize:m,blockSize:l}}qa(b,e)}}var fb=/(\S+)(?:\s+(?:(-?\d+(?:\.\d+)?)([a-zA-Z]*)))?\s*(?:,|$)/g;function gb(a){var b=a.getAttribute("srcset");if(b){a=[];for(var c;c=fb.exec(b);){var d=c[1],e=void 0,f=void 0;if(c[2]){var h=c[3].toLowerCase();if("w"==h)e=parseInt(c[2],10);else if("x"==h)f=parseFloat(c[2]);else continue}else f=1;a.push({url:d,width:e,dpr:f})}return new W(a)}var k=H(a.getAttribute("src"),'Either non-empty "srcset" or "src" attribute must be specified: %s',a);return new W([{url:k,width:void 0,dpr:1}])}function W(a){H(0<a.length,"Srcset must have at least one source");this.ya=a;for(var b=!1,c=!1,d=0;d<a.length;d++){var e=a[d];b=b||!!e.width;c=c||!!e.dpr}H(!!(b^c),"Srcset must have width or dpr sources, but not both");a.sort(b?hb:ib);this.lb=b}W.prototype.select=function(a,b){if(this.lb){b*=a;a=this.ya;for(var c=0,d=1/0,e=1/0,f=0;f<a.length;f++){var h=a[f].width,k=Math.abs(h-b);if(k<=1.1*d||1.2<b/e)c=f,d=k,e=h;else break}b=c}else{a=this.ya;c=0;d=1/0;for(e=0;e<a.length;e++)if(f=Math.abs(a[e].dpr-b),f<=d)c=e,d=f;else break;b=c}return this.ya[b].url};W.prototype.getUrls=function(){return this.ya.map((function(a){return a.url}))};W.prototype.stringify=function(a){for(var b=[],c=this.ya,d=0;d<c.length;d++){var e=c[d],f=e.url;a&&(f=a(f));f=this.lb?f+" "+e.width+"w":f+" "+e.dpr+"x";b.push(f)}return b.join(", ")};function hb(a,b){H(a.width!=b.width,"Duplicate width: %s",a.width);return a.width-b.width}function ib(a,b){H(a.dpr!=b.dpr,"Duplicate dpr: %s",a.dpr);return a.dpr-b.dpr}var Ia=xa(.4,0,.2,1.4),jb=["aria-label","aria-describedby","aria-labelledby"],kb={"amp-img":!0,"amp-anim":!0};function lb(a){a=AMP.BaseElement.call(this,a)||this;a.I=null;a.Ua=null;a.da=0;a.xa=0;a.J=null;a.P=null;a.Ga=null;a.Fa=null;a.D=1;a.Ea=1;a.Ka=1;a.Na=1;a.Aa=2;a.A=0;a.B=0;a.N=0;a.O=0;a.ra=0;a.sa=0;a.pa=0;a.qa=0;a.L=null;a.ta=null;a.Da=null;a.X=null;a.Ba=a.Ba.bind(a);return a}r(lb,AMP.BaseElement);g=lb.prototype;g.buildCallback=function(){this.element.classList.add("i-amphtml-image-viewer");var a=this.getRealChildren();ta(1==a.length,"%s should have its target element as its one and only child","amp-image-viewer");ta(kb[a[0].tagName.toLowerCase()],"%s is not supported by %s",a[0].tagName,"amp-image-viewer");this.Da=a[0];Ba(this.element).setOwner(this.Da,this.element)};g.layoutCallback=function(){var a=this;if(this.X)return this.X;if(Ea(this.element))return v();var b=this.Da,c=!!this.I,d=c?v():b.signals().whenSignal("load-end");c||Ba(this.element).scheduleLayout(this.element,b);return this.X=d.then((function(){return mb(a)})).then((function(){return X(a)})).then((function(){return nb(a)}))};g.pauseCallback=function(){var a=this;this.X&&this.X.then((function(){X(a);a.L&&(a.L.cleanup(),a.L=null)}))};g.resumeCallback=function(){var a=this;this.X&&this.X.then((function(){X(a);nb(a)}))};g.unlayoutCallback=function(){this.L&&(this.L.cleanup(),this.L=null);this.X=null;db(this.element,this.Ba);return!0};g.isLayoutSupported=function(a){return"fill"==a};g.getImageBox=function(){return this.P};g.getImage=function(){return this.I};g.getImageBoxWithOffset=function(){if(0==this.N&&0==this.O||!this.P)return this.P;var a=(this.D-1)/2;var b=this.P;b=U(b.left-b.width*a,b.top-b.height*a,b.width*(1+2*a),b.height*(1+2*a));var c=this.N,d=this.O;return 0==c&&0==d||0==b.width&&0==b.height?b:U(b.left+c,b.top+d,b.width,b.height)};function ob(a,b){var c=Fa(b);a.measureElement((function(){c?(a.da=c.naturalWidth||b.offsetWidth,a.xa=c.naturalHeight||b.offsetHeight):(a.da=b.offsetWidth,a.xa=b.offsetHeight)}))}function mb(a){if(a.I)return v();a.I=a.element.ownerDocument.createElement("img");a.I.classList.add("i-amphtml-image-viewer-image");var b=a.Da;ob(a,b);a.Ua=gb(b);ab(a.element,a.Ba);return a.mutateElement((function(){B(a.I,{top:0,left:0,width:0,height:0});wa(b);a.element.appendChild(a.I);return b.getImpl().then((function(c){c.propagateAttributes(jb,a.I)}))}))}g.Ba=function(){Ea(this.element)||X(this)};function X(a){return a.measureElement((function(){var b=a.element.getBoundingClientRect();b=U(Number(b.left),Number(b.top),Number(b.width),Number(b.height));a.J=b;b=a.da/a.xa;var c=Math.min(a.J.width/b,a.J.height),d=Math.min(a.J.height*b,a.J.width);16>=Math.abs(d-a.da)&&Math.abs(16>=c-a.xa)&&(d=a.da,c=a.xa);a.P=U(Math.round((a.J.width-d)/2),Math.round((a.J.height-c)/2),Math.round(d),Math.round(c));c=a.J.width/a.J.height;a.Aa=Math.max(2,Math.max(c/b,b/c));a.Ea=a.D=1;a.A=a.N=0;a.B=a.O=0;pb(a,a.D)})).then((function(){var b=a.I;return a.mutateElement((function(){B(b,{top:a.P.top+"px",left:a.P.left+"px",width:a.P.width+"px",height:a.P.height+"px"});Y(a)}),b)})).then((function(){return qb(a)}))}function qb(a){if(!a.Ua)return v();a.Ka=Math.max(a.Ka,a.D);var b=a.Ua.select(Math.max(a.P.width*a.Ka,a.da),self.devicePixelRatio||1);return b==a.I.getAttribute("src")?v():a.mutateElement((function(){a.I.setAttribute("src",b)}),a.I)}function nb(a){a.L=Na(a.element);a.L.onGesture(Sa,(function(b){var c=b.data;rb(a,1==a.D?a.Aa:a.Na,a.J.width/2-c.clientX,a.J.height/2-c.clientY,!0).then((function(){return sb(a)}))}));a.L.onGesture(R,(function(b){b=b.data.target;var c=a.win;var d={detail:null};Object.assign(d,{bubbles:!0});"function"==typeof c.CustomEvent?d=new c.CustomEvent("click",d):(c=c.document.createEvent("CustomEvent"),c.initCustomEvent("click",!!d.bubbles,!!d.cancelable,null),d=c);b.dispatchEvent(d)}));a.L.onGesture(Va,(function(b){b=b.data;var c=b.deltaX,d=b.deltaY;tb(a,b.centerClientX,b.centerClientY,c,d,Math.abs(d)>Math.abs(c)?Math.sign(d):Math.sign(-c));b.last&&ub(a,b.centerClientX,b.centerClientY,b.deltaX,b.deltaY,b.velocityY,b.velocityY)}));a.L.onGesture(Wa,(function(b){b=b.data;tb(a,b.centerClientX,b.centerClientY,b.deltaX,b.deltaY,b.dir);b.last&&sb(a)}))}function vb(a){a.Ga=a.L.onGesture(Ua,(function(b){b=b.data;var c=b.deltaY,d=T(a.A+b.deltaX,a.ra,a.pa,0);c=T(a.B+c,a.sa,a.qa,0);Z(a,a.D,d,c,!1);b.last&&wb(a,b.velocityX,b.velocityY)}));a.Fa=a.L.onPointerDown((function(){a.ta&&a.ta.halt()}))}function pb(a,b){var c=0,d=0,e=a.J.height-a.P.height*b;0<=e?d=c=0:(d=e/2,c=-d);var f=0,h=0;b=a.J.width-a.P.width*b;0<=b?h=f=0:(h=b/2,f=-h);a.ra=h;a.sa=d;a.pa=f;a.qa=c}function Y(a){var b=a.I;var c=a.N;var d=a.O;"number"==typeof c&&(c+="px");void 0===d?c="translate("+c+")":("number"==typeof d&&(d+="px"),c="translate("+c+", "+d+")");B(b,{transform:c+" scale("+a.D+")"})}function wb(a,b,c){a.ta=Qa(a.I,a.N,a.O,b,c,(function(d,e){d=T(d,a.ra,a.pa,0);e=T(e,a.sa,a.qa,0);if(1>Math.abs(d-a.N)&&1>Math.abs(e-a.O))return!1;Z(a,a.D,d,e,!1);return!0}));a.ta.thenAlways((function(){a.ta=null;return xb(a)}))}function tb(a,b,c,d,e,f){if(0!=f){var h=Xa(d,e);f=a.Ea*(1+f*h/100);var k=a.J.width/2-b,l=a.J.height/2-c;d=Math.min(k,h/100*k);e=Math.min(l,h/100*l);rb(a,f,d,e,!1)}}function rb(a,b,c,d,e){b=T(b,a.Na,a.Aa,.25);if(b!=a.D)return pb(a,b),c=T(a.A+c*b,a.ra,a.pa,0),d=T(a.B+d*b,a.sa,a.qa,0),Z(a,b,c,d,e)}function ub(a,b,c,d,e,f,h){(0==f&&0==h?v():Qa(a.I,d,e,f,h,(function(k,l){tb(a,b,c,k,l,Math.abs(l)>Math.abs(k)?Math.sign(l):Math.sign(-k));return!0})).thenAlways()).then((function(){sb(a)}))}function sb(a){var b=a.D>a.Ea;return xb(a).then((function(){b&&qb(a);1<a.D?vb(a):(a.Ga&&(a.Ga(),a.Ga=null,a.L.removeGesture(Ua)),a.Fa&&(a.Fa(),a.Fa=null))}))}function Z(a,b,c,d,e){var f=b-a.D,h=Xa(c-a.N,d-a.O),k=0;e&&(k=Math.min(250,Math.max(2.5*h,250*Math.abs(f))));if(16<k&&e){var l=F(a.D,b),m=F(a.N,c),n=F(a.O,d);e=Ha(a.I,(function(t){a.D=l(t);a.N=m(t);a.O=n(t);Y(a)}),k).thenAlways((function(){a.D=b;a.N=c;a.O=d;Y(a)}))}else a.D=b,a.N=c,a.O=d,Y(a),e=e?v():void 0;return e}function xb(a){var b=T(a.D,a.Na,a.Aa,0);b!=a.D&&pb(a,b);var c=T(a.N/a.D*b,a.ra,a.pa,0),d=T(a.O/a.D*b,a.sa,a.qa,0);return Z(a,b,c,d,!0).then((function(){a.Ea=a.D;a.A=a.N;a.B=a.O}))}(function(a){a.registerElement("amp-image-viewer",lb,".i-amphtml-image-viewer-image{position:absolute;-o-object-fit:contain;object-fit:contain}.i-amphtml-image-viewer{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;transform:translateZ(0)}.i-amphtml-image-viewer>amp-img{min-width:1px;min-height:1px}\n/*# sourceURL=/extensions/amp-image-viewer/0.1/amp-image-viewer.css*/")})(self.AMP)}});//# sourceMappingURL=amp-image-viewer-0.1.js.map