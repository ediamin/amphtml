(self.AMP=self.AMP||[]).push({n:"amp-kaltura-player",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var h;function k(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var l="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function m(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}m(this);"function"===typeof Symbol&&Symbol("x");var n;if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var p;a:{var t={a:!0},u={};try{u.__proto__=t;p=u.a;break a}catch(a){}p=!1}n=p?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var v=n,w=Array.isArray;function x(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var f=a[e];b(f,e,a)?c.push(f):(d<e&&(a[d]=f),d++)}d<a.length&&(a.length=d)}function y(a){var b=null,c="";var d=arguments;var e="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];d=e?e.call(d):{next:k(d)};for(e=d.next();!e.done;e=d.next())if(e=e.value,e instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(e,"message"))?0:f.writable)b=e;else{f=e.stack;var g=Error(e.message);for(b in e)g[b]=e[b];g.stack=f;b=g}}else c&&(c+=" "),c+=e;b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function z(a){var b=y.apply(null,arguments);setTimeout((function(){var c,d;null==(d=(c=self).__AMP_REPORT_ERROR)||d.call(c,b);throw b}))}function A(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];try{a.apply(null,c)}catch(e){z(e)}}var B=self.AMP_CONFIG||{},C=("string"==typeof B.cdnProxyRegex?new RegExp(B.cdnProxyRegex):B.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function D(a){if(self.document&&self.document.head&&(!self.location||!C.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}B.cdnUrl||D("runtime-host");B.geoApiUrl||D("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var E=self.__AMP_LOG;var G={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};var H=/vertical/,I=new WeakMap,J=new WeakMap,K=new WeakMap;function L(a,b){var c=a.ownerDocument.defaultView;if(c){var d=J.get(a);d||(d=[],J.set(a,d),M(c).observe(a));if(!d.some((function(f){return f.callback===b&&1===f.type}))){d.push({type:1,callback:b});var e=K.get(a);e&&setTimeout((function(){return N(1,b,e)}))}}}function O(a,b){var c=J.get(a);c&&(x(c,(function(d){return d.callback===b&&1===d.type})),0==c.length&&(J.delete(a),K.delete(a),(c=a.ownerDocument.defaultView)&&M(c).unobserve(a)))}function M(a){var b=I.get(a);b||(b=new a.ResizeObserver(P),I.set(a,b));return b}function P(a){for(var b=new Set,c=a.length-1;0<=c;c--){var d=a[c],e=d.target;if(!b.has(e)){b.add(e);var f=J.get(e);if(f)for(K.set(e,d),e=0;e<f.length;e++){var g=f[e];N(g.type,g.callback,d)}}}}function N(a,b,c){if(0==a)a=c.contentRect,A(b,{width:a.width,height:a.height});else if(1==a){var d=c.borderBoxSize;if(d)var e=0<d.length?d[0]:{inlineSize:0,blockSize:0};else{a=c.target;var f=H.test((a.ownerDocument.defaultView.getComputedStyle(a)||G)["writing-mode"]),g=a.offsetHeight,q=a.offsetWidth;if(f){var r=q;var F=g}else F=q,r=g;e={inlineSize:F,blockSize:r}}A(b,e)}}function Q(a){this.B=a;this.D=this.F=!1;this.o=this.o.bind(this)}Q.prototype.updatePlaying=function(a){a!==this.F&&((this.F=a)?(this.D=!1,L(this.B,this.o)):O(this.B,this.o))};Q.prototype.o=function(a){var b=a.blockSize,c=0<a.inlineSize&&0<b;c!==this.D&&((this.D=c)||this.B.pause())};
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */function R(a,b){var c=b||function(r){return r},d=a.dataset;a={};var f,e=/^param(.+)/;for(f in d){var g=f.match(e);if(g){var q=g[1][0].toLowerCase()+g[1].substr(1);a[c(q)]=d[f]}}return a}function S(a,b){if(!b)return a;var c=a.split("#",2),d=c[0].split("?",2),e=d[0]+(d[1]?"?"+d[1]+"&"+b:"?"+b);return e+=c[1]?"#"+c[1]:""}function T(a){var c,b=[];for(c in a){var d=a[c];if(null!=d)if(w(d))for(var e=0;e<d.length;e++){var f=d[e];b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}else b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")}function U(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.A="";a.j="";a.C="";a.G=new Q(a.element);return a}var V=AMP.BaseElement;U.prototype=l(V.prototype);U.prototype.constructor=U;if(v)v(U,V);else for(var W in V)if("prototype"!=W)if(Object.defineProperties){var X=Object.getOwnPropertyDescriptor(V,W);X&&Object.defineProperty(U,W,X)}else U[W]=V[W];U.H=V.prototype;h=U.prototype;h.preconnectCallback=function(a){var b=this.win;b=b.__AMP_TOP||(b.__AMP_TOP=b);var c=b.__AMP_SERVICES;c||(c=b.__AMP_SERVICES={});b=c.preconnect;b.obj||(b.obj=new b.ctor(b.context),b.context=null,b.resolve&&b.resolve(b.obj));b.obj.url(this.getAmpDoc(),"https://"+encodeURIComponent(this.A)+a)};h.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};h.buildCallback=function(){var a=this.element.getAttribute("data-partner"),b=this.element;if(!E.user)throw Error("failed to call initLogConstructor");this.j=E.user.assert(a,"The data-partner attribute is required for <amp-kaltura-player> %s",b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);this.element.classList.add("i-amphtml-media-component");this.C=this.element.getAttribute("data-entryid")||"default";this.A=this.element.getAttribute("data-service-url")||"cdnapisec.kaltura.com"};h.layoutCallback=function(){var a=this.element.getAttribute("data-uiconf")||this.element.getAttribute("data-uiconf-id")||"default",b=this.element.ownerDocument.createElement("iframe"),c="https://"+encodeURIComponent(this.A)+"/p/"+encodeURIComponent(this.j)+"/sp/"+encodeURIComponent(this.j)+"00/embedIframeJs/uiconf_id/"+encodeURIComponent(a)+"/partner_id/"+encodeURIComponent(this.j)+"?iframeembed=true&playerId=kaltura_player_amp&entry_id="+encodeURIComponent(this.C),d=R(this.element,(function(e){return"flashvars["+e+"]"}));c=S(c,T(d));b.setAttribute("frameborder","0");b.setAttribute("allowfullscreen","true");b.src=c;this.applyFillContent(b);this.element.appendChild(b);this.h=b;this.G.updatePlaying(!0);return this.loadPromise(b)};h.unlayoutCallback=function(){var a=this.h;a&&(this.element.removeChild(a),this.h=null);this.G.updatePlaying(!1);return!0};h.createPlaceholderCallback=function(){var a=this.win.document.createElement("img");this.propagateAttributes(["aria-label"],a);this.applyFillContent(a);a.setAttribute("loading","lazy");a.setAttribute("placeholder","");a.setAttribute("referrerpolicy","origin");a.hasAttribute("aria-label")?a.setAttribute("alt","Loading video - "+a.getAttribute("aria-label")):a.setAttribute("alt","Loading video");var b=this.element.getAttribute("width"),c=this.element.getAttribute("height"),d="https://"+encodeURIComponent(this.A)+"/p/"+encodeURIComponent(this.j)+"/thumbnail/entry_id/"+encodeURIComponent(this.C);b&&(d+="/width/"+b);c&&(d+="/height/"+c);a.setAttribute("src",d);return a};h.pauseCallback=function(){if(this.h&&this.h.contentWindow){var a=this.h.contentWindow,b=JSON;a.postMessage.call(a,b.stringify.call(b,{method:"pause",value:""}),"*")}};(function(a){a.registerElement("amp-kaltura-player",U)})(self.AMP)}});//# sourceMappingURL=amp-kaltura-player-0.1.js.map