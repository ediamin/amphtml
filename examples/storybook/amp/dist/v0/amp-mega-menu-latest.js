(self.AMP=self.AMP||[]).push({n:"amp-mega-menu",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var k,l="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function m(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}m(this);"function"===typeof Symbol&&Symbol("x");var n;if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var p;a:{var q={a:!0},r={};try{r.__proto__=q;p=r.a;break a}catch(a){}p=!1}n=p?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var u,t=n;function v(a){return a?Array.prototype.slice.call(a):[]}function w(a){return 1==(null==a?void 0:a.nodeType)}var x=self.AMP_CONFIG||{},y=("string"==typeof x.cdnProxyRegex?new RegExp(x.cdnProxyRegex):x.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function z(a){if(self.document&&self.document.head&&(!self.location||!y.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}x.cdnUrl||z("runtime-host");x.geoApiUrl||z("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var A=self.__AMP_LOG;function B(){}function C(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=D(b,"ampdoc").getAmpDoc(a)}return a}function D(a,b){E(a,b);var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function E(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var F;function G(a){try{var b=a.ownerDocument,c=b.createElement("div"),d=b.createElement("div");c.appendChild(d);return c.querySelector(":scope div")===d}catch(g){return!1}}function H(a,b){a.classList.add("i-amphtml-scoped");var c=b.replace(/^|,/g,"$&.i-amphtml-scoped ");b=a.querySelectorAll(c);a.classList.remove("i-amphtml-scoped");return b}function I(a,b){if(void 0!==F?F:F=G(a))return a.querySelector(b.replace(/^|,/g,"$&:scope "));var c=H(a,b);return void 0===c[0]?null:c[0]}function J(a){return(void 0!==F?F:F=G(a))?a.querySelectorAll("nav > * > li".replace(/^|,/g,"$&:scope ")):H(a,"nav > * > li")}function K(a,b,c){for(;a&&a!==c;a=a.parentElement)if(b(a))return a;return null}function aa(a){return a.closest?a.closest("header"):K(a,(function(b){var c=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector;return c?c.call(b,"header"):!1}))}function L(a){var b=a.isConnected;if(void 0!==b)return b;do{if(a=M(a),a.host)a=a.host;else break}while(1);return a.nodeType===Node.DOCUMENT_NODE}function M(a){if(Node.prototype.getRootNode)return a.getRootNode()||a;for(;a.parentNode&&(!a||"I-AMPHTML-SHADOW-ROOT"!=a.tagName&&(11!=a.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(a)));a=a.parentNode);return a}function N(a){try{a.focus()}catch(b){}}var O=[];function ba(a){var b=[];a=Q(a);for(var c={},d=0;d<a.length;c={j:c.j},d++)c.j=a[d],c.j.parentNode&&v(c.j.parentNode.children).filter(function(g){return function(e){return e!=g.j}}(c)).forEach((function(g){return b.push(g)}));return b}function Q(a){for(var b=[],c=a;c;c=c.parentNode||c.host)b.push(c);return b}function ca(a){for(var b=[];a;){a=M(a);var c=a.querySelectorAll("a[href],area[href],button,details summary,iframe,input,select,textarea,[contenteditable],[draggable],[tabindex]");Array.prototype.push.apply(b,c);a=a.host}return b}function da(a){B(O.every((function(f){return f.element!==a})));B(L(a));var b=ba(a),c=Q(a).filter(w),d=ca(a),g=d.filter((function(f){return a.contains(f)&&void 0!==f.__AMP_MODAL_SAVED_TAB_INDEX})),e=d.filter((function(f){return!a.contains(f)&&void 0===f.__AMP_MODAL_SAVED_TAB_INDEX})),h=b.concat(c).map((function(f){return{element:f,prevValue:f.getAttribute("aria-hidden")}}));c.forEach((function(f){return f.removeAttribute("aria-hidden")}));b.forEach((function(f){return f.setAttribute("aria-hidden","true")}));e.forEach((function(f){f.__AMP_MODAL_SAVED_TAB_INDEX=f.getAttribute("tabindex");f.setAttribute("tabindex","-1")}));g.forEach((function(f){var P=f.__AMP_MODAL_SAVED_TAB_INDEX;null===P?f.removeAttribute("tabindex"):f.setAttribute("tabindex",P)}));O.push({element:a,hiddenElementInfos:h,focusableExternalElements:e,focusableInternalElements:g})}function ea(a){var b=O.pop(),c=b.focusableExternalElements,d=b.focusableInternalElements;b=b.hiddenElementInfos;B(L(a));b.forEach((function(g){var e=g.element,h=g.prevValue;null===h?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",h)}));d.forEach((function(g){g.setAttribute("tabindex","-1")}));c.forEach((function(g){var e=g.__AMP_MODAL_SAVED_TAB_INDEX;null===e?g.removeAttribute("tabindex"):g.setAttribute("tabindex",e);g.__AMP_MODAL_SAVED_TAB_INDEX=void 0}))}function R(a){var b=AMP.BaseElement.call(this,a)||this;b.A=[];b.G=0;b.h=null;b.C=null;b.o=b.win.document;b.B=b.o.documentElement;b.D=null;b.M=a.id||Math.floor(100*Math.random());b.F=b.H.bind(b);b.I=b.K.bind(b);b.J=b.L.bind(b);return b}var S=AMP.BaseElement;R.prototype=l(S.prototype);R.prototype.constructor=R;if(t)t(R,S);else for(var T in S)if("prototype"!=T)if(Object.defineProperties){var U=Object.getOwnPropertyDescriptor(S,T);U&&Object.defineProperty(R,T,U)}else R[T]=S[T];R.N=S.prototype;R.prerenderAllowed=function(){return!0};k=R.prototype;k.isLayoutSupported=function(a){return"fixed-height"===a};k.buildCallback=function(){var a=C(this.element);a=C(a);a=a.isSingleDoc()?a.win:a;this.D=E(a,"action")?D(a,"action"):null};k.layoutCallback=function(){this.H();this.element.addEventListener("amp:dom-update",this.F);if(!this.C){var a=this.o.createElement("div");a.classList.add("i-amphtml-mega-menu-mask");a.setAttribute("aria-hidden","true");var b=aa(this.element)||this.element;b.classList.add("i-amphtml-mega-menu-mask-parent");b.appendChild(a);this.C=a}u||(u=Promise.resolve(void 0));a=u;return a};k.unlayoutCallback=function(){this.element.removeEventListener("amp:dom-update",this.F);V(this);return!0};k.H=function(){var a=this;this.A=v(J(this.element));this.A.filter((function(b){return!b.classList.contains("i-amphtml-mega-menu-item")})).forEach((function(b){if(1==b.childElementCount)W(a,b,b.firstElementChild,null);else{var c=I(b,"> button")||I(b,"> [role=button]"),d=I(b,"> [role=dialog]");if(!A.user)throw Error("failed to call initLogConstructor");A.user.assert(c,"amp-mega-menu requires each expandable item to include a button that toggles it.",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);W(a,b,c,d)}}))};function W(a,b,c,d){b.classList.add("i-amphtml-mega-menu-item");a.G++;c.classList.add("i-amphtml-mega-menu-heading");c.hasAttribute("tabindex")||c.setAttribute("tabindex",0);c.addEventListener("click",(function(e){return X(a,e)}));c.addEventListener("keydown",(function(e){if(!e.defaultPrevented)switch(e.key){case"ArrowLeft":case"ArrowRight":var h=a.A.indexOf(e.currentTarget.parentElement);if(-1!==h){e.preventDefault();e="ArrowLeft"==e.key?-1:1;var f=a.o;"rtl"==(f.body.getAttribute("dir")||f.documentElement.getAttribute("dir")||"ltr")&&(e=-e);h+=e;e=a.A.length;N(Y(a.A[0<h&&0<e?h%e:(h%e+e)%e]))}break;case"Enter":case" ":e.target==e.currentTarget&&X(a,e)}}));if(d&&!a.D.hasAction(c,"tap",b)){d.classList.add("i-amphtml-mega-menu-content");d.setAttribute("aria-modal","false");var g=d.getAttribute("id");g||(g=a.M+"_AMP_content_"+a.G,d.setAttribute("id",g));d.insertBefore(Z(a),d.firstChild);d.appendChild(Z(a));c.setAttribute("aria-haspopup","dialog");c.setAttribute("aria-controls",g);c.setAttribute("aria-expanded","false")}}k.K=function(a){a=a.target;this.h&&!this.h.contains(a)&&L(a)&&V(this)};k.L=function(a){"Escape"===a.key&&V(this)&&a.preventDefault()};function X(a,b){if(fa(a,b)){b.preventDefault();b.stopPropagation();b=b.currentTarget.parentElement;var c=V(a);b!=c&&ha(a,b)}}function fa(a,b){var c=b.target,d=b.currentTarget;return K(c,(function(g){return"A"==g.tagName}),d)||a.D.hasAction(c,"tap",d)?!1:d.hasAttribute("aria-haspopup")}function ha(a,b){a.mutateElement((function(){var d=I(b,"> .i-amphtml-mega-menu-content");da(d);d.setAttribute("aria-modal","true")}));b.setAttribute("open","");a.element.setAttribute("open","");a.C.setAttribute("open","");Y(b).setAttribute("aria-expanded","true");var c=b.querySelector(".i-amphtml-screen-reader");N(c);a.B.addEventListener("click",a.I);a.B.addEventListener("keydown",a.J);a.h=b}function V(a){if(!a.h)return null;var b=a.h;a.mutateElement((function(){var d=I(b,"> .i-amphtml-mega-menu-content");ea(d);d.setAttribute("aria-modal","false")}));b.removeAttribute("open");a.element.removeAttribute("open");a.C.removeAttribute("open");var c=Y(b);c.setAttribute("aria-expanded","false");b.contains(a.o.activeElement)&&N(c);a.B.removeEventListener("click",a.I);a.B.removeEventListener("keydown",a.J);a.h=null;return b}function Y(a){return I(a,"> .i-amphtml-mega-menu-heading")}function Z(a){var b=a.element.getAttribute("data-close-button-aria-label")||"Close the menu",c=a.o.createElement("button");c.textContent=b;c.classList.add("i-amphtml-screen-reader");c.addEventListener("click",(function(){return V(a)}));return c}(function(a){a.registerElement("amp-mega-menu",R,"amp-mega-menu{z-index:1000!important;white-space:nowrap!important}amp-mega-menu.i-amphtml-layout-size-defined[open]{overflow:visible!important}amp-mega-menu nav{background:#fff}amp-mega-menu nav>*{margin:0}amp-mega-menu .i-amphtml-mega-menu-item{display:inline-block!important}amp-mega-menu .i-amphtml-mega-menu-heading{cursor:pointer!important}amp-mega-menu .i-amphtml-mega-menu-content{position:absolute!important;left:0;width:100vw;opacity:0!important;visibility:hidden!important;background:#fff}amp-mega-menu .i-amphtml-mega-menu-item[open]>.i-amphtml-mega-menu-content{visibility:visible!important;opacity:1!important}amp-mega-menu .i-amphtml-mega-menu-item:not([open]) .i-amphtml-screen-reader{display:none!important}.i-amphtml-mega-menu-mask-parent{z-index:1000!important;position:relative}.i-amphtml-mega-menu-mask{position:fixed!important;z-index:-1!important;visibility:hidden!important;opacity:0!important;top:0!important;bottom:0!important;left:0!important;right:0!important;background:rgba(0,0,0,0.5);transition:opacity 200ms,visibility 0s 200ms}.i-amphtml-mega-menu-mask[open]{opacity:1!important;visibility:visible!important;transition:opacity 200ms}\n/*# sourceURL=/extensions/amp-mega-menu/0.1/amp-mega-menu.css*/")})(self.AMP)}});//# sourceMappingURL=amp-mega-menu-0.1.js.map