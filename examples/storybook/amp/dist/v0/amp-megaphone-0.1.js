(self.AMP=self.AMP||[]).push({n:"amp-megaphone",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var k;function m(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var q="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function r(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}r(this);"function"===typeof Symbol&&Symbol("x");var t;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var u;a:{var v={a:!0},w={};try{w.__proto__=v;u=w.a;break a}catch(a){}u=!1}t=u?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var x=t,y=Array.isArray;function z(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var f=a[e];b(f,e,a)?c.push(f):(d<e&&(a[d]=f),d++)}d<a.length&&(a.length=d)}var A=Object.prototype.toString;function B(a){return a||{}}function C(a){var b=null,c="";var d=arguments;var e="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];d=e?e.call(d):{next:m(d)};for(e=d.next();!e.done;e=d.next())if(e=e.value,e instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(e,"message"))?0:f.writable)b=e;else{f=e.stack;var g=Error(e.message);for(b in e)g[b]=e[b];g.stack=f;b=g}}else c&&(c+=" "),c+=e;b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function D(a){var b=C.apply(null,arguments);setTimeout((function(){var c,d;null==(d=(c=self).__AMP_REPORT_ERROR)||d.call(c,b);throw b}))}function E(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];try{a.apply(null,c)}catch(e){D(e)}}var F=self.AMP_CONFIG||{},G=("string"==typeof F.cdnProxyRegex?new RegExp(F.cdnProxyRegex):F.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function H(a){if(self.document&&self.document.head&&(!self.location||!G.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}F.cdnUrl||H("runtime-host");F.geoApiUrl||H("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var I=self.__AMP_LOG;var J={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};var K=/vertical/,L=new WeakMap,M=new WeakMap,N=new WeakMap;function O(a,b){var c=a.ownerDocument.defaultView;if(c){var d=M.get(a);d||(d=[],M.set(a,d),P(c).observe(a));if(!d.some((function(f){return f.callback===b&&1===f.type}))){d.push({type:1,callback:b});var e=N.get(a);e&&setTimeout((function(){return Q(1,b,e)}))}}}function R(a,b){var c=M.get(a);c&&(z(c,(function(d){return d.callback===b&&1===d.type})),0==c.length&&(M.delete(a),N.delete(a),(c=a.ownerDocument.defaultView)&&P(c).unobserve(a)))}function P(a){var b=L.get(a);b||(b=new a.ResizeObserver(aa),L.set(a,b));return b}function aa(a){for(var b=new Set,c=a.length-1;0<=c;c--){var d=a[c],e=d.target;if(!b.has(e)){b.add(e);var f=M.get(e);if(f)for(N.set(e,d),e=0;e<f.length;e++){var g=f[e];Q(g.type,g.callback,d)}}}}function Q(a,b,c){if(0==a)a=c.contentRect,E(b,{width:a.width,height:a.height});else if(1==a){var d=c.borderBoxSize;if(d)var e=0<d.length?d[0]:{inlineSize:0,blockSize:0};else{a=c.target;var f=K.test((a.ownerDocument.defaultView.getComputedStyle(a)||J)["writing-mode"]),g=a.offsetHeight,n=a.offsetWidth;if(f){var l=n;var p=g}else p=n,l=g;e={inlineSize:p,blockSize:l}}E(b,e)}}function S(a){this.B=a;this.C=this.F=!1;this.A=this.A.bind(this)}S.prototype.updatePlaying=function(a){a!==this.F&&((this.F=a)?(this.C=!1,O(this.B,this.A)):R(this.B,this.A))};S.prototype.A=function(a){var b=a.blockSize,c=0<a.inlineSize&&0<b;c!==this.C&&((this.C=c)||this.B.pause())};
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */B({c:!0,v:!0,a:!0,ad:!0});var T;function ba(a,b){function c(g){try{return e(g)}catch(p){var n,l;null==(l=(n=self).__AMP_REPORT_ERROR)||l.call(n,p);throw p}}var d=a,e=b,f=ca();d.addEventListener("message",c,f?void 0:!1);return function(){var g;null==(g=d)||g.removeEventListener("message",c,f?void 0:!1);c=d=e=null}}function ca(){if(void 0!==T)return T;T=!1;try{var a={get capture(){T=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return T}function U(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.D=null;a.j=!1;a.o="";a.G=new S(a.element);return a}var V=AMP.BaseElement;U.prototype=q(V.prototype);U.prototype.constructor=U;if(x)x(U,V);else for(var W in V)if("prototype"!=W)if(Object.defineProperties){var X=Object.getOwnPropertyDescriptor(V,W);X&&Object.defineProperty(U,W,X)}else U[W]=V[W];U.I=V.prototype;k=U.prototype;k.preconnectCallback=function(a){var b=this.win;b=b.__AMP_TOP||(b.__AMP_TOP=b);var c=b.__AMP_SERVICES;c||(c=b.__AMP_SERVICES={});b=c.preconnect;b.obj||(b.obj=new b.ctor(b.context),b.context=null,b.resolve&&b.resolve(b.obj));b=b.obj;c=this.getAmpDoc();b.url(c,this.o,a);b.url(c,"https://assets.megaphone.fm",a);b.url(c,"https://megaphone.imgix.net",a)};k.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};k.buildCallback=function(){this.element.classList.add("i-amphtml-media-component");Y(this)};k.mutatedAttributesCallback=function(){Y(this);this.h&&(this.h.src=Z(this))};k.layoutCallback=function(){var a=this.element.ownerDocument.createElement("iframe");a.setAttribute("frameborder","no");a.setAttribute("scrolling","no");a.src=Z(this);var b=this.H.bind(this);this.D=ba(this.win,b);this.applyFillContent(a);this.element.appendChild(a);this.h=a;this.G.updatePlaying(!0);return this.loadPromise(a)};k.unlayoutCallback=function(){if(this.h){var a=this.h;a.parentElement&&a.parentElement.removeChild(a);this.h=null}this.D&&this.D();this.G.updatePlaying(!1);return!0};function Z(a){Y(a);var b=a.element.getAttribute("data-playlist")||a.element.getAttribute("data-episode");var c=a.element;if(!I.user)throw Error("failed to call initLogConstructor");b=I.user.assert(b,"data-playlist or data-episode is required for <amp-megaphone> %s",c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);var d=a.element.hasAttribute("data-light"),e=a.element.hasAttribute("data-sharing"),f=a.element.getAttribute("data-episodes");c=a.element.getAttribute("data-start");var g=a.element.hasAttribute("data-tile"),n=B({p:a.j?b:void 0,light:d||void 0,sharing:e||void 0,episodes:a.j&&f||void 0,start:!a.j&&c||void 0,tile:!a.j&&g||void 0});a=a.o+"/"+(a.j?"":b+"/");b=[];for(h in n)if(c=n[h],null!=c)if(y(c))for(var l=0;l<c.length;l++){var p=c[l];b.push(encodeURIComponent(h)+"="+encodeURIComponent(p))}else b.push(encodeURIComponent(h)+"="+encodeURIComponent(c));var h=b.join("&");h?(a=a.split("#",2),b=a[0].split("?",2),h=b[0]+(b[1]?"?"+b[1]+"&"+h:"?"+h),h+=a[1]?"#"+a[1]:""):h=a;return h}function Y(a){a.j=a.element.hasAttribute("data-playlist");a.o="https://"+(a.j?"playlist":"player")+".megaphone.fm"}k.H=function(a){if(a.origin==this.o&&a.source==this.h.contentWindow){var b=a.data;if(b&&("[object Object]"===A.call(b)||b.startsWith("{"))){if("[object Object]"===A.call(b))var c=b;else try{c=JSON.parse(b)}catch(d){c=null}a=c;"iframe.resize"==a.context&&this.attemptChangeHeight(a.height).catch((function(){}))}}};k.pauseCallback=function(){this.h&&this.h.contentWindow&&(this.h.contentWindow.postMessage(JSON.stringify(B({method:"pause"})),this.o),this.h.src=this.h.src)};(function(a){a.registerElement("amp-megaphone",U)})(self.AMP)}});//# sourceMappingURL=amp-megaphone-0.1.js.map