(self.AMP=self.AMP||[]).push({n:"amp-orientation-observer",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var g="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function m(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],d=0;d<b.length;++d){var f=b[d];if(f&&f.Math==Math)return}(function(){throw Error("Cannot find global object")})()}m(this);"function"===typeof Symbol&&Symbol("x");var p;if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var q;a:{var t={a:!0},u={};try{u.__proto__=t;q=u.a;break a}catch(a){}q=!1}p=q?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var v=p;var w=self.AMP_CONFIG||{},y=("string"==typeof w.cdnProxyRegex?new RegExp(w.cdnProxyRegex):w.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function z(a){if(self.document&&self.document.head&&(!self.location||!y.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}w.cdnUrl||z("runtime-host");w.geoApiUrl||z("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var A=self.__AMP_LOG;function B(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=C(b,"ampdoc").getAmpDoc(a)}return a}function C(a,b){D(a,b);var d=a.__AMP_SERVICES;d||(d=a.__AMP_SERVICES={});a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function D(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function E(a){return a.reduce((function(b,d){return b+d}))}var F=["alpha","beta","gamma"],G={alpha:180,beta:0,gamma:0},H={alpha:[0,360],beta:[-180,180],gamma:[-90,90]};function I(a){a=AMP.BaseElement.call(this,a)||this;a.D=B(a.element);a.C=null;a.A=Object.assign({},H);a.o=Object.assign({},G);a.B=Object.assign({},G);a.h={beta:[],alpha:[],gamma:[]};a.j=null;return a}var J=AMP.BaseElement;I.prototype=g(J.prototype);I.prototype.constructor=I;if(v)v(I,J);else for(var K in J)if("prototype"!=K)if(Object.defineProperties){var L=Object.getOwnPropertyDescriptor(J,K);L&&Object.defineProperty(I,K,L)}else I[K]=J[K];I.G=J.prototype;I.prototype.buildCallback=function(){var a=B(this.element);a=B(a);a=a.isSingleDoc()?a.win:a;this.C=D(a,"action")?C(a,"action"):null;this.D.whenFirstVisible().then(this.F.bind(this))};I.prototype.F=function(){var a=this;if(!A.user)throw Error("failed to call initLogConstructor");A.user.assert(this.win.DeviceOrientationEvent,"The current browser doesn't support the `window.DeviceOrientationEvent`",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);F.forEach((function(b){var d=a.A;var f=a.A[b];var l=a.element.getAttribute(b+"-range");l&&(f=l.trim().split(" "),f=[parseInt(f[0],10),parseInt(f[1],10)]);d[b]=f}));this.j=this.element.hasAttribute("smoothing")?Number(this.element.getAttribute("smoothing"))||4:null;this.win.addEventListener("deviceorientation",(function(b){M(a,b)}),!0)};function M(a,b){if(b instanceof DeviceOrientationEvent){var d=a.win.screen,f=b.alpha,l=b.beta,r=b.gamma;b="orientation"in d?d.orientation.angle:d.orientation;if(90==a.win.orientation||-90==a.win.orientation){var N=r;r=l;l=N}0>b&&(r=-r,l=-l);var x={alpha:f,beta:l,gamma:r};F.forEach((function(c){if(.1<Math.abs(x[c]-a.o[c])){var h=a.o;if(a.j){var e=x[c];a.h[c].length>a.j&&a.h[c].shift();a.h[c].push(e);e=E(a.h[c])/a.j;a.h[c].length>a.j&&a.B[c]==G[c]&&(a.B[c]=e);e-=a.B[c]}else e=x[c];h[c]=e;e=a.o[c];var k=a.A[c],n=0>k[0]?e.toFixed()-k[0]:e.toFixed();h=a.win;e={angle:Math.min(Math.max(e,k[0]),k[1]).toFixed(),percent:n/(k[1]-k[0])};k="amp-orientation-observer."+c;n={detail:e};Object.assign(n,void 0);"function"==typeof h.CustomEvent?h=new h.CustomEvent(k,n):(h=h.document.createEvent("CustomEvent"),h.initCustomEvent(k,!!n.bubbles,!!n.cancelable,e));a.C.trigger(a.element,c,h,1)}}))}}(function(a){a.registerElement("amp-orientation-observer",I)})(self.AMP)}});//# sourceMappingURL=amp-orientation-observer-0.1.js.map