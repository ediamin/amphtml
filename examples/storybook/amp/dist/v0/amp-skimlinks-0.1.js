(self.AMP=self.AMP||[]).push({n:"amp-skimlinks",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var k;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ca(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}return function(){throw Error("Cannot find global object")}()}var da=ca(this);"function"===typeof Symbol&&Symbol("x");var l;if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var n;a:{var ea={a:!0},p={};try{p.__proto__=ea;n=p.a;break a}catch(a){}n=!1}l=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=l;function ha(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Ba=b.prototype}var r;function t(){return r?r:r=Promise.resolve(void 0)}function ia(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}var ja=Array.isArray;function u(a){return a||{}}function ka(a){var b=!1,c=null,d=a;return function(e){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];b||(c=d.apply(self,f),b=!0,d=null);return c}}var v=self.AMP_CONFIG||{},la=("string"==typeof v.cdnProxyRegex?new RegExp(v.cdnProxyRegex):v.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ma(a){if(self.document&&self.document.head&&(!self.location||!la.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}v.cdnUrl||ma("runtime-host");v.geoApiUrl||ma("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var w=self.__AMP_LOG;function x(){if(w.dev)return w.dev;throw Error("failed to call initLogConstructor")}function na(a,b){if(!w.user)throw Error("failed to call initLogConstructor");w.user.assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}function y(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return z(a,b)}function B(a,b){var c=C(a);c=D(c);return z(c,b)}function C(a){return a.nodeType?y((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function D(a){a=C(a);return a.isSingleDoc()?a.win:a}function z(a,b){a=E(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function oa(a,b){var c=pa(a,b);if(c)return c;a=E(a);a[b]=qa();return a[b].promise}function pa(a,b){var c=E(a)[b];if(c){if(c.promise)return c.promise;z(a,b);return c.promise=Promise.resolve(c.obj)}return null}function E(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function qa(){var a=new ia,b=a.promise,c=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:c,context:null,ctor:null}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var F;function ra(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a}function sa(a){var b=pa(D(a),"amp-analytics-instrumentation");if(b)return b;var c=C(a);return c.whenExtensionsKnown().then((function(){var d=c.getExtensionVersion("amp-analytics");return d?y(c.win,"extensions").waitForExtension("amp-analytics",d):null})).then((function(d){return d?oa(D(a),"amp-analytics-instrumentation"):null}))}function ta(a,b,c){var d=!1;c=void 0===c?{}:c;d=void 0===d?!0:d;var e=c,f=d;sa(a).then((function(g){g&&g.triggerEventForTarget(a,b,e,f)}))}function ua(a,b){var c=this;this.ga=a.getResourceId();this.K=a;this.C=b;for(var d in b.triggers)b.triggers[d].on="sandbox-"+this.ga+"-"+b.triggers[d].on;this.K.signals().whenSignal("load-start").then((function(){var e=c.K,f=e.ownerDocument;var g=ra(f,"amp-analytics",u({sandbox:"true",trigger:(void 0===g?0:g)?"":"immediate"}));f=ra(f,"script",u({type:"application/json"}));f.textContent=JSON.stringify(b);g.appendChild(f);g.CONFIG=b;f=y(e.ownerDocument.defaultView,"extensions");var h=C(e);f.installExtensionForDoc(h,"amp-analytics");e.appendChild(g)}))}ua.prototype.trigger=function(a,b){ta(this.K,"sandbox-"+this.ga+"-"+a,b)};function G(a){this.K=a;this.C={requests:{},triggers:{}}}G.prototype.setTransportConfig=function(a){this.C.transport=a};G.prototype.setExtraUrlParams=function(a){this.C.extraUrlParams=a};G.prototype.track=function(a,b){b=ja(b)?b:[b];for(var c=[],d=0;d<b.length;d++){var e=a+"-request-"+d;this.C.requests[e]=b[d];c.push(e)}this.C.triggers[a]={on:a,request:c};return this};G.prototype.build=function(){var a=new ua(this.K,this.C);this.C=null;return a};function H(){this.pa=100;this.U=this.aa=0;this.O=Object.create(null)}H.prototype.has=function(a){return!!this.O[a]};H.prototype.get=function(a){var b=this.O[a];if(b)return b.access=++this.U,b.payload};H.prototype.put=function(a,b){this.has(a)||this.aa++;this.O[a]={payload:b,access:this.U};if(!(this.aa<=this.pa)){a=this.O;var d,c=this.U+1;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.aa--)}};u({c:!0,v:!0,a:!0,ad:!0});var I,va;function wa(a){I||(I=self.document.createElement("a"),va=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new H));var b=va,c=I;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function J(a){return a?a.hostname.replace(/^www\./,""):""}function K(a,b){var c=b.excludedDomains;return c&&-1!==c.indexOf(a)}function xa(a,b){a=J(a);return K(a,b)}var L={pageTrackingUrl:"https://t.skimresources.com/api/track.php?data=${data}",linksTrackingUrl:"https://t.skimresources.com/api/link?data=${data}",nonAffiliateTrackingUrl:"https://t.skimresources.com/api/?call=track&rnd=${rnd}&data=${data}",beaconUrl:"https://r.skimresources.com/api"},Da="facebook.com go.redirectingat.com go.skimresources.com instagram.com twitter.com youtube.com".split(" ");function M(a,b,c){this.R=b.tracking;for(var d=b.customTrackingId,e="",f=0;8>f;f++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);this.L={customTrackingId:d,guid:null,pageImpressionId:e,pageUrl:"CANONICAL_URL",pubcode:b.pubcode,referrer:c,timezone:"TIMEZONE"};this.h=b;a=new G(a);b=this.h.config;d=b.linksTrackingUrl;e=b.nonAffiliateTrackingUrl;a.track("page-impressions",b.pageTrackingUrl);a.track("link-impressions",d);a.track("non-affiliate-click",e);a.setTransportConfig(u({beacon:!0,image:!0,xhrpost:!1}));this.V=a.build()}M.prototype.getTrackingInfo=function(){return this.L};M.prototype.setTrackingInfo=function(a){Object.assign(this.L,a)};M.prototype.sendImpressionTracking=function(a){if(this.R){var b=this.L,c=u({pub:b.pubcode,pag:b.pageUrl,guid:b.guid,uuid:b.pageImpressionId,tz:b.timezone,jv:"amp@1.0.3"});b=Ea(this,a);var d=b.numberAffiliateLinks,e=b.urls;b=this.L;b=Object.assign(u({slc:d,jsl:0,pref:b.referrer,uc:b.customTrackingId,t:1}),c);this.V.trigger("page-impressions",u({data:JSON.stringify(b)}));0!==d&&(b=Object.assign(u({dl:e,hae:d?1:0,typ:"l"}),c),this.V.trigger("link-impressions",u({data:JSON.stringify(b)})))}};M.prototype.sendNaClickTracking=function(a){if(this.R&&!xa(a,this.h)){var b=this.L,c=b.customTrackingId,d=b.pageImpressionId,e=b.timezone;a=u({pubcode:b.pubcode,referrer:b.pageUrl,pref:b.referrer,site:"false",url:a.href,custom:a.getAttribute("data-skimlinks-custom-tracking-id")||c,xtz:e,uuid:d,product:"1",jv:"amp@1.0.3"});this.V.trigger("non-affiliate-click",u({data:JSON.stringify(a),rnd:"RANDOM"}))}};function Ea(a,b){var c=0,d=u({});b.forEach((function(e){var f=e.anchor,g=e.replacementUrl,h=xa(f,a.h);g&&!h&&(d[f.href]=d[f.href]||u({ae:1,count:0}),d[f.href].count+=1,c+=1)}));return{numberAffiliateLinks:c,urls:d}}function Fa(a,b){this.syncResponse=a;this.asyncResponse=b}function N(a,b,c){this.T=a;this.h=b;this.S=c;this.G=u({});this.firstRequest=null}N.prototype.fetchDomainResolverApi=function(a){var b=u({pubcode:this.h.pubcode,page:"",domains:a}),c=this.h.config.beaconUrl;c=c+"?data="+JSON.stringify(b);return this.T.fetchJson(c,{method:"GET",ampCors:!1,credentials:"include"}).then((function(d){return d.json()}))};N.prototype.resolveUnknownAnchors=function(a){var b=Ga(this,a),c=null,d=Ha(this,a);if(d.length){Ia(this,d);var e=this.X(a,d);c=Ja(this,e,d)}return new Fa(b,c)};function Ga(a,b){return b.map((function(c){var d=null;var e=J(c);e=K(e,a.h)?"ignore":a.G[e]||"unknown";if("affiliate"===e||"unknown"===e)d=a.S.getAffiliateUrl(c);return{anchor:c,replacementUrl:d}}))}function Ha(a,b){return b.reduce((function(c,d){d=J(d);var e=a.G[d],f=K(d,a.h),g=-1!==c.indexOf(d);e||f||g||c.push(d);return c}),[])}function Ia(a,b){b.forEach((function(c){a.G[c]||(K(c,a.h)&&(a.G[c]="ignore"),a.G[c]="unknown")}))}N.prototype.X=function(a,b){return a.filter((function(c){var d=J(c);return-1!==b.indexOf(d)}))};function Ja(a,b,c){var d=a.fetchDomainResolverApi(c);a.firstRequest||(a.firstRequest=d);return d.then((function(e){Ka(a,c,e.merchant_domains||[]);return Ga(a,b)}))}function Ka(a,b,c){b.forEach((function(d){var e=-1!==c.indexOf(d);a.G[d]=e?"affiliate":"non-affiliate"}))}var P,La="Webkit webkit Moz moz ms O o".split(" ");var Ma=!1;function Q(){this.D=[]}Q.prototype.peek=function(){var a=this.length;return a?this.D[a-1].item:null};Q.prototype.enqueue=function(a,b){if(isNaN(b))throw Error("Priority must not be NaN.");for(var c=-1,d=0,e=this.length;d<=e;){c=Math.floor((d+e)/2);if(c===this.length)break;if(this.D[c].priority<b)d=c+1;else if(0<c&&this.D[c-1].priority>=b)e=c-1;else break}this.D.splice(c,0,{item:a,priority:b})};Q.prototype.forEach=function(a){for(var b=this.length;b--;)a(this.D[b].item)};Q.prototype.dequeue=function(){return this.length?this.D.pop().item:null};da.Object.defineProperties(Q.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.D.length}}});var Na=/nochunking=1/.test(self.location.hash),R=t();function Oa(a,b){if(Na)R.then(b);else{var c=S,d=C(a),e=D(d),f=E(e),g=f.chunk;g||(g=f.chunk={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1});g.ctor||(g.ctor=c,g.context=d,g.sharedInstance=!1,g.resolve&&z(e,"chunk"));B(a,"chunk").run(b,10)}}function T(a){this.state="not_run";this.W=a}function Pa(a,b){if("run"!=a.state){a.state="run";try{a.W(b)}catch(c){throw a.ja(),c}}}T.prototype.ja=function(){};T.prototype.ha=function(){return!1};T.prototype.la=function(){return!1};function U(a,b,c){T.call(this,a);this.ca=c}ha(U,T);U.prototype.ja=function(){var a=self.document;if(!Ma){Ma=!0;a=a.body;var c,b={opacity:1,visibility:"visible",animation:"none"};for(c in b){var d=a,e=b[c];var f=d.style;var g=c;if(g.startsWith("--"))f=g;else{P||(P=Object.create(null));var h=P[g];if(!h){h=g;if(void 0===f[g]){var m=g;m=m.charAt(0).toUpperCase()+m.slice(1);b:{for(var q=0;q<La.length;q++){var A=La[q]+m;if(void 0!==f[A]){m=A;break b}}m=""}void 0!==f[m]&&(h=m)}P[g]=h}f=h}f&&(f.startsWith("--")?d.style.setProperty(f,e):d.style[f]=e)}}};U.prototype.ha=function(){return this.ca.ampdoc.isVisible()};U.prototype.la=function(){return this.ca.da};function S(a){var b=this;this.ampdoc=a;this.o=a.win;this.I=new Q;this.ba=this.fa.bind(this);this.H=0;this.za=!(!this.o.navigator.scheduling||!this.o.navigator.scheduling.isInputPending);this.P=!1;this.na=this.o.document.documentElement.hasAttribute("i-amphtml-no-boilerplate");this.o.addEventListener("message",(function(c){"amp-macro-task"==c.data&&b.fa(null)}));this.da=!1;oa(D(a),"viewer").then((function(){b.da=!0}));a.onVisibilityChanged((function(){a.isVisible()&&V(b)}))}S.prototype.run=function(a,b){a=new T(a);this.I.enqueue(a,b);V(this)};S.prototype.runForStartup=function(a){a=new U(a,this.o,this);this.I.enqueue(a,Number.POSITIVE_INFINITY);V(this)};function Qa(a,b){for(var c=a.I.peek();c&&"not_run"!==c.state;)a.I.dequeue(),c=a.I.peek();c&&b&&a.I.dequeue();return c}S.prototype.fa=function(a){var b=this,c=Qa(this,!0);if(!c)return this.P=!1,this.H=0,!1;try{var d=Date.now();Pa(c,a)}finally{R.then().then().then().then().then().then().then().then().then((function(){b.P=!1;b.H+=Date.now()-d;x().fine("CHUNK",c.W.displayName||c.W.name,"Chunk duration",Date.now()-d,b.H);V(b)}))}return!0};function Ra(a){a.na&&(a.za?a.o.navigator.scheduling.isInputPending():5<a.H)?(a.H=0,Sa(a)):R.then((function(){a.ba(null)}))}function V(a){if(!a.P){var b=Qa(a);b&&(b.ha()?(a.P=!0,Ra(a)):b.la()&&a.o.requestIdleCallback?Ta(a.o,a.ba):Sa(a))}}function Sa(a){a.o.postMessage("amp-macro-task","*")}function Ta(a,b){function c(e){if(15>e.timeRemaining()){var f=2e3-(Date.now()-d);0>=f||e.didTimeout?(x().fine("CHUNK","Timed out",2e3,e.didTimeout),b(e)):(x().fine("CHUNK","Rescheduling with",f,e.timeRemaining()),a.requestIdleCallback(c,{timeout:f}))}else x().fine("CHUNK","Running idle callback with ",15),b(e)}var d=Date.now();a.requestIdleCallback(c,{timeout:2e3})}function Ua(){this.J=[];this.$=[]}k=Ua.prototype;k.updateLinkList=function(a){this.$=a.map(this.getReplacementUrlForAnchor.bind(this));this.J=a};k.updateReplacementUrls=function(a){var b=this;a.forEach((function(c){var d=c.replacementUrl,e=b.J.indexOf(c.anchor);-1!==e&&(b.$[e]=d)}))};k.getReplacementUrlForAnchor=function(a){a=this.J.indexOf(a);return-1!==a?this.$[a]:null};k.isInCache=function(a){return-1!==this.J.indexOf(a)};k.getAnchorReplacementList=function(){var a=this;return this.J.map((function(b){return{anchor:b,replacementUrl:a.getReplacementUrlForAnchor(b)}}))};function Va(){this.j=null}k=Va.prototype;k.add=function(a){var b=this;this.j||(this.j=[]);this.j.push(a);return function(){b.remove(a)}};k.remove=function(a){if(this.j){var b=this.j;a=b.indexOf(a);-1!=a&&b.splice(a,1)}};k.removeAll=function(){this.j&&(this.j.length=0)};k.fire=function(a){if(this.j){var b=this.j;var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];b=c?c.call(b):{next:aa(b)};for(c=b.next();!c.done;c=b.next())c=c.value,c(a)}};k.getHandlerCount=function(){var a,b;return null!=(b=null==(a=this.j)?void 0:a.length)?b:0};function Wa(a,b,c,d){this.events=new Va;this.id=b;this.F=a;this.wa=c;this.ra=d.linkSelector||"a";this.xa=300;this.B=new Ua}k=Wa.prototype;k.getReplacementUrl=function(a){return this.isWatchingLink(a)?this.B.getReplacementUrlForAnchor(a):null};k.getAnchorReplacementList=function(){return this.B.getAnchorReplacementList()};k.isWatchingLink=function(a){return this.B.isInCache(a)};k.rewriteAnchorUrl=function(a){var b=this.getReplacementUrl(a);if(!b||b===a.href)return!1;a.setAttribute("data-link-rewriter-original-url",a.href);a.href=b;setTimeout((function(){a.href=a.getAttribute("data-link-rewriter-original-url");a.removeAttribute("data-link-rewriter-original-url")}),this.xa);return!0};k.onDomUpdated=function(){var a=this;return new Promise((function(b){Oa(a.F.nodeType==Node.DOCUMENT_NODE?a.F.documentElement:a.F,(function(){return Xa(a).then((function(){a.events.fire({type:"PAGE_SCANNED"});b()}))}))}))};function Xa(a){var b=Ya(a),c=a.X(b);a.B.updateLinkList(b);if(!c.length)return t();a.B.updateReplacementUrls(c.map((function(e){return{anchor:e,replacementUrl:null}})));var d=a.wa(c);na(d instanceof Fa,'Invalid response from provided "resolveUnknownLinks" function."resolveUnknownLinks" should return an instance of TwoStepsResponse');d.syncResponse&&a.B.updateReplacementUrls(d.syncResponse);return d.asyncResponse?d.asyncResponse.then((function(e){a.B.updateReplacementUrls(e)})):t()}k.X=function(a){var b=this,c=[];a.forEach((function(d){b.isWatchingLink(d)||c.push(d)}));return c};function Ya(a){var b=a.F.querySelectorAll(a.ra);return[].slice.call(b)}function W(a){this.F=a.getRootNode();var b=a.getMetaByName("amp-link-rewriter-priorities");this.va=b?b.trim().split(/\s+/):[];this.Y=[];this.F.addEventListener("amp:dom-update",this.ta.bind(this));B(a,"navigation").registerAnchorMutator(this.maybeRewriteLink.bind(this),0)}W.prototype.registerLinkRewriter=function(a,b,c){var d=new Wa(this.F,a,b,c);Za(this.Y,d,this.va);d.onDomUpdated();return d};W.prototype.maybeRewriteLink=function(a,b){var c=$a(this,a);if(c.length){for(var d=null,e=0;e<c.length;e++)if(c[e].rewriteAnchorUrl(a)){d=c[e];break}var f={linkRewriterId:d?d.id:null,anchor:a,clickType:b.type};c.forEach((function(g){g.events.fire({type:"CLICK",eventData:f})}))}};W.prototype.ta=function(){this.Y.forEach((function(a){a.onDomUpdated()}))};function ab(a){var b=a.hasAttribute("data-link-rewriters")?a.getAttribute("data-link-rewriters").trim():null;return b?b.split(/\s+/):[]}function Za(a,b,c){a.push(b);a.sort((function(d,e){var f=c.indexOf(d.id),g=c.indexOf(e.id);return-1===f&&-1===g?0:-1===f?1:-1===g?-1:f>g?1:-1}))}function $a(a,b){var c=ab(b);return a.Y.reduce((function(d,e){e.isWatchingLink(b)&&Za(d,e,c);return d}),[])}function bb(a,b,c,d){this.R=c;this.qa=d;this.oa=B(a,"documentInfo").get().canonicalUrl;this.Aa=""+(new Date).getTimezoneOffset();this.h=b}bb.prototype.getAffiliateUrl=function(a){if(!a)return null;var b=this.R.getTrackingInfo(),c=b.customTrackingId,d=b.guid,e=b.pageImpressionId;b=b.pubcode;var f=a.getAttribute("data-skimlinks-custom-tracking-id")||c,g=u({id:b,url:a.href,sref:this.oa,pref:this.qa,xguid:d,xuuid:e,xtz:this.Aa,xs:"1",jv:"amp@1.0.3"});f&&(g.xcust=f);a=this.h.waypointBaseUrl;c=[];for(h in g)if(d=g[h],null!=d)if(ja(d))for(e=0;e<d.length;e++)b=d[e],c.push(encodeURIComponent(h)+"="+encodeURIComponent(b));else c.push(encodeURIComponent(h)+"="+encodeURIComponent(d));var h=c.join("&");h?(a=a.split("#",2),c=a[0].split("?",2),h=c[0]+(c[1]?"?"+c[1]+"&"+h:"?"+h),h+=a[1]?"#"+a[1]:""):h=a;return h};function Y(a,b){na(a,"<amp-skimlinks> Invalid option => "+b)}function cb(a,b){var c=a.getAttribute("publisher-code");Y(c,'"publisher-code" is required.');var d=[];b.canonicalUrl&&d.push(wa(b.canonicalUrl).hostname.replace(/^www\./,""));b.sourceUrl&&d.push(wa(b.sourceUrl).hostname.replace(/^www\./,""));d=db(a,d);var e;(e=a.getAttribute("tracking"))?(Y("true"===e||"false"===e,'"tracking" possible values are "true" or "false".'),e="true"===e):e=!0;var f=a.getAttribute("custom-tracking-id");f&&Y(50>=f.length,'"custom-tracking-id" should be <=50 characters and only contain upper and lowercase characters, numbers, underscores and pipes.');var h,g=a.getAttribute("link-selector")||null;(h=a.getAttribute("custom-redirect-domain"))?(h=h.replace(/^\/\/|^https?:\/\/|\/$/g,""),h="http://"+h):h="https://go.skimresources.com";try{/^[\w-]+$/.test("script");if(void 0!==F)var m=F;else{try{var q=a.ownerDocument,A=q.createElement("div"),ya=q.createElement("div");A.appendChild(ya);var za=A.querySelector(":scope div")===ya}catch(Aa){za=!1}m=F=za}if(m)var Ba=a.querySelectorAll("> script".replace(/^|,/g,"$&:scope "));else{a.classList.add("i-amphtml-scoped");var eb="> script".replace(/^|,/g,"$&.i-amphtml-scoped "),fb=a.querySelectorAll(eb);a.classList.remove("i-amphtml-scoped");Ba=fb}var X=Ba;if(1!==X.length)throw Error("Found "+X.length+" <script> children. Expected 1.");var O=X[0];if("SCRIPT"!=O.tagName||!O.hasAttribute("type")||"APPLICATION/JSON"!=O.getAttribute("type").toUpperCase())throw Error('<script> child must have type="application/json"');try{var gb=JSON.parse(O.textContent)}catch(Aa){throw Error("Failed to parse <script> contents. Is it valid JSON?")}a=gb;var Ca={pageTrackingUrl:a.pageTrackingUrl||L.pageTrackingUrl,linksTrackingUrl:a.linksTrackingUrl||L.linksTrackingUrl,nonAffiliateTrackingUrl:a.nonAffiliateTrackingUrl||L.nonAffiliateTrackingUrl,beaconUrl:a.beaconUrl||L.beaconUrl}}catch(Aa){Ca=L}return{pubcode:c,excludedDomains:d,tracking:e,customTrackingId:f,linkSelector:g,waypointBaseUrl:h,config:Ca}}function db(a,b){var c=[].concat(b).concat(Da),d=a.getAttribute("excluded-domains");d&&(c=c.concat(d.trim().split(/\s+/).map((function(e){return e.replace(/^www\./,"")}))));return c}function Z(a){a=AMP.BaseElement.call(this,a)||this;a.T=null;a.A=null;a.ea=null;a.ma=null;a.ia=null;a.h={};a.M=null;a.N=null;a.S=null;a.ka=null;a.Z=null;return a}ha(Z,AMP.BaseElement);k=Z.prototype;k.buildCallback=function(){var a=this;this.T=y(this.win,"xhr");this.A=this.getAmpDoc();this.ea=B(this.A,"documentInfo").get();this.ma=B(this.A,"viewer");this.ia=new W(this.A);this.h=cb(this.element,this.ea);return this.A.waitForBodyOpen().then((function(){return a.ma.getReferrerUrl()})).then((function(b){a.Z=b;a.signals().signal("load-start");b=new M(a.element,a.h,a.Z);a.M=b;a.S=new bb(a.A,a.h,a.M,a.Z);a.N=new N(a.T,a.h,a.S);a.ka=hb(a)}))};k.ya=function(a){var b=this;this.M.setTrackingInfo({guid:a.guid});this.A.whenFirstVisible().then((function(){b.M.sendImpressionTracking(b.ka.getAnchorReplacementList())}))};k.ua=function(){return(this.N.firstRequest||this.N.fetchDomainResolverApi([])).then(this.ya.bind(this))};function hb(a){var b=a.ia.registerLinkRewriter("amp-skimlinks",(function(e){return a.N.resolveUnknownAnchors(e)}),{linkSelector:a.h.linkSelector}),c={},d=(c.PAGE_SCANNED=ka(a.ua.bind(a)),c.CLICK=a.sa.bind(a),c);b.events.add((function(e){var f=d[e.type];f&&f(e.eventData)}));return b}k.sa=function(a){"amp-skimlinks"!==a.linkRewriterId&&"contextmenu"!==a.clickType&&this.M.sendNaClickTracking(a.anchor)};k.isLayoutSupported=function(){return!0};(function(a){a.registerElement("amp-skimlinks",Z)})(self.AMP)}});//# sourceMappingURL=amp-skimlinks-0.1.js.map