(self.AMP=self.AMP||[]).push({n:"amp-story-auto-analytics",ev:"0.1",l:true,v:"2106040012000",m:0,f:function(AMP,_){"use strict";var c="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function d(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],e=0;e<b.length;++e){var m=b[e];if(m&&m.Math==Math)return}(function(){throw Error("Cannot find global object")})()}d(this);"function"===typeof Symbol&&Symbol("x");var f;if("function"==typeof Object.setPrototypeOf)f=Object.setPrototypeOf;else{var g;a:{var h={a:!0},k={};try{k.__proto__=h;g=k.a;break a}catch(a){}g=!1}f=g?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var l=f;var n=self.AMP_CONFIG||{},p=("string"==typeof n.cdnProxyRegex?new RegExp(n.cdnProxyRegex):n.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function q(a){if(self.document&&self.document.head&&(!self.location||!p.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}n.cdnUrl||q("runtime-host");n.geoApiUrl||q("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */var r;var t=["<amp-analytics data-credentials=include type=gtag><script type=application/json><\/script></amp-analytics>"];function u(a){return AMP.BaseElement.call(this,a)||this}var v=AMP.BaseElement;u.prototype=c(v.prototype);u.prototype.constructor=u;if(l)l(u,v);else for(var w in v)if("prototype"!=w)if(Object.defineProperties){var x=Object.getOwnPropertyDescriptor(v,w);x&&Object.defineProperty(u,w,x)}else u[w]=v[w];u.h=v.prototype;u.prototype.buildCallback=function(){var a=this.win;a=a.__AMP_TOP||(a.__AMP_TOP=a);var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});a=b.extensions;a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));a.obj.installExtensionForDoc(this.getAmpDoc(),"amp-analytics");a=this.element;a=a.ownerDocument||a;r&&r.ownerDocument===a||(r=a.createElement("div"));b=r;b.innerHTML=t[0];a=b.firstElementChild;b.removeChild(a);var e=a.querySelector("script");b=this.element.getAttribute("gtag-id");e.textContent=JSON.stringify({vars:{gtag_id:b},triggers:{storyPageCount:{on:"story-content-loaded",vars:{event_name:"custom",event_action:"story_page_count",event_category:"${title}",event_label:"${storyPageCount}",send_to:[b]},storySpec:{repeat:!1}},storyEnd:{on:"story-last-page-visible",vars:{event_name:"custom",event_action:"story_complete",event_category:"${title}",event_label:"${title}",send_to:[b]},storySpec:{repeat:!1}},storyPageIndex:{on:"story-page-visible",vars:{event_name:"custom",event_action:"story_pages_viewed",event_category:"${title}",event_label:"${storyPageIndex}",send_to:[b]},storySpec:{repeat:!1}}},linkers:{ampStoryAutoAnalyticsLinker:{ids:{cid:"${clientId}"},enabled:!0,proxyOnly:!1}},cookies:{ampStoryAutoAnalyticsCookies:{value:"LINKER_PARAM(ampStoryAutoAnalyticsLinker, cid)"}}});this.element.appendChild(a)};u.prototype.isLayoutSupported=function(){return!0};(function(a){a.registerElement("amp-story-auto-analytics",u)})(self.AMP)}});//# sourceMappingURL=amp-story-auto-analytics-0.1.js.map