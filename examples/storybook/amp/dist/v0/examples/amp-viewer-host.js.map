{"version":3,"mappings":"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","names":["parseMessage","message","charAt","JSON","parse","e","constructor","WindowPortEmulator","win","origin","target","this","win_","origin_","target_","l","eventType","handler","addEventListener","event","b","source","data","postMessage","Messaging","port","port_","isWebview_","token_","verifyToken_","requestIdCounter_","waitingForResponse_","messageHandlers_","defaultHandler_","handleMessage_","bind","start","initiateHandshakeWithDocument","n","Promise","resolve","intervalRef","setInterval","listener","APP","app","CHANNEL_OPEN_MSG","name","clearInterval","removeEventListener","messaging","sendResponse_","requestid","channel","MessageChannel","pollMessage","HANDSHAKE_POLL_MSG","port2","port1","waitForHandshakeFromDocument","q","m","messageName","requestHandler","prototype","messagingToken","logError_","REQUEST","type","handleRequest_","RESPONSE","requestId","pending","handleResponse_","error","reject","Error","messageData","awaitResponse","promise","undefined","d","sendMessage_","rsvp","sendResponseError_","reason","errString","String","finalMessage","Object","assign","a","stringify","args","then","state","opt_data","stateStr","viewerState","AmpViewerHost","ampIframe","frameOrigin","messageHandler","opt_logsId","opt_isWebview","opt_isHandshakePoll","ampIframe_","messageHandler_","logsId","contentWindow","Messaging$$module$extensions$amp_viewer_integration$0_1$messaging$messaging.initiateHandshakeWithDocument","h","messaging_","completeHandshake_","Messaging$$module$extensions$amp_viewer_integration$0_1$messaging$messaging.waitForHandshakeFromDocument","setDefaultHandler","sendRequest","visibilityState_","prerenderSize","x","log","var_args","Array","slice","call","arguments","unshift","console","apply","self"],"sources":["extensions/amp-viewer-integration/0.1/messaging/messaging.js","extensions/amp-viewer-integration/0.1/examples/amp-viewer-host.js"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2106040012000/","includeContent":false}
