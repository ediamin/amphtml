;
(function(){"use strict";var g;function h(a){return a||{}}var l;function m(a,b,d){var c=n();a.addEventListener(b,(function(e){try{return d(e)}catch(q){var k,f;null==(f=(k=self).__AMP_REPORT_ERROR)||f.call(k,q);throw q}}),c?void 0:!1)}function n(){if(void 0!==l)return l;l=!1;try{var a={get capture(){l=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return l}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function p(a){var b=!1,d=null,c=a;return function(e){for(var k=[],f=0;f<arguments.length;++f)k[f-0]=arguments[f];b||(d=c.apply(self,k),b=!0,c=null);return d}}var r=self.AMP_CONFIG||{},t=("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function u(a){if(self.document&&self.document.head&&(!self.location||!t.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}r.cdnUrl||u("runtime-host");r.geoApiUrl||u("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};function v(a,b,d){m(a,b,d)}function w(a){try{return JSON.parse(a)}catch(b){return null}}function x(a){new Promise((function(b){b(a())}))}function y(a,b){for(var d=[],c=1;c<arguments.length;++c)d[c-1]=arguments[c];if(!a)throw Error("[<amp-video-iframe>] "+d.join(" ")+" https://go.amp.dev/c/amp-video-iframe");return a}var z="pause play mute unmute fullscreenenter fullscreenexit showcontrols hidecontrols".split(" ");function A(a){var b=this;this.H=!0;this.D=0;this.j={};this.h=a;this.A={};this.o=p((function(){B(b.h,(function(d){var c=d.id;if("number"===typeof c&&isFinite(c)&&b.j[c])(0,b.j[c])(d.args),delete b.j[c];else if("method"==d.event&&(d=d.method,d in b.A))b.A[d]()}))}));this.C=this.B=!1;this.F=p((function(){return w(b.h.name)}))}g=A.prototype;g.getMetadata=function(){return this.F()};g.method=function(a,b){y(-1<z.indexOf(a),"Invalid method "+a+".");var d="play"==a||"pause"==a?C(b):b;this.A[a]=d;this.o()};g.listenTo=function(a,b,d){var c=this;y(!this.C,"`listenTo` is meant to be used once per page.");var e={jwplayer:function(){y(!d,"listenTo('jwplayer', opt_instance) does not take an initializer.");var k=c.G;if(b){y(b.on,"listenTo('jwplayer', myjwplayer) takes a jwplayer instance as ","second argument");var f=b}else f=y(c.h.jwplayer,"listenTo('jwplayer') expects a global jwplayer() in window.")();k.call(c,f)},videojs:function(){D(c,y(b,"listenTo('videojs', element) expects a second argument"),d)}};y(e[a.toLowerCase()],"Invalid listener type ["+a+"].","Valid types are ["+Object.keys(e).join(", ")+"]")();this.C=!0};g.G=function(a){var b=arguments,d=this;["error","setupError"].forEach((function(e){a.on(e,(function(){y.apply(null,[!1].concat(b));d.postEvent("error")}))}));["adSkipped","adComplete","adError"].forEach((function(e){a.on(e,(function(){return d.postEvent("ad_end")}))}));a.on("adStarted",(function(){return d.postEvent("ad_start")}));var c={play:"playing",ready:"canplay",pause:"pause"};Object.keys(c).forEach((function(e){a.on(e,(function(){return d.postEvent(c[e])}))}));a.on("volume",(function(e){return E(d,e.volume)}));this.method("play",(function(){return a.play()}));this.method("pause",(function(){return a.pause()}));this.method("mute",(function(){return a.setMute(!0)}));this.method("unmute",(function(){return a.setMute(!1)}));this.method("showcontrols",(function(){return a.setControls(!0)}));this.method("hidecontrols",(function(){return a.setControls(!1)}));this.method("fullscreenenter",(function(){return a.setFullscreen(!0)}));this.method("fullscreenexit",(function(){return a.setFullscreen(!1)}))};function D(a,b,d){var c=y(d||a.h.videojs,"Video.JS not imported or initializer undefined.")(b);c.ready((function(){["playing","pause","ended"].forEach((function(e){c.on(e,(function(){return a.postEvent(e)}))}));if(3<=c.readyState())a.postEvent("canplay");else c.on("canplay",(function(){return a.postEvent("canplay")}));v(b,"volumechange",(function(){return E(a,c.volume())}));a.method("play",(function(){return c.play()}));a.method("pause",(function(){return c.pause()}));a.method("mute",(function(){return c.muted(!0)}));a.method("unmute",(function(){return c.muted(!1)}));a.method("showcontrols",(function(){return c.controls(!0)}));a.method("hidecontrols",(function(){return c.controls(!1)}));a.method("fullscreenenter",(function(){return c.requestFullscreen()}));a.method("fullscreenexit",(function(){return c.exitFullscreen()}))}))}function E(a,b){.01>b?(a.B=!0,a.postEvent("muted")):a.B&&(a.B=!1,a.postEvent("unmuted"))}function C(a){return function(){try{x((function(){return a()}))}catch(b){}}}g.postEvent=function(a){F(this,h({event:a}))};g.postAnalyticsEvent=function(a,b){F(this,h({event:"analytics",analytics:{eventType:a,vars:b}}))};function F(a,b,d){var c=a.D++,e=Object.assign({},{id:c},b);a.h.parent&&a.h.parent.postMessage(e,"*");d&&(a.j[c]=d)}g.getIntersection=function(a){this.o();F(this,h({method:"getIntersection"}),a)};g.getConsentData=function(a){this.o();F(this,h({method:"getConsentData"}),a)};function B(a,b){v(a,"message",(function(d){(d=w(d.data))&&b(d)}))}(function(a){y(!a.__AMP__VIDEO_IFRAME__,"video-iframe-integration-v0.js should only be included once.");a.__AMP__VIDEO_IFRAME__=!0;a.__AMP_REPORT_ERROR=console.error.bind(console);var b=new A(a),d=a.AmpVideoIframe=a.AmpVideoIframe||[];d.push=function(c){return c(b)};d.forEach(d.push)})(self)})();//# sourceMappingURL=video-iframe-integration-v0.js.map